<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Merry Gacha V30 Star & Snow Fix</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/matter-js/0.19.0/matter.min.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Gowun+Dodum&family=Rochester&display=swap');

        body {
            font-family: 'Gowun Dodum', sans-serif;
            background-color: #0f172a; 
            background-image: 
                radial-gradient(white, rgba(255,255,255,.2) 2px, transparent 40px),
                radial-gradient(white, rgba(255,255,255,.15) 1px, transparent 30px),
                radial-gradient(white, rgba(255,255,255,.1) 2px, transparent 40px),
                radial-gradient(rgba(255,255,255,0.4), transparent 100%);
            background-size: 550px 550px, 350px 350px, 250px 250px, 100% 100%;
            background-position: 0 0, 40px 60px, 130px 270px, 0 0;
            overflow-x: hidden;
            overflow-y: auto;
            user-select: none; 
        }

        .font-en { font-family: 'Rochester', cursive; }

        .tree-clip {
            clip-path: polygon(
                48% 0%, 52% 0%, 
                35% 25%, 42% 25%, 
                25% 50%, 32% 50%, 
                15% 75%, 22% 75%, 
                5% 95%, 15% 100%, 
                85% 100%, 95% 95%,
                78% 75%, 85% 75%, 
                68% 50%, 75% 50%, 
                58% 25%, 65% 25% 
            );
        }

        .glass-border {
            background: rgba(255, 255, 255, 0.2);
            padding: 8px; 
            filter: drop-shadow(0 0 15px rgba(255,255,255,0.2));
            transition: transform 0.1s;
        }
        .glass-border:active { transform: scale(0.98); }

        .glass-body {
            width: 100%;
            height: 100%;
            background: linear-gradient(180deg, rgba(236, 252, 203, 0.1) 0%, rgba(217, 249, 157, 0.3) 60%, rgba(190, 242, 100, 0.5) 100%);
            backdrop-filter: blur(2px);
            box-shadow: inset 0 0 20px rgba(255, 255, 255, 0.6), inset 10px 0 20px rgba(255, 255, 255, 0.3);
            position: relative;
            overflow: hidden; 
        }

        .shine-highlight {
            position: absolute;
            top: 0; left: 0; right: 0; bottom: 0;
            background: radial-gradient(circle at 35% 25%, rgba(255,255,255,0.7) 0%, transparent 15%), linear-gradient(110deg, transparent 35%, rgba(255,255,255,0.2) 40%, transparent 45%);
            pointer-events: none;
            z-index: 25; 
        }

        .snow-drifts {
            position: absolute;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 30px; 
            background: linear-gradient(to bottom, rgba(255,255,255,0.98) 0%, rgba(235,235,235,1) 100%);
            border-radius: 50% / 100% 100% 0 0;
            box-shadow: inset 0 -2px 5px rgba(0,0,0,0.05);
            z-index: 18; 
            pointer-events: none;
        }

        .snow-drifts::before {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            width: 45%;
            height: 55px;
            background: inherit;
            border-radius: 0 100% 0 0; 
            transform-origin: bottom left;
            box-shadow: inset -2px -2px 10px rgba(0,0,0,0.5);
            z-index: 19;
        }

        .snow-drifts::after {
            content: '';
            position: absolute;
            bottom: 0;
            right: 0;
            width: 45%;
            height: 55px;
            background: inherit;
            border-radius: 100% 0 0 0; 
            transform-origin: bottom right;
            box-shadow: inset 2px -2px 10px rgba(0,0,0,0.5);
            z-index: 19;
        }

        @keyframes snowfall {
            0% { transform: translateY(-10px) translateX(0); opacity: 0; }
            20% { opacity: 1; }
            100% { transform: translateY(350px) translateX(20px); opacity: 0; } 
        }
        .snowflake {
            position: absolute;
            background: white;
            border-radius: 50%;
            pointer-events: none;
            z-index: 15;
            animation: snowfall linear forwards;
            box-shadow: 0 0 5px white;
        }

        @keyframes shake { 0%, 100% { transform: rotate(0deg); } 25% { transform: rotate(-1deg); } 75% { transform: rotate(1deg); } } 
        .group-shake { animation: shake 0.2s ease-in-out infinite; } 
        
        @keyframes spinLever { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
        .lever-spin { animation: spinLever 1s ease-in-out; }
        
        @keyframes drop { 0% { top: 75%; opacity: 0; transform: scale(0.5) rotate(0deg); } 100% { top: 95%; opacity: 1; transform: scale(1) rotate(720deg); } }
        .capsule-drop { animation: drop 0.8s cubic-bezier(0.3, 1.5, 0.5, 1) forwards; }
        
        @keyframes pop { 0% { transform: scale(0); } 80% { transform: scale(1.05); } 100% { transform: scale(1); } }
        .modal-pop { animation: pop 0.4s ease-out forwards; }

        @keyframes openTop { 
            0% { transform: translateY(0) rotate(0); }
            100% { transform: translateY(-50px) rotate(-20deg); opacity: 1; }
        }
        @keyframes openBottom { 
            0% { transform: translateY(0) rotate(0); }
            100% { transform: translateY(30px) rotate(10deg); opacity: 1; }
        }
        @keyframes jumpAndReveal {
            0% { transform: translateY(30px) scale(0.3); opacity: 1; z-index: 10; }
            40% { z-index: 10; }
            50% { transform: translateY(-40px) scale(1.4); opacity: 1; z-index: 30; }
            100% { transform: translateY(-10px) scale(1.1); opacity: 1; z-index: 30; }
        }
        .animate-open-top { animation: openTop 0.8s cubic-bezier(0.34, 1.56, 0.64, 1) 0.3s forwards; }
        .animate-open-bottom { animation: openBottom 0.8s cubic-bezier(0.34, 1.56, 0.64, 1) 0.3s forwards; }
        .animate-jump-num { animation: jumpAndReveal 0.8s cubic-bezier(0.175, 0.885, 0.32, 1.275) 0.4s forwards; will-change: transform, z-index; }

        .lever-base { width: 70px; height: 70px; background: radial-gradient(#a16207, #713f12); border-radius: 50%; border: 3px solid #451a03; box-shadow: inset 0 2px 5px rgba(255,255,255,0.2), 0 5px 10px rgba(0,0,0,0.4); display: flex; align-items: center; justify-content: center; cursor: pointer; transition: transform 0.1s; }
        .lever-base:active { transform: scale(0.95); }
        .lever-handle { width: 90px; height: 14px; background: #b45309; border-radius: 8px; position: absolute; box-shadow: 0 2px 4px rgba(0,0,0,0.5); border: 1px solid #78350f; }
        .lever-center { width: 16px; height: 16px; background: #fbbf24; border-radius: 50%; z-index: 10; box-shadow: inset 1px 1px 2px rgba(255,255,255,0.8); }

        .physics-capsule {
            position: absolute;
            width: 28px; 
            height: 28px;
            border-radius: 50%;
            overflow: hidden;
            box-shadow: inset 0 0 5px rgba(255,255,255,0.5), 0 2px 4px rgba(0,0,0,0.3);
            will-change: transform, top, left; 
            top: 0;
            left: 0;
            transform-origin: center center;
            z-index: 17; 
        }

        .capsule-top { position: absolute; top: 0; left: 0; width: 100%; height: 50%; border-radius: 36px 36px 0 0; background: linear-gradient(to bottom, rgba(255,255,255,0.9), rgba(255,255,255,0.5)); border-bottom: 1px solid rgba(0,0,0,0.05); z-index: 20; }
        .capsule-bottom { position: absolute; bottom: 0; left: 0; width: 100%; height: 50%; border-radius: 0 0 36px 36px; z-index: 20; }

        .cap-red { background: rgba(252, 165, 165, 1); }
        .cap-gold { background: rgba(253, 224, 71, 1); }
        .cap-green { background: rgba(134, 239, 172, 1); }
        .cap-blue { background: rgba(147, 197, 253, 1); }
        .cap-purple { background: rgba(216, 180, 254, 1); }
        .cap-gray { background: rgba(156, 163, 175, 1); }

        .real-capsule-display { width: 36px; height: 36px; border-radius: 50%; position: relative; overflow: hidden; box-shadow: inset 0 0 5px rgba(255,255,255,0.5), 0 2px 4px rgba(0,0,0,0.3); }

        .text-outline-lg { color: black; -webkit-text-stroke: 3px white; text-shadow: 4px 4px 0px rgba(255,255,255,0.5); paint-order: stroke fill; }
        
        .btn-secondary { background-color: rgba(255, 255, 255, 0.1); color: rgba(255, 255, 255, 0.8); backdrop-filter: blur(4px); border: 1px solid rgba(255, 255, 255, 0.2); transition: all 0.2s; font-size: 0.875rem; font-weight: 500; padding: 0.5rem 1.5rem; border-radius: 9999px; }
        .btn-secondary:hover { background-color: rgba(255, 255, 255, 0.2); color: white; }

        .custom-input { background: rgba(0,0,0,0.5); border: 1px solid rgba(255,255,255,0.1); color: #aaa; text-align: center; border-radius: 8px; padding: 4px; width: 70px; outline: none; transition: 0.2s; font-weight: bold; pointer-events: none; }
        .custom-input.active { background: rgba(0,0,0,0.3); border-color: #fbbf24; color: #fff; pointer-events: auto; }
        .custom-input::placeholder { color: rgba(255,255,255,0.3); font-weight: normal; font-size: 12px;}

        .btn-settings { background-color: rgba(30, 41, 59, 0.8); border: 1px solid rgba(255,255,255,0.2); color: #94a3b8; width: 32px; height: 32px; border-radius: 8px; display: flex; align-items: center; justify-content: center; transition: all 0.2s; cursor: pointer; }
        .btn-settings:hover { background-color: rgba(255,255,255,0.1); color: white; }
        .btn-confirm { background-color: #16a34a; border: 1px solid #22c55e; color: white; font-size: 0.75rem; font-weight: bold; padding: 4px 10px; border-radius: 8px; cursor: pointer; transition: all 0.2s; box-shadow: 0 2px 5px rgba(0,0,0,0.3); }
        .btn-confirm:hover { background-color: #15803d; }
    </style>
</head>
<body class="min-h-screen flex items-center justify-center p-4">

    <svg width="0" height="0" class="absolute">
        <linearGradient id="star-gradient" x1="0%" y1="0%" x2="100%" y2="100%">
            <stop offset="0%" style="stop-color:#fef08a;stop-opacity:1" />
            <stop offset="50%" style="stop-color:#eab308;stop-opacity:1" />
            <stop offset="100%" style="stop-color:#a16207;stop-opacity:1" />
        </linearGradient>
    </svg>

    <div class="w-full max-w-lg flex flex-col items-center relative">
        <div class="mb-2 text-center z-10 w-full">
            <h1 class="text-4xl text-white font-bold drop-shadow-md tracking-wider font-en">üéÑMerry Gacha</h1>
            
            <div class="bg-slate-900/60 backdrop-blur px-3 py-3 rounded-xl mt-3 inline-flex items-center gap-3 border border-slate-700 shadow-lg justify-center flex-wrap relative">
                
                <div class="absolute -right-10 top-1/2 -translate-y-1/2">
                    <button id="btn-settings" onclick="enableEditMode()" class="btn-settings" title="ÏÑ§Ï†ï Î≥ÄÍ≤Ω">‚öôÔ∏è</button>
                    <button id="btn-confirm" onclick="confirmChanges()" class="btn-confirm hidden">ÌôïÏù∏</button>
                </div>

                <div class="flex flex-col items-center">
                    <label for="total-input" class="text-[10px] text-slate-400 font-bold uppercase mb-1">Ï†ÑÏ≤¥</label>
                    <input type="number" id="total-input" class="custom-input" placeholder="ÏûÖÎ†•" min="1" disabled>
                </div>
                <div class="h-8 w-px bg-slate-600 mx-1"></div>
                <div class="flex flex-col items-center">
                    <label for="batch-input" class="text-[10px] text-yellow-500 font-bold uppercase mb-1">ÎΩëÏùÑ Ïù∏Ïõê</label>
                    <input type="number" id="batch-input" class="custom-input border-yellow-600/30" placeholder="1" min="1" value="1" disabled>
                </div>
                <div class="h-8 w-px bg-slate-600 mx-1"></div>
                <div class="flex flex-col items-center min-w-[60px]">
                    <label class="text-[10px] text-slate-400 font-bold uppercase mb-1">ÎÇ®ÏùÄ Ïù∏Ïõê</label>
                    <span id="remaining-count" class="text-green-400 font-bold text-xl">--</span>
                </div>
            </div>
        </div>

        <div id="machine-container" class="relative flex flex-col items-center mt-8">
            <div id="shaking-group" class="relative flex flex-col items-center z-10 origin-bottom">
                <div class="z-30 absolute -top-9 flex items-center justify-center pointer-events-none">
                    <div class="absolute w-20 h-20 bg-yellow-400/40 rounded-full blur-2xl animate-pulse z-0"></div>
                    <svg width="54" height="54" viewBox="0 0 24 24" class="metal-star z-10 relative drop-shadow-[0_0_5px_rgba(234,179,8,0.9)]">
                        <path fill="url(#star-gradient)" stroke="#b45309" stroke-width="0.5" d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z" />
                    </svg>
                </div>

                <div id="bottle-area" onclick="shakeBottle()" class="w-80 h-96 glass-border tree-clip relative filter drop-shadow-xl mt-1 cursor-pointer" title="Í±¥ÎìúÎ†§ÏÑú ÌùîÎì§Í∏∞">
                    <div class="glass-body tree-clip relative">
                        <div class="shine-highlight"></div>
                        <div class="snow-drifts"></div>
                        <div id="snow-container" class="absolute inset-0 z-10 pointer-events-none overflow-hidden"></div>
                        <div class="absolute top-[45%] left-1/2 -translate-x-1/2 text-center opacity-60 z-0 pointer-events-none">
                            <div class="text-green-900 font-bold text-3xl border-y border-green-800/30 py-1 font-en">Christmas</div>
                        </div>
                        <div id="capsule-container" class="w-full h-full relative z-10 overflow-hidden"></div>
                    </div>
                </div>
            </div>

            <div class="w-56 h-28 bg-[#78350f] rounded-xl border-t-4 border-[#451a03] relative flex flex-col items-center justify-end pb-6 shadow-2xl z-20 -mt-10">
                <div class="absolute inset-0 opacity-20 bg-[url('https://www.transparenttextures.com/patterns/wood-pattern.png')] pointer-events-none rounded-xl"></div>
                <div class="absolute top-4 w-32 h-8 bg-gradient-to-r from-yellow-700 via-yellow-500 to-yellow-700 rounded flex items-center justify-center shadow-md border border-yellow-800 z-30">
                    <span class="text-[#451a03] text-lg font-kr" style="text-shadow: 0 1px 0 rgba(255,255,255,0.4);">&#8631;</span>
                </div>
                <div id="drop-zone" class="absolute inset-0 overflow-visible pointer-events-none z-50"></div>
                <div class="relative z-30 group -mb-8">
                    <div id="lever" onclick="startGacha()" class="lever-base transition-transform group-hover:scale-105 active:scale-95">
                        <div class="lever-handle"></div>
                        <div class="lever-center"></div>
                    </div>
                </div>
            </div>
            <div class="w-60 h-4 bg-black/40 rounded-full blur-md mt-6"></div>
        </div>

        <div class="mt-12 flex gap-3 z-10">
            <button onclick="resetData()" class="btn-secondary">Ï¥àÍ∏∞Ìôî</button>
            <button onclick="toggleHistory()" class="btn-secondary">Í∏∞Î°ù</button>
        </div>

        <div id="history-panel" class="hidden absolute top-20 bg-slate-800/95 backdrop-blur rounded-xl p-4 shadow-2xl border border-slate-600 z-50 w-64 max-h-96 overflow-y-auto">
            <div class="flex justify-between items-center mb-4 border-b border-slate-600 pb-2">
                <h3 class="text-xl font-bold text-green-400 font-en">Collection</h3>
                <button onclick="toggleHistory()" class="text-gray-400 hover:text-white">‚úï</button>
            </div>
            <div id="history-list" class="flex flex-col gap-2"></div>
        </div>
    </div>

    <div id="result-modal" class="fixed inset-0 bg-black/90 hidden z-[100] flex items-center justify-center p-4 backdrop-blur-md">
        <div class="bg-gradient-to-br from-red-800 to-red-900 p-2 rounded-[2rem] modal-pop w-full max-w-4xl shadow-2xl border-4 border-[#b45309]">
            <div class="relative bg-[#fffbeb] rounded-[1.8rem] p-6 text-center overflow-hidden min-h-[400px] flex flex-col justify-center">
                <div class="absolute inset-0 opacity-10 bg-[radial-gradient(#b45309_1px,transparent_1px)] bg-[length:15px_15px]"></div>
                
                <div class="relative z-10 flex flex-col h-full">
                    <h2 class="text-5xl md:text-6xl font-bold text-red-800 mb-8 drop-shadow-sm font-en">Congratulations!</h2>
                    <div id="result-capsule-area" class="flex-1 flex flex-wrap items-center justify-center gap-8 mb-8"></div>
                    <button onclick="closeModal()" class="w-auto px-10 mx-auto bg-[#84b76d] hover:brightness-110 text-white py-3 rounded-2xl font-bold text-2xl shadow-lg transition border-b-8 border-[#658c52] active:border-b-0 active:translate-y-2">
                        ÌôïÏù∏
                    </button>
                </div>
            </div>
        </div>
    </div>

    <script>
const _0x1ba968=_0x4371;(function(_0x5cfa6c,_0xf4dc2a){const _0x2f4274=_0x4371,_0x19dcfe=_0x5cfa6c();while(!![]){try{const _0x4dad03=-parseInt(_0x2f4274(0xe2))/0x1*(-parseInt(_0x2f4274(0x115))/0x2)+-parseInt(_0x2f4274(0xcd))/0x3*(parseInt(_0x2f4274(0xdb))/0x4)+-parseInt(_0x2f4274(0x117))/0x5*(-parseInt(_0x2f4274(0x127))/0x6)+-parseInt(_0x2f4274(0x11a))/0x7*(parseInt(_0x2f4274(0x143))/0x8)+parseInt(_0x2f4274(0xd3))/0x9*(-parseInt(_0x2f4274(0xe5))/0xa)+-parseInt(_0x2f4274(0x101))/0xb*(-parseInt(_0x2f4274(0x108))/0xc)+-parseInt(_0x2f4274(0xf0))/0xd;if(_0x4dad03===_0xf4dc2a)break;else _0x19dcfe['push'](_0x19dcfe['shift']());}catch(_0x27ea21){_0x19dcfe['push'](_0x19dcfe['shift']());}}}(_0x264b,0x954b6));const Engine=Matter['Engine'],Render=Matter[_0x1ba968(0x13a)],Runner=Matter['Runner'],Bodies=Matter[_0x1ba968(0xcb)],Composite=Matter['Composite'],Events=Matter[_0x1ba968(0xf8)],World=Matter['World'],Body=Matter[_0x1ba968(0x111)];let engine,runner,capsules=[],fallingCapsules=[],drawnHistory=[],isBusy=![],syncInterval;const MAX_CAPACITY=0x1e;function init(){const _0x13c8cd=_0x1ba968,_0x2ff95d=localStorage['getItem'](_0x13c8cd(0xe0));let _0x150f57=JSON[_0x13c8cd(0xc9)](localStorage[_0x13c8cd(0xfe)](_0x13c8cd(0x140))||'[]');if(_0x2ff95d){const _0x419af7=JSON[_0x13c8cd(0xc9)](_0x2ff95d);if(_0x419af7[_0x13c8cd(0xde)]>0x0)_0x150f57['unshift'](_0x419af7);localStorage[_0x13c8cd(0xcf)](_0x13c8cd(0xe0)),localStorage[_0x13c8cd(0xe7)](_0x13c8cd(0x140),JSON[_0x13c8cd(0x10a)](_0x150f57));}drawnHistory=_0x150f57;const _0x15c66e=localStorage[_0x13c8cd(0xfe)](_0x13c8cd(0x12e)),_0x12c2a3=localStorage[_0x13c8cd(0xfe)](_0x13c8cd(0x113));_0x15c66e&&(document[_0x13c8cd(0xfb)](_0x13c8cd(0x13f))[_0x13c8cd(0x12c)]=_0x15c66e);if(_0x12c2a3)document[_0x13c8cd(0xfb)](_0x13c8cd(0x125))[_0x13c8cd(0x12c)]=_0x12c2a3;updateRemainingDisplay(),initPhysics(),syncInterval=setInterval(checkAndSyncBalls,0x7d0);}function checkAndSyncBalls(){const _0x1704b2=_0x1ba968;if(isBusy)return;const _0x5e67ce=getAvailableNumbers(),_0x2e76af=Math['min'](_0x5e67ce['length'],MAX_CAPACITY),_0x237b57=capsules[_0x1704b2(0xde)];if(_0x237b57!==_0x2e76af){isBusy=!![];const _0xe7c5e1=_0x2e76af-_0x237b57;_0xe7c5e1>0x0?addCapsulesToWorld(_0xe7c5e1,_0x1704b2(0x112)):instantRemoveAndDrop(Math[_0x1704b2(0x11f)](_0xe7c5e1));}}function enableEditMode(){const _0x167e90=_0x1ba968;isBusy=!![],document[_0x167e90(0xfb)]('total-input')['disabled']=![],document['getElementById']('batch-input')[_0x167e90(0x129)]=![],document[_0x167e90(0xfb)](_0x167e90(0x13f))['classList'][_0x167e90(0x10b)](_0x167e90(0x13c)),document[_0x167e90(0xfb)](_0x167e90(0x125))[_0x167e90(0x13e)][_0x167e90(0x10b)](_0x167e90(0x13c)),document[_0x167e90(0xfb)](_0x167e90(0xf2))[_0x167e90(0x13e)][_0x167e90(0x10b)]('hidden'),document[_0x167e90(0xfb)]('btn-confirm')[_0x167e90(0x13e)][_0x167e90(0x128)](_0x167e90(0xef));}function confirmChanges(){const _0x47864b=_0x1ba968;document[_0x47864b(0xfb)](_0x47864b(0x13f))[_0x47864b(0x129)]=!![],document[_0x47864b(0xfb)]('batch-input')[_0x47864b(0x129)]=!![],document[_0x47864b(0xfb)](_0x47864b(0x13f))[_0x47864b(0x13e)][_0x47864b(0x128)]('active'),document[_0x47864b(0xfb)]('batch-input')[_0x47864b(0x13e)][_0x47864b(0x128)](_0x47864b(0x13c)),document[_0x47864b(0xfb)](_0x47864b(0xdd))['classList'][_0x47864b(0x10b)](_0x47864b(0xef)),document['getElementById'](_0x47864b(0xf2))['classList']['remove']('hidden'),updateTotalAndAdjustCapsules();}function createWallBetween(_0xe36fb1,_0x3f9990,_0x40993d,_0x5cac80,_0x320c4a,_0x123cd4){const _0x44bec4=_0x1ba968,_0x4e4f96=Math[_0x44bec4(0x102)]((_0x40993d-_0xe36fb1)**0x2+(_0x5cac80-_0x3f9990)**0x2),_0x48a6f7=Math[_0x44bec4(0xca)](_0x5cac80-_0x3f9990,_0x40993d-_0xe36fb1),_0x30a99f=(_0xe36fb1+_0x40993d)/0x2,_0x128927=(_0x3f9990+_0x5cac80)/0x2,_0x73679e=Bodies['rectangle'](_0x30a99f,_0x128927,_0x4e4f96,_0x320c4a,{..._0x123cd4,'angle':_0x48a6f7});return _0x73679e;}function initPhysics(){const _0x468f2c=_0x1ba968,_0x4d56f9=document[_0x468f2c(0xfb)](_0x468f2c(0x13b)),_0x345891=_0x4d56f9['clientWidth'],_0x4f928a=_0x4d56f9[_0x468f2c(0xce)];engine=Engine[_0x468f2c(0xe3)]({'positionIterations':0x14,'velocityIterations':0x14}),engine[_0x468f2c(0x107)][_0x468f2c(0xee)]['y']=0x1;const _0x277d6c=0x32,_0x376aa4={'isStatic':!![],'render':{'visible':![]},'friction':0x0,'frictionStatic':0x0,'restitution':0.1},_0x1a47f5=_0x345891,_0x1e9a03=_0x4f928a,_0xa0dda8=0x3,_0x56e3e6={'x':_0x1a47f5*0.25+_0xa0dda8,'y':_0x1e9a03*0.5},_0x5ce2fa={'x':_0x1a47f5*0.32-_0xa0dda8,'y':_0x1e9a03*0.5+_0xa0dda8*0x2},_0x2e4f6e={'x':_0x1a47f5*0.15+_0xa0dda8,'y':_0x1e9a03*0.75},_0x1d9ecb={'x':_0x1a47f5*0.22-_0xa0dda8,'y':_0x1e9a03*0.75+_0xa0dda8*0x2},_0x58271e={'x':_0x1a47f5*0.05+_0xa0dda8,'y':_0x1e9a03*0.8},_0x5bcf19={'x':_0x1a47f5*(0x1-0.25)-_0xa0dda8,'y':_0x1e9a03*0.5},_0x1a09cf={'x':_0x1a47f5*(0x1-0.32)+_0xa0dda8,'y':_0x1e9a03*0.5+_0xa0dda8*0x2},_0x48ee2d={'x':_0x1a47f5*(0x1-0.15)-_0xa0dda8,'y':_0x1e9a03*0.75},_0x533fbc={'x':_0x1a47f5*(0x1-0.22)+_0xa0dda8,'y':_0x1e9a03*0.75+_0xa0dda8*0x2},_0x57948c={'x':_0x1a47f5*(0x1-0.05)-_0xa0dda8,'y':_0x1e9a03*0.8},_0x5f399d=0x17,_0x345502={'x':_0x1a47f5*0.5-_0x5f399d,'y':_0x1e9a03+0x1e},_0x2c22d1={'x':_0x1a47f5*0.5+_0x5f399d,'y':_0x1e9a03+0x1e},_0x5c4335=[createWallBetween(-0x14,-0x32,_0x56e3e6['x'],_0x56e3e6['y'],_0x277d6c,_0x376aa4),createWallBetween(_0x56e3e6['x'],_0x56e3e6['y'],_0x5ce2fa['x'],_0x5ce2fa['y'],_0x277d6c,_0x376aa4),createWallBetween(_0x5ce2fa['x'],_0x5ce2fa['y'],_0x2e4f6e['x'],_0x2e4f6e['y'],_0x277d6c,_0x376aa4),createWallBetween(_0x2e4f6e['x'],_0x2e4f6e['y'],_0x1d9ecb['x'],_0x1d9ecb['y'],_0x277d6c,_0x376aa4),createWallBetween(_0x1d9ecb['x'],_0x1d9ecb['y'],_0x58271e['x'],_0x58271e['y'],_0x277d6c,_0x376aa4),createWallBetween(_0x1a47f5+0x14,-0x32,_0x5bcf19['x'],_0x5bcf19['y'],_0x277d6c,_0x376aa4),createWallBetween(_0x5bcf19['x'],_0x5bcf19['y'],_0x1a09cf['x'],_0x1a09cf['y'],_0x277d6c,_0x376aa4),createWallBetween(_0x1a09cf['x'],_0x1a09cf['y'],_0x48ee2d['x'],_0x48ee2d['y'],_0x277d6c,_0x376aa4),createWallBetween(_0x48ee2d['x'],_0x48ee2d['y'],_0x533fbc['x'],_0x533fbc['y'],_0x277d6c,_0x376aa4),createWallBetween(_0x533fbc['x'],_0x533fbc['y'],_0x57948c['x'],_0x57948c['y'],_0x277d6c,_0x376aa4),createWallBetween(_0x58271e['x'],_0x58271e['y'],_0x345502['x'],_0x345502['y'],_0x277d6c,{..._0x376aa4,'friction':0.001}),createWallBetween(_0x57948c['x'],_0x57948c['y'],_0x2c22d1['x'],_0x2c22d1['y'],_0x277d6c,{..._0x376aa4,'friction':0.001}),Bodies[_0x468f2c(0x144)](_0x1a47f5*0.5,_0x1e9a03+0xa,0x64,0x28,{'isStatic':!![],'render':{'visible':![]}})];Composite[_0x468f2c(0x10b)](engine['world'],_0x5c4335);const _0x585aae=getAvailableNumbers();let _0x3581f6=MAX_CAPACITY;document[_0x468f2c(0xfb)](_0x468f2c(0x13f))[_0x468f2c(0x12c)]&&(_0x3581f6=Math[_0x468f2c(0x12a)](_0x585aae['length'],MAX_CAPACITY)),addCapsulesToWorld(_0x3581f6,_0x468f2c(0x112)),runner=Runner[_0x468f2c(0xe3)](),Runner[_0x468f2c(0x12d)](runner,engine),Events['on'](engine,_0x468f2c(0x114),()=>{const _0x4ccf1b=_0x468f2c;capsules['forEach'](_0x3e90f7=>{const _0x506ad3=_0x4371,_0x44b7fc=_0x3e90f7[_0x506ad3(0xdf)],{x:_0x456c53,y:_0x3bc4fb}=_0x44b7fc['position'];(_0x3bc4fb>_0x4f928a+0xc8||_0x456c53<-0xc8||_0x456c53>_0x345891+0xc8)&&(Body[_0x506ad3(0x10f)](_0x44b7fc,{'x':_0x345891/0x2,'y':0x0}),Body[_0x506ad3(0xd0)](_0x44b7fc,{'x':0x0,'y':0x0}));const _0x410ca2=_0x44b7fc[_0x506ad3(0x139)];_0x3e90f7[_0x506ad3(0xf9)]['style'][_0x506ad3(0xd4)]=_0x506ad3(0xe4)+(_0x456c53-0xe)+_0x506ad3(0xf4)+(_0x3bc4fb-0xe)+_0x506ad3(0xf7)+_0x410ca2+_0x506ad3(0xd6);});for(let _0x366055=fallingCapsules['length']-0x1;_0x366055>=0x0;_0x366055--){const _0x6b05e7=fallingCapsules[_0x366055],_0x525d96=_0x6b05e7[_0x4ccf1b(0xdf)],{x:_0x47f873,y:_0x5979c3}=_0x525d96[_0x4ccf1b(0xd2)];if(_0x5979c3>_0x4f928a+0x64)World['remove'](engine[_0x4ccf1b(0x107)],_0x525d96),_0x6b05e7[_0x4ccf1b(0xf9)][_0x4ccf1b(0x128)](),fallingCapsules[_0x4ccf1b(0x110)](_0x366055,0x1);else{const _0xa3d5b4=_0x525d96[_0x4ccf1b(0x139)];_0x6b05e7[_0x4ccf1b(0xf9)][_0x4ccf1b(0x109)]['transform']='translate('+(_0x47f873-0xe)+'px,\x20'+(_0x5979c3-0xe)+'px)\x20rotate('+_0xa3d5b4+_0x4ccf1b(0xd6);}}});}function updateTotalAndAdjustCapsules(){updateRemainingDisplay(),adjustCapsuleCount();}function adjustCapsuleCount(){const _0x462499=_0x1ba968;isBusy=!![];const _0x2eff99=document[_0x462499(0xfb)]('total-input')['value'],_0x4bc893=getAvailableNumbers(),_0x50b6b0=Math['min'](_0x4bc893[_0x462499(0xde)],MAX_CAPACITY);if(!_0x2eff99){isBusy=![];return;}const _0x56bb22=capsules[_0x462499(0xde)],_0x3a6439=_0x50b6b0-_0x56bb22;if(_0x3a6439>0x0)addCapsulesToWorld(_0x3a6439,_0x462499(0x136));else{if(_0x3a6439<0x0){const _0x3bdbbe=Math[_0x462499(0x11f)](_0x3a6439);instantRemoveAndDrop(_0x3bdbbe);}else isBusy=![];}}function instantRemoveAndDrop(_0x515840){const _0x45a7c1=_0x1ba968;isBusy=!![];const _0x155281=Math[_0x45a7c1(0x12a)](_0x515840,capsules[_0x45a7c1(0xde)]),_0x496c09=document['getElementById'](_0x45a7c1(0x13b))['clientWidth'],_0x1a1fce=document['getElementById'](_0x45a7c1(0x13b))[_0x45a7c1(0xce)];capsules[_0x45a7c1(0x11e)]((_0x5c525f,_0x532baa)=>{const _0x5b2591=_0x45a7c1,_0x17d09e=Math[_0x5b2591(0x11f)](_0x5c525f[_0x5b2591(0xdf)]['position']['x']-_0x496c09/0x2)+(_0x1a1fce-_0x5c525f['body'][_0x5b2591(0xd2)]['y']),_0x5b4d54=Math['abs'](_0x532baa['body']['position']['x']-_0x496c09/0x2)+(_0x1a1fce-_0x532baa[_0x5b2591(0xdf)][_0x5b2591(0xd2)]['y']);return _0x17d09e-_0x5b4d54;});const _0x566906=capsules[_0x45a7c1(0x110)](0x0,_0x155281);if(_0x566906[_0x45a7c1(0xde)]===0x0){isBusy=![];return;}_0x566906[_0x45a7c1(0x10c)]((_0x32b1d6,_0x49b0e3)=>{fallingCapsules['push'](_0x32b1d6),setTimeout(()=>{const _0x4926ea=_0x4371;_0x32b1d6[_0x4926ea(0xdf)][_0x4926ea(0x100)]['mask']=0x0,Body[_0x4926ea(0xd0)](_0x32b1d6[_0x4926ea(0xdf)],{'x':0x0,'y':0xf}),_0x49b0e3===_0x566906[_0x4926ea(0xde)]-0x1&&setTimeout(()=>{isBusy=![];},0x1f4);},_0x49b0e3*0x32);});}function addCapsulesToWorld(_0x31edd2,_0x584e3d='default'){const _0x1387f8=_0x1ba968;isBusy=!![];const _0x2bdf6e=document[_0x1387f8(0xfb)](_0x1387f8(0x13b)),_0x54ea11=_0x2bdf6e[_0x1387f8(0x12f)],_0x2ce1f3=_0x2bdf6e[_0x1387f8(0xce)];if(_0x584e3d!==_0x1387f8(0x136)&&capsules[_0x1387f8(0xde)]>0x0){if(_0x584e3d==='center'||_0x584e3d===_0x1387f8(0xc8)){}}_0x584e3d!==_0x1387f8(0x136)&&(capsules[_0x1387f8(0x10c)](_0x3852ec=>{const _0xcc8e07=_0x1387f8;_0x3852ec[_0xcc8e07(0xf9)][_0xcc8e07(0x128)](),World[_0xcc8e07(0x128)](engine[_0xcc8e07(0x107)],_0x3852ec['body']);}),fallingCapsules[_0x1387f8(0x10c)](_0x2eb6e7=>{const _0x39736b=_0x1387f8;_0x2eb6e7[_0x39736b(0xf9)][_0x39736b(0x128)](),World['remove'](engine[_0x39736b(0x107)],_0x2eb6e7[_0x39736b(0xdf)]);}),capsules=[],fallingCapsules=[]);const _0x44f3ce=[_0x1387f8(0xe9),_0x1387f8(0xd8),_0x1387f8(0x137),'cap-blue',_0x1387f8(0xed)];let _0x1a9fe3=0x0;const _0x1ea0ed=setInterval(()=>{const _0x3aaf15=_0x1387f8;if(_0x1a9fe3>=_0x31edd2){clearInterval(_0x1ea0ed),setTimeout(()=>{isBusy=![];},0x1f4);return;}const _0x1481e1=document[_0x3aaf15(0x123)](_0x3aaf15(0x122));_0x1481e1[_0x3aaf15(0x106)]='physics-capsule';const _0x3d954d=_0x44f3ce[_0x1a9fe3%_0x44f3ce['length']];_0x1481e1[_0x3aaf15(0xf6)]=_0x3aaf15(0xe6)+_0x3d954d+_0x3aaf15(0xe8),_0x2bdf6e['appendChild'](_0x1481e1);const _0xed6bd6=0xe;let _0x13e44a,_0x12d8f5;const _0x4a4b74=_0x2ce1f3*0.45;if(_0x584e3d===_0x3aaf15(0x136))_0x13e44a=_0x54ea11/0x2+(Math[_0x3aaf15(0xfc)]()*0x3c-0x1e),_0x12d8f5=-0x32;else _0x584e3d===_0x3aaf15(0x112)?(_0x13e44a=_0x54ea11/0x2+(Math[_0x3aaf15(0xfc)]()*0x50-0x28),_0x12d8f5=_0x4a4b74+(Math['random']()*0x28-0x14)):(_0x13e44a=_0x54ea11/0x2+(Math[_0x3aaf15(0xfc)]()*0x50-0x28),_0x12d8f5=_0x2ce1f3-0x64-Math['random']()*0xc8);const _0x41d78c=Bodies[_0x3aaf15(0xfa)](_0x13e44a,_0x12d8f5,_0xed6bd6,{'restitution':0.5,'friction':0.01,'frictionAir':0.01,'density':0.04,'collisionFilter':{'mask':0x1}});World[_0x3aaf15(0x10b)](engine[_0x3aaf15(0x107)],_0x41d78c),capsules[_0x3aaf15(0xf1)]({'body':_0x41d78c,'element':_0x1481e1}),_0x1a9fe3++;},0x32);}function createSnow(){const _0x3f63d1=_0x1ba968,_0x4057a3=document[_0x3f63d1(0xfb)](_0x3f63d1(0x11b));_0x4057a3[_0x3f63d1(0xf6)]='';const _0x35af64=0x32;for(let _0x46e548=0x0;_0x46e548<_0x35af64;_0x46e548++){const _0x180068=document[_0x3f63d1(0x123)]('div');_0x180068[_0x3f63d1(0x106)]='snowflake';const _0x4b5dc6=Math[_0x3f63d1(0xfc)]()*0x5+0x2+'px';_0x180068[_0x3f63d1(0x109)][_0x3f63d1(0x105)]=_0x4b5dc6,_0x180068[_0x3f63d1(0x109)][_0x3f63d1(0xf3)]=_0x4b5dc6,_0x180068[_0x3f63d1(0x109)][_0x3f63d1(0x104)]=Math[_0x3f63d1(0xfc)]()*0x64+'%',_0x180068[_0x3f63d1(0x109)][_0x3f63d1(0x136)]=Math[_0x3f63d1(0xfc)]()*0x14+'%',_0x180068[_0x3f63d1(0x109)][_0x3f63d1(0xd9)]=Math[_0x3f63d1(0xfc)]()*1.5+0x1+'s',_0x180068['style'][_0x3f63d1(0xd7)]=Math[_0x3f63d1(0xfc)]()*0.7+0.3,_0x4057a3[_0x3f63d1(0x10e)](_0x180068);}setTimeout(()=>{const _0x26001a=_0x3f63d1;_0x4057a3[_0x26001a(0xf6)]='';},0xbb8);}async function dropCapsulesSequentially(_0x303946){const _0x13d0c3=_0x1ba968,_0x4d1949=document['getElementById'](_0x13d0c3(0x13b)),_0x521406=_0x4d1949[_0x13d0c3(0x12f)],_0x56a3f1=_0x4d1949[_0x13d0c3(0xce)],_0x24c292=Math['min'](_0x303946,capsules[_0x13d0c3(0xde)]);for(let _0x402135=0x0;_0x402135<_0x24c292;_0x402135++){capsules[_0x13d0c3(0x11e)]((_0x4ca5a9,_0x58a44f)=>{const _0x24ecfd=_0x13d0c3,_0x5455cb=Math[_0x24ecfd(0x11f)](_0x4ca5a9['body'][_0x24ecfd(0xd2)]['x']-_0x521406/0x2)+(_0x56a3f1-_0x4ca5a9[_0x24ecfd(0xdf)][_0x24ecfd(0xd2)]['y']),_0x8966b1=Math[_0x24ecfd(0x11f)](_0x58a44f[_0x24ecfd(0xdf)][_0x24ecfd(0xd2)]['x']-_0x521406/0x2)+(_0x56a3f1-_0x58a44f['body'][_0x24ecfd(0xd2)]['y']);return _0x5455cb-_0x8966b1;});const _0x497e0a=capsules[0x0];if(!_0x497e0a)break;capsules['shift'](),fallingCapsules[_0x13d0c3(0xf1)](_0x497e0a),_0x497e0a[_0x13d0c3(0xdf)][_0x13d0c3(0x100)][_0x13d0c3(0x116)]=0x0,Body[_0x13d0c3(0xd0)](_0x497e0a['body'],{'x':0x0,'y':0x8}),await new Promise(_0x2eed27=>setTimeout(_0x2eed27,0xc8));}}function getDrawnNumbersFlat(){return drawnHistory['flat']();}function getAvailableNumbers(){const _0x28fb7b=_0x1ba968,_0x446865=document[_0x28fb7b(0xfb)](_0x28fb7b(0x13f))[_0x28fb7b(0x12c)];if(_0x446865===''||parseInt(_0x446865)<0x1)return[];const _0x1919f5=parseInt(_0x446865),_0xc44dfc=Array[_0x28fb7b(0x132)]({'length':_0x1919f5},(_0x384264,_0xa739e6)=>_0xa739e6+0x1),_0x1e83e2=getDrawnNumbersFlat();return _0xc44dfc[_0x28fb7b(0x11c)](_0x2ea1a8=>!_0x1e83e2['includes'](_0x2ea1a8));}function updateRemainingDisplay(){const _0x4b5156=_0x1ba968,_0x49f30f=document[_0x4b5156(0xfb)](_0x4b5156(0x13f))['value'],_0x4c1e6d=document[_0x4b5156(0xfb)](_0x4b5156(0x126));if(!_0x49f30f)_0x4c1e6d['textContent']='--';else{const _0x21353f=getAvailableNumbers();_0x4c1e6d[_0x4b5156(0xff)]=_0x21353f[_0x4b5156(0xde)],localStorage[_0x4b5156(0xe7)]('gacha_total_v7',_0x49f30f);}updateHistoryUI();}function _0x4371(_0x487081,_0x42de26){const _0x264b29=_0x264b();return _0x4371=function(_0x43713b,_0x2a1d13){_0x43713b=_0x43713b-0xc8;let _0x1d3441=_0x264b29[_0x43713b];return _0x1d3441;},_0x4371(_0x487081,_0x42de26);}function shakeBottle(){const _0xce404b=_0x1ba968;if(isBusy)return;const _0x55c25a=document['getElementById']('shaking-group');createSnow(),_0x55c25a[_0xce404b(0x13e)][_0xce404b(0x10b)](_0xce404b(0xdc)),capsules[_0xce404b(0x10c)](_0x1ab86c=>{const _0x17a5ab=_0xce404b;Body['setVelocity'](_0x1ab86c[_0x17a5ab(0xdf)],{'x':(Math[_0x17a5ab(0xfc)]()-0.5)*0x8,'y':(Math[_0x17a5ab(0xfc)]()-0.5)*0x8});}),setTimeout(()=>{const _0x4a55a8=_0xce404b;_0x55c25a[_0x4a55a8(0x13e)][_0x4a55a8(0x128)]('group-shake');},0x1f4);}function _0x264b(){const _0x4281f8=['gacha_drawn_v7','\x20animate-open-bottom\x20origin-top\x20shadow-xl\x22></div></div>','1RecQyG','create','translate(','5015020wisujf','<div\x20class=\x22capsule-top\x22></div><div\x20class=\x22capsule-bottom\x20','setItem','\x22></div>','cap-red','Group\x20','<span\x20class=\x22','relative\x20flex\x20items-center\x20justify-center\x20shrink-0\x20','cap-purple','gravity','hidden','178282PbuimM','push','btn-settings','height','px,\x20','w-40\x20h-40','innerHTML','px)\x20rotate(','Events','element','circle','getElementById','random','lever-spin','getItem','textContent','collisionFilter','5741142kaqCRs','sqrt','result-modal','left','width','className','world','12ftKgri','style','stringify','add','forEach','flex\x20items-center\x20gap-2\x20flex-wrap\x20border-b\x20border-slate-700\x20pb-2\x20mb-1','appendChild','setPosition','splice','Body','center','gacha_batch_v7','afterUpdate','1844306utsOZL','mask','5172305LazfDy','drop-zone','\x22></div><div\x20class=\x22text-white\x20font-black\x20text-2xl\x20relative\x20z-50\x20drop-shadow-md\x20font-en\x22>?</div>','285845lXPzGA','snow-container','filter','floor','sort','abs','cap-blue','Ï¥àÍ∏∞ÌôîÎêòÏóàÏäµÎãàÎã§.','div','createElement','result-capsule-area','batch-input','remaining-count','6yynXbU','remove','disabled','min','reverse','value','run','gacha_total_v7','clientWidth','üéâ\x20Î™®Îì†\x20Ïù∏ÏõêÏùÑ\x20ÎΩëÏïòÏäµÎãàÎã§','text-[10px]\x20text-slate-500\x20w-full\x20mb-1','from','text-[6rem]','‚ùó\x20Ï†ÑÏ≤¥\x20Ïù∏Ïõê\x20ÏàòÎ•º\x20Î®ºÏ†Ä\x20ÏûÖÎ†•Ìï¥Ï£ºÏÑ∏Ïöî','history-list','top','cap-green','\x20font-black\x20text-gray-400\x20absolute\x20animate-jump-num\x20origin-bottom\x22\x20style=\x22will-change:\x20transform,\x20z-index;\x22>‚ùÑÔ∏è</span><div\x20class=\x22absolute\x20inset-0\x20z-20\x20pointer-events-none\x20opacity-50\x20grayscale\x22><div\x20class=\x22absolute\x20top-0\x20w-full\x20h-1/2\x20rounded-t-full\x20bg-gradient-to-b\x20from-white/90\x20to-white/50\x20border-b\x20border-black/10\x20animate-open-top\x20origin-bottom\x20shadow-xl\x22></div><div\x20class=\x22absolute\x20bottom-0\x20w-full\x20h-1/2\x20rounded-b-full\x20cap-gray\x20animate-open-bottom\x20origin-top\x20shadow-xl\x22></div></div>','angle','Render','capsule-container','active','Î™®Îì†\x20Í∏∞Î°ùÏùÑ\x20Ï¥àÍ∏∞ÌôîÌïòÏãúÍ≤†ÏäµÎãàÍπå?','classList','total-input','gacha_history_v8','toggle','lever','232Gxmlge','rectangle','default','parse','atan2','Bodies','shaking-group','3zxgAQO','clientHeight','removeItem','setVelocity','load','position','9RRYSgP','transform','\x20font-black\x20text-outline-lg\x20absolute\x20animate-jump-num\x20origin-bottom\x22\x20style=\x22font-family:\x20\x27Gowun\x20Dodum\x27,\x20sans-serif;\x20will-change:\x20transform,\x20z-index;\x22>','rad)','opacity','cap-gold','animationDuration','span','670380Xohyni','group-shake','btn-confirm','length','body'];_0x264b=function(){return _0x4281f8;};return _0x264b();}async function startGacha(){const _0x398eb4=_0x1ba968;let _0x3f998b=document['getElementById'](_0x398eb4(0x142))['classList']['contains'](_0x398eb4(0xfd));if(_0x3f998b||isBusy)return;const _0x1c1a46=document[_0x398eb4(0xfb)](_0x398eb4(0x13f));if(!_0x1c1a46['value']){alert(_0x398eb4(0x134));return;}const _0x5cf894=getAvailableNumbers();if(_0x5cf894[_0x398eb4(0xde)]===0x0){alert(_0x398eb4(0x130));return;}isBusy=!![];const _0x422456=capsules[_0x398eb4(0xde)],_0x17a276=_0x5cf894[_0x398eb4(0xde)];if(_0x422456<Math[_0x398eb4(0x12a)](_0x17a276,MAX_CAPACITY)){const _0x389ae9=Math[_0x398eb4(0x12a)](_0x17a276,MAX_CAPACITY)-_0x422456;addCapsulesToWorld(_0x389ae9,'top');}let _0x10471b=parseInt(document[_0x398eb4(0xfb)](_0x398eb4(0x125))[_0x398eb4(0x12c)])||0x1;if(_0x10471b<0x1)_0x10471b=0x1;localStorage[_0x398eb4(0xe7)](_0x398eb4(0x113),_0x10471b);const _0x9a7100=document['getElementById']('lever'),_0x56c363=document[_0x398eb4(0xfb)](_0x398eb4(0xcc));_0x9a7100['classList'][_0x398eb4(0x10b)]('lever-spin'),setTimeout(()=>{const _0x5d9df8=_0x398eb4;_0x56c363['classList'][_0x5d9df8(0x10b)](_0x5d9df8(0xdc)),createSnow(),capsules[_0x5d9df8(0x10c)](_0x25e500=>{const _0x33c8e2=_0x5d9df8;Body[_0x33c8e2(0xd0)](_0x25e500['body'],{'x':(Math['random']()-0.5)*0x5,'y':-0x3});}),setTimeout(()=>{dropCapsulesSequentially(_0x10471b);},0x1f4),setTimeout(()=>{const _0x3cbc37=_0x5d9df8;_0x9a7100[_0x3cbc37(0x13e)][_0x3cbc37(0x128)](_0x3cbc37(0xfd)),_0x56c363['classList'][_0x3cbc37(0x128)](_0x3cbc37(0xdc)),isBusy=![],processBatchDraw(_0x5cf894,_0x10471b);const _0x37aebf=getAvailableNumbers(),_0x5b2993=Math[_0x3cbc37(0x12a)](_0x37aebf[_0x3cbc37(0xde)],MAX_CAPACITY),_0x51d4ed=capsules[_0x3cbc37(0xde)];if(_0x51d4ed<_0x5b2993){const _0xa260ca=_0x5b2993-_0x51d4ed;_0xa260ca>0x0&&addCapsulesToWorld(_0xa260ca,_0x3cbc37(0x136));}},0x5dc);},0xc8);}function processBatchDraw(_0x503fe0,_0x4cb81b){const _0x53933e=_0x1ba968,_0x3db82f=Math['min'](_0x4cb81b,_0x503fe0[_0x53933e(0xde)]),_0x21ca3d=[];let _0x257702=[..._0x503fe0];for(let _0x1711ee=0x0;_0x1711ee<_0x3db82f;_0x1711ee++){const _0x3a39f2=Math[_0x53933e(0x11d)](Math[_0x53933e(0xfc)]()*_0x257702[_0x53933e(0xde)]);_0x21ca3d[_0x53933e(0xf1)](_0x257702[_0x3a39f2]),_0x257702[_0x53933e(0x110)](_0x3a39f2,0x1);}_0x21ca3d[_0x53933e(0xde)]>0x0&&(drawnHistory[_0x53933e(0xf1)](_0x21ca3d),localStorage[_0x53933e(0xe7)](_0x53933e(0x140),JSON['stringify'](drawnHistory)));const _0x152547=['cap-red',_0x53933e(0xd8),_0x53933e(0x137),_0x53933e(0x120),_0x53933e(0xed)],_0x407d5e=_0x21ca3d[0x0],_0x539417=_0x152547[_0x407d5e%_0x152547[_0x53933e(0xde)]];visualDropSingle(_0x21ca3d,_0x4cb81b,_0x539417);}function visualDropSingle(_0x159cbf,_0x599144,_0x1ddc0a){const _0x25eb98=_0x1ba968,_0x16b3db=document[_0x25eb98(0xfb)](_0x25eb98(0x118)),_0x44a797=document[_0x25eb98(0x123)](_0x25eb98(0x122));_0x44a797[_0x25eb98(0x106)]='absolute\x20left-1/2\x20-translate-x-1/2\x20w-14\x20h-14\x20rounded-full\x20capsule-drop\x20z-50\x20flex\x20items-center\x20justify-center\x20shadow-lg\x20overflow-hidden\x20border-none\x20real-capsule-display',_0x44a797[_0x25eb98(0xf6)]=_0x25eb98(0xe6)+_0x1ddc0a+_0x25eb98(0x119),_0x16b3db[_0x25eb98(0x10e)](_0x44a797),setTimeout(()=>{const _0x2eebca=_0x25eb98;_0x44a797[_0x2eebca(0x128)](),showBatchResult(_0x159cbf,_0x599144),updateRemainingDisplay();},0x320);}function showBatchResult(_0x6b70b0,_0x510896){const _0x2e8aef=_0x1ba968,_0x2b206d=document[_0x2e8aef(0xfb)](_0x2e8aef(0x103)),_0x890e29=document[_0x2e8aef(0xfb)](_0x2e8aef(0x124));_0x890e29[_0x2e8aef(0xf6)]='';const _0x302d18=[_0x2e8aef(0xe9),_0x2e8aef(0xd8),_0x2e8aef(0x137),_0x2e8aef(0x120),_0x2e8aef(0xed)];for(let _0x5c4aec=0x0;_0x5c4aec<_0x510896;_0x5c4aec++){const _0x45726c=document['createElement']('div'),_0x3c7665=_0x510896===0x1?_0x2e8aef(0xf5):'w-24\x20h-24',_0x56557d=_0x510896===0x1?_0x2e8aef(0x133):'text-5xl';_0x45726c['className']=_0x2e8aef(0xec)+_0x3c7665;if(_0x5c4aec<_0x6b70b0[_0x2e8aef(0xde)]){const _0xcc9f2d=_0x6b70b0[_0x5c4aec],_0x3fe4bb=_0x302d18[(_0xcc9f2d+_0x5c4aec)%_0x302d18[_0x2e8aef(0xde)]];_0x45726c[_0x2e8aef(0xf6)]=_0x2e8aef(0xeb)+_0x56557d+_0x2e8aef(0xd5)+_0xcc9f2d+'</span><div\x20class=\x22absolute\x20inset-0\x20z-20\x20pointer-events-none\x22><div\x20class=\x22absolute\x20top-0\x20w-full\x20h-1/2\x20rounded-t-full\x20bg-gradient-to-b\x20from-white/90\x20to-white/50\x20border-b\x20border-black/10\x20animate-open-top\x20origin-bottom\x20shadow-xl\x22></div><div\x20class=\x22absolute\x20bottom-0\x20w-full\x20h-1/2\x20rounded-b-full\x20'+_0x3fe4bb+_0x2e8aef(0xe1);}else _0x45726c[_0x2e8aef(0xf6)]=_0x2e8aef(0xeb)+_0x56557d+_0x2e8aef(0x138);_0x890e29[_0x2e8aef(0x10e)](_0x45726c);}_0x2b206d['classList'][_0x2e8aef(0x128)](_0x2e8aef(0xef));}function closeModal(){const _0x176a7c=_0x1ba968;document[_0x176a7c(0xfb)](_0x176a7c(0x103))[_0x176a7c(0x13e)]['add'](_0x176a7c(0xef));}function toggleHistory(){const _0x3e5435=_0x1ba968;document[_0x3e5435(0xfb)]('history-panel')[_0x3e5435(0x13e)][_0x3e5435(0x141)](_0x3e5435(0xef));}function updateHistoryUI(){const _0x3ccc47=_0x1ba968,_0x2a2175=document[_0x3ccc47(0xfb)](_0x3ccc47(0x135));_0x2a2175[_0x3ccc47(0xf6)]='',[...drawnHistory][_0x3ccc47(0x12b)]()[_0x3ccc47(0x10c)]((_0x135a6c,_0x348f04)=>{const _0x31b09c=_0x3ccc47,_0x52fa80=document['createElement'](_0x31b09c(0x122));_0x52fa80[_0x31b09c(0x106)]=_0x31b09c(0x10d);const _0x3bc2ef=document[_0x31b09c(0x123)](_0x31b09c(0xda));_0x3bc2ef['className']=_0x31b09c(0x131),_0x3bc2ef[_0x31b09c(0xff)]=_0x31b09c(0xea)+(drawnHistory[_0x31b09c(0xde)]-_0x348f04),_0x52fa80['appendChild'](_0x3bc2ef),_0x135a6c['forEach'](_0x2b2c0a=>{const _0x20880e=_0x31b09c,_0x30eefc=document[_0x20880e(0x123)]('div');_0x30eefc[_0x20880e(0x106)]='w-8\x20h-8\x20flex\x20items-center\x20justify-center\x20bg-gray-700\x20text-white\x20rounded-full\x20font-bold\x20border\x20border-gray-600\x20text-xs',_0x30eefc[_0x20880e(0xff)]=_0x2b2c0a,_0x52fa80[_0x20880e(0x10e)](_0x30eefc);}),_0x2a2175[_0x31b09c(0x10e)](_0x52fa80);});}function resetData(){const _0x11439c=_0x1ba968;if(!confirm(_0x11439c(0x13d)))return;drawnHistory=[],localStorage[_0x11439c(0xcf)](_0x11439c(0xe0)),localStorage[_0x11439c(0xcf)](_0x11439c(0x140)),updateRemainingDisplay();const _0x2697bb=document[_0x11439c(0xfb)](_0x11439c(0x13f))[_0x11439c(0x12c)],_0x4735f7=getAvailableNumbers(),_0x177cb3=_0x2697bb&&!isNaN(parseInt(_0x2697bb))?Math[_0x11439c(0x12a)](_0x4735f7[_0x11439c(0xde)],MAX_CAPACITY):0x1e;addCapsulesToWorld(_0x177cb3,'center'),alert(_0x11439c(0x121));}window['addEventListener'](_0x1ba968(0xd1),init);
            </script>
</body>
</html>
