<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Merry Gacha</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/matter-js/0.19.0/matter.min.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Gowun+Dodum&family=Rochester&display=swap');

        body {
            font-family: 'Gowun Dodum', sans-serif;
            background-color: #0f172a; 
            background-image: 
                radial-gradient(white, rgba(255,255,255,.2) 2px, transparent 40px),
                radial-gradient(white, rgba(255,255,255,.15) 1px, transparent 30px),
                radial-gradient(white, rgba(255,255,255,.1) 2px, transparent 40px),
                radial-gradient(rgba(255,255,255,0.4), transparent 100%);
            background-size: 550px 550px, 350px 350px, 250px 250px, 100% 100%;
            background-position: 0 0, 40px 60px, 130px 270px, 0 0;
            overflow-x: hidden;
            overflow-y: auto;
            user-select: none; 
        }

        .font-en { font-family: 'Rochester', cursive; }

        .tree-clip {
            clip-path: polygon(
                48% 0%, 52% 0%, 
                35% 25%, 42% 25%, 
                25% 50%, 32% 50%, 
                15% 75%, 22% 75%, 
                5% 95%, 15% 100%, 
                85% 100%, 95% 95%,
                78% 75%, 85% 75%, 
                68% 50%, 75% 50%, 
                58% 25%, 65% 25% 
            );
        }

        .glass-border {
            background: rgba(255, 255, 255, 0.2);
            padding: 8px; 
            filter: drop-shadow(0 0 15px rgba(255,255,255,0.2));
            transition: transform 0.1s;
        }
        .glass-border:active { transform: scale(0.98); }

        .glass-body {
            width: 100%;
            height: 100%;
            background: linear-gradient(180deg, rgba(236, 252, 203, 0.1) 0%, rgba(217, 249, 157, 0.3) 60%, rgba(190, 242, 100, 0.5) 100%);
            backdrop-filter: blur(2px);
            box-shadow: inset 0 0 20px rgba(255, 255, 255, 0.6), inset 10px 0 20px rgba(255, 255, 255, 0.3);
            position: relative;
            overflow: hidden; 
        }

        .shine-highlight {
            position: absolute;
            top: 0; left: 0; right: 0; bottom: 0;
            background: radial-gradient(circle at 35% 25%, rgba(255,255,255,0.7) 0%, transparent 15%), linear-gradient(110deg, transparent 35%, rgba(255,255,255,0.2) 40%, transparent 45%);
            pointer-events: none;
            z-index: 25; 
        }

        .snow-drifts {
            position: absolute;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 30px; 
            background: linear-gradient(to bottom, rgba(255,255,255,0.98) 0%, rgba(235,235,235,1) 100%);
            border-radius: 50% / 100% 100% 0 0;
            box-shadow: inset 0 -2px 5px rgba(0,0,0,0.05);
            z-index: 18; 
            pointer-events: none;
        }

        .snow-drifts::before {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            width: 45%;
            height: 55px;
            background: inherit;
            border-radius: 0 100% 0 0; 
            transform-origin: bottom left;
            box-shadow: inset -2px -2px 10px rgba(0,0,0,0.5);
            z-index: 19;
        }

        .snow-drifts::after {
            content: '';
            position: absolute;
            bottom: 0;
            right: 0;
            width: 45%;
            height: 55px;
            background: inherit;
            border-radius: 100% 0 0 0; 
            transform-origin: bottom right;
            box-shadow: inset 2px -2px 10px rgba(0,0,0,0.5);
            z-index: 19;
        }

        @keyframes snowfall {
            0% { transform: translateY(-10px) translateX(0); opacity: 0; }
            20% { opacity: 1; }
            100% { transform: translateY(350px) translateX(20px); opacity: 0; } 
        }
        .snowflake {
            position: absolute;
            background: white;
            border-radius: 50%;
            pointer-events: none;
            z-index: 15;
            animation: snowfall linear forwards;
            box-shadow: 0 0 5px white;
        }

        @keyframes shake { 0%, 100% { transform: rotate(0deg); } 25% { transform: rotate(-1deg); } 75% { transform: rotate(1deg); } } 
        .group-shake { animation: shake 0.2s ease-in-out infinite; } 
        
        @keyframes spinLever { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
        .lever-spin { animation: spinLever 1s ease-in-out; }
        
        @keyframes drop { 0% { top: 75%; opacity: 0; transform: scale(0.5) rotate(0deg); } 100% { top: 95%; opacity: 1; transform: scale(1) rotate(720deg); } }
        .capsule-drop { animation: drop 0.8s cubic-bezier(0.3, 1.5, 0.5, 1) forwards; }
        
        @keyframes pop { 0% { transform: scale(0); } 80% { transform: scale(1.05); } 100% { transform: scale(1); } }
        .modal-pop { animation: pop 0.4s ease-out forwards; }

        @keyframes openTop { 
            0% { transform: translateY(0) rotate(0); }
            100% { transform: translateY(-50px) rotate(-20deg); opacity: 1; }
        }
        @keyframes openBottom { 
            0% { transform: translateY(0) rotate(0); }
            100% { transform: translateY(30px) rotate(10deg); opacity: 1; }
        }
        @keyframes jumpAndReveal {
            0% { transform: translateY(30px) scale(0.3); opacity: 1; z-index: 10; }
            40% { z-index: 10; }
            50% { transform: translateY(-40px) scale(1.4); opacity: 1; z-index: 30; }
            100% { transform: translateY(-10px) scale(1.1); opacity: 1; z-index: 30; }
        }
        .animate-open-top { animation: openTop 0.8s cubic-bezier(0.34, 1.56, 0.64, 1) 0.3s forwards; }
        .animate-open-bottom { animation: openBottom 0.8s cubic-bezier(0.34, 1.56, 0.64, 1) 0.3s forwards; }
        .animate-jump-num { animation: jumpAndReveal 0.8s cubic-bezier(0.175, 0.885, 0.32, 1.275) 0.4s forwards; will-change: transform, z-index; }

        .lever-base { width: 70px; height: 70px; background: radial-gradient(#a16207, #713f12); border-radius: 50%; border: 3px solid #451a03; box-shadow: inset 0 2px 5px rgba(255,255,255,0.2), 0 5px 10px rgba(0,0,0,0.4); display: flex; align-items: center; justify-content: center; cursor: pointer; transition: transform 0.1s; }
        .lever-base:active { transform: scale(0.95); }
        .lever-handle { width: 90px; height: 14px; background: #b45309; border-radius: 8px; position: absolute; box-shadow: 0 2px 4px rgba(0,0,0,0.5); border: 1px solid #78350f; }
        .lever-center { width: 16px; height: 16px; background: #fbbf24; border-radius: 50%; z-index: 10; box-shadow: inset 1px 1px 2px rgba(255,255,255,0.8); }

        .physics-capsule {
            position: absolute;
            border-radius: 50%;
            overflow: hidden;
            box-shadow: inset 0 0 5px rgba(255,255,255,0.5), 0 2px 4px rgba(0,0,0,0.3);
            will-change: transform, top, left; 
            top: 0;
            left: 0;
            transform-origin: center center;
            z-index: 17; 
        }

        .capsule-top { position: absolute; top: 0; left: 0; width: 100%; height: 50%; border-radius: 36px 36px 0 0; background: linear-gradient(to bottom, rgba(255,255,255,0.9), rgba(255,255,255,0.5)); border-bottom: 1px solid rgba(0,0,0,0.05); z-index: 20; }
        .capsule-bottom { position: absolute; bottom: 0; left: 0; width: 100%; height: 50%; border-radius: 0 0 36px 36px; z-index: 20; }

        .cap-red { background: rgba(252, 165, 165, 1); }
        .cap-gold { background: rgba(253, 224, 71, 1); }
        .cap-green { background: rgba(134, 239, 172, 1); }
        .cap-blue { background: rgba(147, 197, 253, 1); }
        .cap-purple { background: rgba(216, 180, 254, 1); }
        .cap-gray { background: rgba(156, 163, 175, 1); }

        .real-capsule-display { width: 36px; height: 36px; border-radius: 50%; position: relative; overflow: hidden; box-shadow: inset 0 0 5px rgba(255,255,255,0.5), 0 2px 4px rgba(0,0,0,0.3); }

        .text-outline-lg { color: black; -webkit-text-stroke: 3px white; text-shadow: 4px 4px 0px rgba(255,255,255,0.5); paint-order: stroke fill; }
        
        .btn-secondary { background-color: rgba(255, 255, 255, 0.1); color: rgba(255, 255, 255, 0.8); backdrop-filter: blur(4px); border: 1px solid rgba(255, 255, 255, 0.2); transition: all 0.2s; font-size: 0.875rem; font-weight: 500; padding: 0.5rem 1.5rem; border-radius: 9999px; }
        .btn-secondary:hover { background-color: rgba(255, 255, 255, 0.2); color: white; }

        .custom-input { background: rgba(0,0,0,0.5); border: 1px solid rgba(255,255,255,0.1); color: #aaa; text-align: center; border-radius: 8px; padding: 4px; width: 70px; outline: none; transition: 0.2s; font-weight: bold; pointer-events: none; }
        .custom-input.active { background: rgba(0,0,0,0.3); border-color: #fbbf24; color: #fff; pointer-events: auto; }
        .custom-input::placeholder { color: rgba(255,255,255,0.3); font-weight: normal; font-size: 12px;}

        .btn-settings { background-color: rgba(30, 41, 59, 0.8); border: 1px solid rgba(255,255,255,0.2); color: #94a3b8; width: 32px; height: 32px; border-radius: 8px; display: flex; align-items: center; justify-content: center; transition: all 0.2s; cursor: pointer; }
        .btn-settings:hover { background-color: rgba(255,255,255,0.1); color: white; }
        .btn-confirm { background-color: #16a34a; border: 1px solid #22c55e; color: white; font-size: 0.75rem; font-weight: bold; padding: 4px 10px; border-radius: 8px; cursor: pointer; transition: all 0.2s; box-shadow: 0 2px 5px rgba(0,0,0,0.3); }
        .btn-confirm:hover { background-color: #15803d; }
    </style>
</head>
<body class="min-h-screen flex items-center justify-center p-4">

    <svg width="0" height="0" class="absolute">
        <linearGradient id="star-gradient" x1="0%" y1="0%" x2="100%" y2="100%">
            <stop offset="0%" style="stop-color:#fef08a;stop-opacity:1" />
            <stop offset="50%" style="stop-color:#eab308;stop-opacity:1" />
            <stop offset="100%" style="stop-color:#a16207;stop-opacity:1" />
        </linearGradient>
    </svg>

    <div class="w-full max-w-lg flex flex-col items-center relative">
        <div class="mb-2 text-center z-10 w-full">
            <h1 class="text-4xl text-white font-bold drop-shadow-md tracking-wider font-en">üéÑMerry Gacha</h1>
            
            <div class="bg-slate-900/60 backdrop-blur px-3 py-3 rounded-xl mt-3 inline-flex items-center gap-3 border border-slate-700 shadow-lg justify-center flex-wrap relative">
                
                <div class="absolute -right-10 top-1/2 -translate-y-1/2">
                    <button id="btn-settings" onclick="enableEditMode()" class="btn-settings" title="ÏÑ§Ï†ï Î≥ÄÍ≤Ω">‚öôÔ∏è</button>
                    <button id="btn-confirm" onclick="confirmChanges()" class="btn-confirm hidden">ÌôïÏù∏</button>
                </div>

                <div class="flex flex-col items-center">
                    <label for="total-input" class="text-[10px] text-slate-400 font-bold uppercase mb-1">Ï†ÑÏ≤¥</label>
                    <input type="number" id="total-input" class="custom-input" placeholder="ÏûÖÎ†•" min="1" disabled>
                </div>
                <div class="h-8 w-px bg-slate-600 mx-1"></div>
                <div class="flex flex-col items-center">
                    <label for="batch-input" class="text-[10px] text-yellow-500 font-bold uppercase mb-1">ÎΩëÏùÑ Ïù∏Ïõê</label>
                    <input type="number" id="batch-input" class="custom-input border-yellow-600/30" placeholder="1" min="1" value="1" disabled>
                </div>
                <div class="h-8 w-px bg-slate-600 mx-1"></div>
                <div class="flex flex-col items-center min-w-[60px]">
                    <label class="text-[10px] text-slate-400 font-bold uppercase mb-1">ÎÇ®ÏùÄ Ïù∏Ïõê</label>
                    <span id="remaining-count" class="text-green-400 font-bold text-xl">--</span>
                </div>
            </div>
        </div>

        <div id="machine-container" class="relative flex flex-col items-center mt-8">
            <div id="shaking-group" class="relative flex flex-col items-center z-10 origin-bottom">
                <div class="z-30 absolute -top-9 flex items-center justify-center pointer-events-none">
                    <div class="absolute w-20 h-20 bg-yellow-400/40 rounded-full blur-2xl animate-pulse z-0"></div>
                    <svg width="54" height="54" viewBox="0 0 24 24" class="metal-star z-10 relative drop-shadow-[0_0_5px_rgba(234,179,8,0.9)]">
                        <path fill="url(#star-gradient)" stroke="#b45309" stroke-width="0.5" d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z" />
                    </svg>
                </div>

                <div id="bottle-area" onclick="shakeBottle()" class="w-80 h-96 glass-border tree-clip relative filter drop-shadow-xl mt-1 cursor-pointer" title="Í±¥ÎìúÎ†§ÏÑú ÌùîÎì§Í∏∞">
                    <div class="glass-body tree-clip relative">
                        <div class="shine-highlight"></div>
                        <div class="snow-drifts"></div>
                        <div id="snow-container" class="absolute inset-0 z-10 pointer-events-none overflow-hidden"></div>
                        <div class="absolute top-[45%] left-1/2 -translate-x-1/2 text-center opacity-60 z-0 pointer-events-none">
                            <div class="text-green-900 font-bold text-3xl border-y border-green-800/30 py-1 font-en">Christmas</div>
                        </div>
                        <div id="capsule-container" class="w-full h-full relative z-10 overflow-hidden"></div>
                    </div>
                </div>
            </div>

            <div class="w-56 h-28 bg-[#78350f] rounded-xl border-t-4 border-[#451a03] relative flex flex-col items-center justify-end pb-6 shadow-2xl z-20 -mt-10">
                <div class="absolute inset-0 opacity-20 bg-[url('https://www.transparenttextures.com/patterns/wood-pattern.png')] pointer-events-none rounded-xl"></div>
                <div class="absolute top-4 w-32 h-8 bg-gradient-to-r from-yellow-700 via-yellow-500 to-yellow-700 rounded flex items-center justify-center shadow-md border border-yellow-800 z-30">
                    <span class="text-[#451a03] text-lg font-kr" style="text-shadow: 0 1px 0 rgba(255,255,255,0.4);">&#8631;</span>
                </div>
                <div id="drop-zone" class="absolute inset-0 overflow-visible pointer-events-none z-50"></div>
                <div class="relative z-30 group -mb-8">
                    <div id="lever" onclick="startGacha()" class="lever-base transition-transform group-hover:scale-105 active:scale-95">
                        <div class="lever-handle"></div>
                        <div class="lever-center"></div>
                    </div>
                </div>
            </div>
            <div class="w-60 h-4 bg-black/40 rounded-full blur-md mt-6"></div>
        </div>

        <div class="mt-12 flex gap-3 z-10">
            <button onclick="resetData()" class="btn-secondary">Ï¥àÍ∏∞Ìôî</button>
            <button onclick="toggleHistory()" class="btn-secondary">Í∏∞Î°ù</button>
        </div>

        <div id="history-panel" class="hidden absolute top-20 bg-slate-800/95 backdrop-blur rounded-xl p-4 shadow-2xl border border-slate-600 z-50 w-64 max-h-96 overflow-y-auto">
            <div class="flex justify-between items-center mb-4 border-b border-slate-600 pb-2">
                <h3 class="text-xl font-bold text-green-400 font-en">Collection</h3>
                <button onclick="toggleHistory()" class="text-gray-400 hover:text-white">‚úï</button>
            </div>
            <div id="history-list" class="flex flex-col gap-2"></div>
        </div>
    </div>

    <div id="result-modal" class="fixed inset-0 bg-black/90 hidden z-[100] flex items-center justify-center p-4 backdrop-blur-md">
        <div class="bg-gradient-to-br from-red-800 to-red-900 p-2 rounded-[2rem] modal-pop w-full max-w-4xl shadow-2xl border-4 border-[#b45309]">
            <div class="relative bg-[#fffbeb] rounded-[1.8rem] p-6 text-center overflow-hidden min-h-[400px] flex flex-col justify-center">
                <div class="absolute inset-0 opacity-10 bg-[radial-gradient(#b45309_1px,transparent_1px)] bg-[length:15px_15px]"></div>
                
                <div class="relative z-10 flex flex-col h-full">
                    <h2 class="text-5xl md:text-6xl font-bold text-red-800 mb-8 drop-shadow-sm font-en">Congratulations!</h2>
                    <div id="result-capsule-area" class="flex-1 flex flex-wrap items-center justify-center gap-8 mb-8"></div>
                    <button onclick="closeModal()" class="w-auto px-10 mx-auto bg-[#84b76d] hover:brightness-110 text-white py-3 rounded-2xl font-bold text-2xl shadow-lg transition border-b-8 border-[#658c52] active:border-b-0 active:translate-y-2">
                        ÌôïÏù∏
                    </button>
                </div>
            </div>
        </div>
    </div>

    <script>
        const _0x1330c5=_0x4cb0;(function(_0x53837e,_0x42e943){const _0x233f36=_0x4cb0,_0x3c41d7=_0x53837e();while(!![]){try{const _0xc2438e=parseInt(_0x233f36(0x118))/0x1+parseInt(_0x233f36(0x13d))/0x2*(-parseInt(_0x233f36(0x168))/0x3)+-parseInt(_0x233f36(0x171))/0x4+parseInt(_0x233f36(0x11f))/0x5*(-parseInt(_0x233f36(0x102))/0x6)+-parseInt(_0x233f36(0x165))/0x7+-parseInt(_0x233f36(0x101))/0x8+parseInt(_0x233f36(0x120))/0x9;if(_0xc2438e===_0x42e943)break;else _0x3c41d7['push'](_0x3c41d7['shift']());}catch(_0x492843){_0x3c41d7['push'](_0x3c41d7['shift']());}}}(_0x582d,0x4378f));const Engine=Matter['Engine'],Render=Matter[_0x1330c5(0xfd)],Runner=Matter[_0x1330c5(0x11e)],Bodies=Matter[_0x1330c5(0x170)],Composite=Matter[_0x1330c5(0x117)],Events=Matter[_0x1330c5(0x10e)],World=Matter[_0x1330c5(0x172)],Body=Matter[_0x1330c5(0x166)];function _0x582d(){const _0xfb9e90=['1588601tHLKLB','Body','position','3fAfrAR','cap-gold','cap-green','snowflake','Î™®Îì†\x20Í∏∞Î°ùÏùÑ\x20Ï¥àÍ∏∞ÌôîÌïòÏãúÍ≤†ÏäµÎãàÍπå?','relative\x20flex\x20items-center\x20justify-center\x20shrink-0\x20','.capsule-bottom','\x20font-black\x20text-gray-400\x20absolute\x20animate-jump-num\x20origin-bottom\x22\x20style=\x22will-change:\x20transform,\x20z-index;\x22>‚ùÑÔ∏è</span><div\x20class=\x22absolute\x20inset-0\x20z-20\x20pointer-events-none\x20opacity-50\x20grayscale\x22><div\x20class=\x22absolute\x20top-0\x20w-full\x20h-1/2\x20rounded-t-full\x20bg-gradient-to-b\x20from-white/90\x20to-white/50\x20border-b\x20border-black/10\x20animate-open-top\x20origin-bottom\x20shadow-xl\x22></div><div\x20class=\x22absolute\x20bottom-0\x20w-full\x20h-1/2\x20rounded-b-full\x20cap-gray\x20animate-open-bottom\x20origin-top\x20shadow-xl\x22></div></div>','Bodies','1062500CRymYh','World','physics-capsule','px,\x20','clientWidth','cap-blue','top','unshift','Ï¥àÍ∏∞ÌôîÎêòÏóàÏäµÎãàÎã§.','cap-red','<div\x20class=\x22capsule-top\x22></div><div\x20class=\x22capsule-bottom\x20','text-[6rem]','üéâ\x20Î™®Îì†\x20Ïù∏ÏõêÏùÑ\x20ÎΩëÏïòÏäµÎãàÎã§','lever-spin','btn-confirm','Render','result-modal','toggle','parse','3201664eoYEiB','6jVrHdE','textContent','default','abs','splice','clientHeight','transform','value','radius','translate(','rad)','element','Events','reverse','width','random','world','opacity','setPosition','cap-purple','total-input','Composite','321738qDCUcd','sqrt','run','forEach','animationDuration','flex\x20items-center\x20gap-2\x20flex-wrap\x20border-b\x20border-slate-700\x20pb-2\x20mb-1','Runner','2499265fCpzux','15659883wMTISf','setItem','gravity','btn-settings','hidden','mask','appendChild','\x20font-black\x20text-outline-lg\x20absolute\x20animate-jump-num\x20origin-bottom\x22\x20style=\x22font-family:\x20\x27Gowun\x20Dodum\x27,\x20sans-serif;\x20will-change:\x20transform,\x20z-index;\x22>','absolute\x20left-1/2\x20-translate-x-1/2\x20w-14\x20h-14\x20rounded-full\x20capsule-drop\x20z-50\x20flex\x20items-center\x20justify-center\x20shadow-lg\x20overflow-hidden\x20border-none\x20real-capsule-display','floor','px)\x20rotate(','left','setVelocity','push','add','innerHTML','lever','afterUpdate','contains','text-5xl','sort','disabled','length','Group\x20','batch-input','shift','shaking-group','w-40\x20h-40','history-list','785458BLjCnd','min','createElement','remove','remaining-count','getItem','stringify','gacha_drawn_v7','addEventListener','includes','height','snow-container','\x20animate-open-bottom\x20origin-top\x20shadow-xl\x22></div></div>','history-panel','className','</span><div\x20class=\x22absolute\x20inset-0\x20z-20\x20pointer-events-none\x22><div\x20class=\x22absolute\x20top-0\x20w-full\x20h-1/2\x20rounded-t-full\x20bg-gradient-to-b\x20from-white/90\x20to-white/50\x20border-b\x20border-black/10\x20animate-open-top\x20origin-bottom\x20shadow-xl\x22></div><div\x20class=\x22absolute\x20bottom-0\x20w-full\x20h-1/2\x20rounded-b-full\x20','create','\x22></div>','filter','group-shake','atan2','result-capsule-area','cap-','body','active','classList','capsule-container','getElementById','<span\x20class=\x22','center','gacha_batch_v7','rectangle','gacha_history_v8','gacha_total_v7','w-24\x20h-24','querySelector','angle','div','removeItem','style'];_0x582d=function(){return _0xfb9e90;};return _0x582d();}let engine,runner,capsules=[],fallingCapsules=[],drawnHistory=[],isBusy=![],syncInterval;const MAX_CAPACITY=0x1e;function init(){const _0x2261fa=_0x1330c5,_0x4a620d=localStorage['getItem'](_0x2261fa(0x144));let _0x55e491=JSON[_0x2261fa(0x100)](localStorage[_0x2261fa(0x142)](_0x2261fa(0x15d))||'[]');if(_0x4a620d){const _0x9b465=JSON['parse'](_0x4a620d);if(_0x9b465[_0x2261fa(0x136)]>0x0)_0x55e491[_0x2261fa(0xf5)](_0x9b465);localStorage[_0x2261fa(0x163)]('gacha_drawn_v7'),localStorage[_0x2261fa(0x121)](_0x2261fa(0x15d),JSON[_0x2261fa(0x143)](_0x55e491));}drawnHistory=_0x55e491;const _0x3a004a=localStorage[_0x2261fa(0x142)](_0x2261fa(0x15e)),_0xe01424=localStorage[_0x2261fa(0x142)](_0x2261fa(0x15b));_0x3a004a&&(document[_0x2261fa(0x158)](_0x2261fa(0x116))['value']=_0x3a004a);if(_0xe01424)document['getElementById'](_0x2261fa(0x138))[_0x2261fa(0x109)]=_0xe01424;updateRemainingDisplay(),initPhysics(),syncInterval=setInterval(checkAndSyncBalls,0x7d0);}function checkAndSyncBalls(){const _0x5a2922=_0x1330c5;if(isBusy)return;const _0x4b3c17=getAvailableNumbers(),_0x6dd85c=Math[_0x5a2922(0x13e)](_0x4b3c17[_0x5a2922(0x136)],MAX_CAPACITY),_0x24376d=capsules['length'];if(_0x24376d!==_0x6dd85c){isBusy=!![];const _0x22a939=_0x6dd85c-_0x24376d;_0x22a939>0x0?addCapsulesToWorld(_0x22a939,'center'):instantRemoveAndDrop(Math[_0x5a2922(0x105)](_0x22a939));}}function enableEditMode(){const _0x35d220=_0x1330c5;isBusy=!![],document['getElementById'](_0x35d220(0x116))['disabled']=![],document[_0x35d220(0x158)](_0x35d220(0x138))[_0x35d220(0x135)]=![],document[_0x35d220(0x158)]('total-input')[_0x35d220(0x156)][_0x35d220(0x12e)]('active'),document[_0x35d220(0x158)](_0x35d220(0x138))[_0x35d220(0x156)][_0x35d220(0x12e)](_0x35d220(0x155)),document[_0x35d220(0x158)](_0x35d220(0x123))[_0x35d220(0x156)]['add']('hidden'),document[_0x35d220(0x158)](_0x35d220(0xfc))['classList'][_0x35d220(0x140)](_0x35d220(0x124));}function confirmChanges(){const _0x227a7e=_0x1330c5;document[_0x227a7e(0x158)]('total-input')[_0x227a7e(0x135)]=!![],document[_0x227a7e(0x158)]('batch-input')[_0x227a7e(0x135)]=!![],document[_0x227a7e(0x158)]('total-input')[_0x227a7e(0x156)][_0x227a7e(0x140)](_0x227a7e(0x155)),document[_0x227a7e(0x158)](_0x227a7e(0x138))[_0x227a7e(0x156)][_0x227a7e(0x140)](_0x227a7e(0x155)),document[_0x227a7e(0x158)](_0x227a7e(0xfc))['classList'][_0x227a7e(0x12e)]('hidden'),document[_0x227a7e(0x158)](_0x227a7e(0x123))[_0x227a7e(0x156)][_0x227a7e(0x140)]('hidden'),updateTotalAndAdjustCapsules();}function createWallBetween(_0x1cac44,_0x32699d,_0x93c334,_0x49f0ca,_0x18ed4e,_0x3bb0fa){const _0x69e488=_0x1330c5,_0x21f861=Math[_0x69e488(0x119)]((_0x93c334-_0x1cac44)**0x2+(_0x49f0ca-_0x32699d)**0x2),_0x40c3eb=Math[_0x69e488(0x151)](_0x49f0ca-_0x32699d,_0x93c334-_0x1cac44),_0x330c78=(_0x1cac44+_0x93c334)/0x2,_0x189e64=(_0x32699d+_0x49f0ca)/0x2,_0x237338=Bodies[_0x69e488(0x15c)](_0x330c78,_0x189e64,_0x21f861,_0x18ed4e,{..._0x3bb0fa,'angle':_0x40c3eb});return _0x237338;}function initPhysics(){const _0x4c70c6=_0x1330c5,_0x1ca361=document[_0x4c70c6(0x158)](_0x4c70c6(0x157)),_0x43a814=_0x1ca361[_0x4c70c6(0x175)],_0x1c4714=_0x1ca361['clientHeight'];engine=Engine[_0x4c70c6(0x14d)]({'positionIterations':0x14,'velocityIterations':0x14}),engine[_0x4c70c6(0x112)][_0x4c70c6(0x122)]['y']=0x1;const _0x3560d1=0x32,_0x419937={'isStatic':!![],'render':{'visible':![]},'friction':0x0,'frictionStatic':0x0,'restitution':0.1},_0x4a24f3=_0x43a814,_0x182273=_0x1c4714,_0x397c3f=0x3,_0x22d73f={'x':_0x4a24f3*0.25+_0x397c3f,'y':_0x182273*0.5},_0x13ae98={'x':_0x4a24f3*0.32-_0x397c3f,'y':_0x182273*0.5+_0x397c3f*0x2},_0x19449d={'x':_0x4a24f3*0.15+_0x397c3f,'y':_0x182273*0.75},_0x2282c6={'x':_0x4a24f3*0.22-_0x397c3f,'y':_0x182273*0.75+_0x397c3f*0x2},_0x25201b={'x':_0x4a24f3*0.05+_0x397c3f,'y':_0x182273*0.8},_0x47f841={'x':_0x4a24f3*(0x1-0.25)-_0x397c3f,'y':_0x182273*0.5},_0x89cd76={'x':_0x4a24f3*(0x1-0.32)+_0x397c3f,'y':_0x182273*0.5+_0x397c3f*0x2},_0x1d31e6={'x':_0x4a24f3*(0x1-0.15)-_0x397c3f,'y':_0x182273*0.75},_0x35db61={'x':_0x4a24f3*(0x1-0.22)+_0x397c3f,'y':_0x182273*0.75+_0x397c3f*0x2},_0x306911={'x':_0x4a24f3*(0x1-0.05)-_0x397c3f,'y':_0x182273*0.8},_0x4bb3e0=0x17,_0x429893={'x':_0x4a24f3*0.5-_0x4bb3e0,'y':_0x182273+0x1e},_0x141419={'x':_0x4a24f3*0.5+_0x4bb3e0,'y':_0x182273+0x1e},_0x385a75=[createWallBetween(-0x14,-0x32,_0x22d73f['x'],_0x22d73f['y'],_0x3560d1,_0x419937),createWallBetween(_0x22d73f['x'],_0x22d73f['y'],_0x13ae98['x'],_0x13ae98['y'],_0x3560d1,_0x419937),createWallBetween(_0x13ae98['x'],_0x13ae98['y'],_0x19449d['x'],_0x19449d['y'],_0x3560d1,_0x419937),createWallBetween(_0x19449d['x'],_0x19449d['y'],_0x2282c6['x'],_0x2282c6['y'],_0x3560d1,_0x419937),createWallBetween(_0x2282c6['x'],_0x2282c6['y'],_0x25201b['x'],_0x25201b['y'],_0x3560d1,_0x419937),createWallBetween(_0x4a24f3+0x14,-0x32,_0x47f841['x'],_0x47f841['y'],_0x3560d1,_0x419937),createWallBetween(_0x47f841['x'],_0x47f841['y'],_0x89cd76['x'],_0x89cd76['y'],_0x3560d1,_0x419937),createWallBetween(_0x89cd76['x'],_0x89cd76['y'],_0x1d31e6['x'],_0x1d31e6['y'],_0x3560d1,_0x419937),createWallBetween(_0x1d31e6['x'],_0x1d31e6['y'],_0x35db61['x'],_0x35db61['y'],_0x3560d1,_0x419937),createWallBetween(_0x35db61['x'],_0x35db61['y'],_0x306911['x'],_0x306911['y'],_0x3560d1,_0x419937),createWallBetween(_0x25201b['x'],_0x25201b['y'],_0x429893['x'],_0x429893['y'],_0x3560d1,{..._0x419937,'friction':0.001}),createWallBetween(_0x306911['x'],_0x306911['y'],_0x141419['x'],_0x141419['y'],_0x3560d1,{..._0x419937,'friction':0.001}),Bodies['rectangle'](_0x4a24f3*0.5,_0x182273+0xa,0x64,0x28,{'isStatic':!![],'render':{'visible':![]}})];Composite['add'](engine[_0x4c70c6(0x112)],_0x385a75);const _0xb292ab=getAvailableNumbers();let _0x5dfaa6=MAX_CAPACITY;document['getElementById'](_0x4c70c6(0x116))[_0x4c70c6(0x109)]&&(_0x5dfaa6=Math[_0x4c70c6(0x13e)](_0xb292ab['length'],MAX_CAPACITY)),addCapsulesToWorld(_0x5dfaa6,_0x4c70c6(0x15a)),runner=Runner[_0x4c70c6(0x14d)](),Runner[_0x4c70c6(0x11a)](runner,engine),Events['on'](engine,_0x4c70c6(0x131),()=>{const _0x482ec7=_0x4c70c6;capsules[_0x482ec7(0x11b)](_0xba0d25=>{const _0x5967fb=_0x482ec7,_0x50dd54=_0xba0d25[_0x5967fb(0x154)],{x:_0x19c775,y:_0x2a667a}=_0x50dd54[_0x5967fb(0x167)];(_0x2a667a>_0x1c4714+0xc8||_0x19c775<-0xc8||_0x19c775>_0x43a814+0xc8)&&(Body[_0x5967fb(0x114)](_0x50dd54,{'x':_0x43a814/0x2,'y':0x0}),Body[_0x5967fb(0x12c)](_0x50dd54,{'x':0x0,'y':0x0}));const _0x5651e8=_0x50dd54['angle'],_0x10c04a=_0xba0d25[_0x5967fb(0x10a)]||0xe;_0xba0d25[_0x5967fb(0x10d)][_0x5967fb(0x164)][_0x5967fb(0x108)]=_0x5967fb(0x10b)+(_0x19c775-_0x10c04a)+_0x5967fb(0x174)+(_0x2a667a-_0x10c04a)+'px)\x20rotate('+_0x5651e8+_0x5967fb(0x10c);});for(let _0x5d9035=fallingCapsules[_0x482ec7(0x136)]-0x1;_0x5d9035>=0x0;_0x5d9035--){const _0x84cd60=fallingCapsules[_0x5d9035],_0x1f254e=_0x84cd60[_0x482ec7(0x154)],{x:_0x5de30d,y:_0xc0f0d9}=_0x1f254e['position'];if(_0xc0f0d9>_0x1c4714+0x64)World[_0x482ec7(0x140)](engine[_0x482ec7(0x112)],_0x1f254e),_0x84cd60[_0x482ec7(0x10d)][_0x482ec7(0x140)](),fallingCapsules[_0x482ec7(0x106)](_0x5d9035,0x1);else{const _0x495ad0=_0x1f254e[_0x482ec7(0x161)],_0x49f343=_0x84cd60[_0x482ec7(0x10a)]||0xe;_0x84cd60[_0x482ec7(0x10d)]['style'][_0x482ec7(0x108)]=_0x482ec7(0x10b)+(_0x5de30d-_0x49f343)+_0x482ec7(0x174)+(_0xc0f0d9-_0x49f343)+_0x482ec7(0x12a)+_0x495ad0+_0x482ec7(0x10c);}}});}function _0x4cb0(_0x27ef06,_0xcbd4a9){const _0x582d9d=_0x582d();return _0x4cb0=function(_0x4cb021,_0x28ac0f){_0x4cb021=_0x4cb021-0xf3;let _0xead758=_0x582d9d[_0x4cb021];return _0xead758;},_0x4cb0(_0x27ef06,_0xcbd4a9);}function updateTotalAndAdjustCapsules(){updateRemainingDisplay(),adjustCapsuleCount();}function adjustCapsuleCount(){const _0x41faf2=_0x1330c5;isBusy=!![];const _0x27689b=parseInt(document[_0x41faf2(0x158)]('total-input')[_0x41faf2(0x109)])||0x1e,_0xb15a07=getAvailableNumbers(),_0x38a8c7=Math[_0x41faf2(0x13e)](_0xb15a07[_0x41faf2(0x136)],MAX_CAPACITY);if(!document[_0x41faf2(0x158)](_0x41faf2(0x116))[_0x41faf2(0x109)]){isBusy=![];return;}const _0x482830=_0x27689b<=0xf?0x13:0xe;let _0x3e5d54=![];if(capsules[_0x41faf2(0x136)]>0x0){const _0x16d98b=capsules[0x0][_0x41faf2(0x10a)];_0x16d98b!==_0x482830&&(_0x3e5d54=!![]);}if(_0x3e5d54)addCapsulesToWorld(_0x38a8c7,'center');else{const _0x1ee3ee=capsules['length'],_0x576739=_0x38a8c7-_0x1ee3ee;if(_0x576739>0x0)addCapsulesToWorld(_0x576739,'top');else{if(_0x576739<0x0){const _0x5517e0=Math[_0x41faf2(0x105)](_0x576739);instantRemoveAndDrop(_0x5517e0);}else isBusy=![];}}}function instantRemoveAndDrop(_0x4b8c05){const _0x232e37=_0x1330c5;isBusy=!![];const _0x41bb0c=Math[_0x232e37(0x13e)](_0x4b8c05,capsules[_0x232e37(0x136)]),_0x53445b=document[_0x232e37(0x158)](_0x232e37(0x157))[_0x232e37(0x175)],_0x4f1d49=document[_0x232e37(0x158)](_0x232e37(0x157))[_0x232e37(0x107)];capsules['sort']((_0x2bc153,_0x4ac5c4)=>{const _0x544dc5=_0x232e37,_0x4b19d3=Math[_0x544dc5(0x105)](_0x2bc153['body'][_0x544dc5(0x167)]['x']-_0x53445b/0x2)+(_0x4f1d49-_0x2bc153[_0x544dc5(0x154)][_0x544dc5(0x167)]['y']),_0x3acde5=Math[_0x544dc5(0x105)](_0x4ac5c4[_0x544dc5(0x154)][_0x544dc5(0x167)]['x']-_0x53445b/0x2)+(_0x4f1d49-_0x4ac5c4[_0x544dc5(0x154)]['position']['y']);return _0x4b19d3-_0x3acde5;});const _0x194f1f=capsules['splice'](0x0,_0x41bb0c);if(_0x194f1f[_0x232e37(0x136)]===0x0){isBusy=![];return;}_0x194f1f[_0x232e37(0x11b)]((_0x23acaa,_0x504786)=>{const _0x4fa2bb=_0x232e37;fallingCapsules[_0x4fa2bb(0x12d)](_0x23acaa),setTimeout(()=>{const _0x4919ae=_0x4fa2bb;_0x23acaa[_0x4919ae(0x154)]['collisionFilter'][_0x4919ae(0x125)]=0x0,Body[_0x4919ae(0x12c)](_0x23acaa[_0x4919ae(0x154)],{'x':0x0,'y':0xf}),_0x504786===_0x194f1f[_0x4919ae(0x136)]-0x1&&setTimeout(()=>{isBusy=![];},0x1f4);},_0x504786*0x32);});}function addCapsulesToWorld(_0x5e441f,_0x4aa87a=_0x1330c5(0x104)){const _0x17bc19=_0x1330c5;isBusy=!![];const _0x2380b5=document[_0x17bc19(0x158)]('capsule-container'),_0x3c368d=_0x2380b5[_0x17bc19(0x175)],_0x818aa6=_0x2380b5[_0x17bc19(0x107)],_0x536742=parseInt(document['getElementById'](_0x17bc19(0x116))[_0x17bc19(0x109)])||0x1e;let _0x4c41c5=0xe;_0x536742<=0xf&&(_0x4c41c5=0x13);if(_0x4aa87a!==_0x17bc19(0xf4)&&capsules[_0x17bc19(0x136)]>0x0){if(_0x4aa87a==='center'||_0x4aa87a===_0x17bc19(0x104)){}}_0x4aa87a!==_0x17bc19(0xf4)&&(capsules[_0x17bc19(0x11b)](_0x38376d=>{const _0x36e854=_0x17bc19;_0x38376d[_0x36e854(0x10d)][_0x36e854(0x140)](),World['remove'](engine['world'],_0x38376d['body']);}),fallingCapsules['forEach'](_0x117e44=>{const _0x36a6e8=_0x17bc19;_0x117e44[_0x36a6e8(0x10d)][_0x36a6e8(0x140)](),World[_0x36a6e8(0x140)](engine[_0x36a6e8(0x112)],_0x117e44[_0x36a6e8(0x154)]);}),capsules=[],fallingCapsules=[]);const _0x338f7c=[_0x17bc19(0xf7),_0x17bc19(0x169),'cap-green','cap-blue',_0x17bc19(0x115)];let _0x225892=0x0;const _0x575ae9=setInterval(()=>{const _0x2bea7d=_0x17bc19;if(_0x225892>=_0x5e441f){clearInterval(_0x575ae9),setTimeout(()=>{isBusy=![];},0x1f4);return;}const _0xc20258=document[_0x2bea7d(0x13f)]('div');_0xc20258[_0x2bea7d(0x14b)]=_0x2bea7d(0x173),_0xc20258[_0x2bea7d(0x164)][_0x2bea7d(0x110)]=_0x4c41c5*0x2+'px',_0xc20258[_0x2bea7d(0x164)][_0x2bea7d(0x147)]=_0x4c41c5*0x2+'px';const _0x5b9b07=_0x338f7c[_0x225892%_0x338f7c[_0x2bea7d(0x136)]];_0xc20258[_0x2bea7d(0x12f)]=_0x2bea7d(0xf8)+_0x5b9b07+_0x2bea7d(0x14e),_0x2380b5['appendChild'](_0xc20258);let _0x1fe3d7,_0x42ec37;const _0x1f62ba=_0x818aa6*0.45;if(_0x4aa87a===_0x2bea7d(0xf4))_0x1fe3d7=_0x3c368d/0x2+(Math[_0x2bea7d(0x111)]()*0x3c-0x1e),_0x42ec37=-0x32;else _0x4aa87a===_0x2bea7d(0x15a)?(_0x1fe3d7=_0x3c368d/0x2+(Math[_0x2bea7d(0x111)]()*0x50-0x28),_0x42ec37=_0x1f62ba+(Math['random']()*0x28-0x14)):(_0x1fe3d7=_0x3c368d/0x2+(Math['random']()*0x50-0x28),_0x42ec37=_0x818aa6-0x64-Math[_0x2bea7d(0x111)]()*0xc8);const _0x52a08a=Bodies['circle'](_0x1fe3d7,_0x42ec37,_0x4c41c5,{'restitution':0.5,'friction':0.01,'frictionAir':0.01,'density':0.04,'collisionFilter':{'mask':0x1}});World['add'](engine['world'],_0x52a08a),capsules[_0x2bea7d(0x12d)]({'body':_0x52a08a,'element':_0xc20258,'radius':_0x4c41c5}),_0x225892++;},0x32);}function createSnow(){const _0x45d0d1=_0x1330c5,_0x31f716=document[_0x45d0d1(0x158)](_0x45d0d1(0x148));_0x31f716['innerHTML']='';const _0x2ec77b=0x32;for(let _0x353c0c=0x0;_0x353c0c<_0x2ec77b;_0x353c0c++){const _0x4128a3=document['createElement'](_0x45d0d1(0x162));_0x4128a3['className']=_0x45d0d1(0x16b);const _0x420304=Math[_0x45d0d1(0x111)]()*0x5+0x2+'px';_0x4128a3['style']['width']=_0x420304,_0x4128a3[_0x45d0d1(0x164)]['height']=_0x420304,_0x4128a3[_0x45d0d1(0x164)][_0x45d0d1(0x12b)]=Math[_0x45d0d1(0x111)]()*0x64+'%',_0x4128a3[_0x45d0d1(0x164)][_0x45d0d1(0xf4)]=Math['random']()*0x14+'%',_0x4128a3[_0x45d0d1(0x164)][_0x45d0d1(0x11c)]=Math[_0x45d0d1(0x111)]()*1.5+0x1+'s',_0x4128a3[_0x45d0d1(0x164)][_0x45d0d1(0x113)]=Math[_0x45d0d1(0x111)]()*0.7+0.3,_0x31f716[_0x45d0d1(0x126)](_0x4128a3);}setTimeout(()=>{const _0x1ce11e=_0x45d0d1;_0x31f716[_0x1ce11e(0x12f)]='';},0xbb8);}function dropCapsulesSequentially(_0x4a997b){return new Promise(async _0x4cc82c=>{const _0x4a3c7f=_0x4cb0,_0x4fcd24=document[_0x4a3c7f(0x158)]('capsule-container'),_0x3750d2=_0x4fcd24[_0x4a3c7f(0x175)],_0x539b03=_0x4fcd24['clientHeight'],_0x50f1e0=Math[_0x4a3c7f(0x13e)](_0x4a997b,capsules[_0x4a3c7f(0x136)]),_0x2862e4=[];for(let _0x5c0b86=0x0;_0x5c0b86<_0x50f1e0;_0x5c0b86++){capsules[_0x4a3c7f(0x134)]((_0x23b474,_0x3e7198)=>{const _0x402171=_0x4a3c7f,_0x4a072d=Math[_0x402171(0x105)](_0x23b474['body'][_0x402171(0x167)]['x']-_0x3750d2/0x2)+(_0x539b03-_0x23b474[_0x402171(0x154)]['position']['y']),_0x4f7875=Math[_0x402171(0x105)](_0x3e7198[_0x402171(0x154)][_0x402171(0x167)]['x']-_0x3750d2/0x2)+(_0x539b03-_0x3e7198['body'][_0x402171(0x167)]['y']);return _0x4a072d-_0x4f7875;});const _0x4b3639=capsules[0x0];if(!_0x4b3639)break;const _0x470439=_0x4b3639[_0x4a3c7f(0x10d)][_0x4a3c7f(0x160)](_0x4a3c7f(0x16e));let _0x1a374e='cap-red';_0x470439[_0x4a3c7f(0x156)][_0x4a3c7f(0x11b)](_0x3e74fc=>{const _0x1b7fdf=_0x4a3c7f;if(_0x3e74fc['startsWith'](_0x1b7fdf(0x153)))_0x1a374e=_0x3e74fc;}),_0x2862e4[_0x4a3c7f(0x12d)](_0x1a374e),capsules[_0x4a3c7f(0x139)](),fallingCapsules[_0x4a3c7f(0x12d)](_0x4b3639),_0x4b3639[_0x4a3c7f(0x154)]['collisionFilter'][_0x4a3c7f(0x125)]=0x0,Body['setVelocity'](_0x4b3639[_0x4a3c7f(0x154)],{'x':0x0,'y':0x8}),await new Promise(_0xde8f3c=>setTimeout(_0xde8f3c,0xc8));}_0x4cc82c(_0x2862e4);});}function getDrawnNumbersFlat(){return drawnHistory['flat']();}function getAvailableNumbers(){const _0x2fb347=_0x1330c5,_0x5e3c72=document['getElementById'](_0x2fb347(0x116))[_0x2fb347(0x109)];if(_0x5e3c72===''||parseInt(_0x5e3c72)<0x1)return[];const _0x109017=parseInt(_0x5e3c72),_0x121c9b=Array['from']({'length':_0x109017},(_0x92d765,_0x41e709)=>_0x41e709+0x1),_0x5caf39=getDrawnNumbersFlat();return _0x121c9b[_0x2fb347(0x14f)](_0x3347d6=>!_0x5caf39[_0x2fb347(0x146)](_0x3347d6));}function updateRemainingDisplay(){const _0x1dd2f0=_0x1330c5,_0x26da1a=document[_0x1dd2f0(0x158)](_0x1dd2f0(0x116))[_0x1dd2f0(0x109)],_0x38a993=document[_0x1dd2f0(0x158)](_0x1dd2f0(0x141));if(!_0x26da1a)_0x38a993[_0x1dd2f0(0x103)]='--';else{const _0x3d7a74=getAvailableNumbers();_0x38a993['textContent']=_0x3d7a74[_0x1dd2f0(0x136)],localStorage[_0x1dd2f0(0x121)](_0x1dd2f0(0x15e),_0x26da1a);}updateHistoryUI();}function shakeBottle(){const _0x9c90c8=_0x1330c5;if(isBusy)return;const _0x1d71c4=document[_0x9c90c8(0x158)](_0x9c90c8(0x13a));createSnow(),_0x1d71c4[_0x9c90c8(0x156)][_0x9c90c8(0x12e)](_0x9c90c8(0x150)),capsules['forEach'](_0x16b8de=>{const _0x7d4159=_0x9c90c8;Body[_0x7d4159(0x12c)](_0x16b8de[_0x7d4159(0x154)],{'x':(Math['random']()-0.5)*0x8,'y':(Math[_0x7d4159(0x111)]()-0.5)*0x8});}),setTimeout(()=>{const _0x231668=_0x9c90c8;_0x1d71c4['classList'][_0x231668(0x140)](_0x231668(0x150));},0x1f4);}async function startGacha(){const _0x25e4d0=_0x1330c5;let _0x4f2890=document[_0x25e4d0(0x158)](_0x25e4d0(0x130))[_0x25e4d0(0x156)][_0x25e4d0(0x132)](_0x25e4d0(0xfb));if(_0x4f2890||isBusy)return;const _0x37a0e1=document[_0x25e4d0(0x158)](_0x25e4d0(0x116));if(!_0x37a0e1[_0x25e4d0(0x109)]){alert('‚ùó\x20Ï†ÑÏ≤¥\x20Ïù∏Ïõê\x20ÏàòÎ•º\x20Î®ºÏ†Ä\x20ÏûÖÎ†•Ìï¥Ï£ºÏÑ∏Ïöî');return;}const _0xf40c77=getAvailableNumbers();if(_0xf40c77[_0x25e4d0(0x136)]===0x0){alert(_0x25e4d0(0xfa));return;}isBusy=!![];const _0x486db1=capsules[_0x25e4d0(0x136)],_0x2c59a1=_0xf40c77[_0x25e4d0(0x136)];if(_0x486db1<Math['min'](_0x2c59a1,MAX_CAPACITY)){const _0x51232d=Math[_0x25e4d0(0x13e)](_0x2c59a1,MAX_CAPACITY)-_0x486db1;addCapsulesToWorld(_0x51232d,_0x25e4d0(0xf4));}let _0x3471f1=parseInt(document[_0x25e4d0(0x158)](_0x25e4d0(0x138))[_0x25e4d0(0x109)])||0x1;if(_0x3471f1<0x1)_0x3471f1=0x1;localStorage[_0x25e4d0(0x121)](_0x25e4d0(0x15b),_0x3471f1);const _0x609631=document[_0x25e4d0(0x158)](_0x25e4d0(0x130)),_0x16089d=document[_0x25e4d0(0x158)](_0x25e4d0(0x13a));_0x609631[_0x25e4d0(0x156)][_0x25e4d0(0x12e)](_0x25e4d0(0xfb)),setTimeout(async()=>{const _0x144896=_0x25e4d0;_0x16089d[_0x144896(0x156)][_0x144896(0x12e)]('group-shake'),createSnow(),capsules['forEach'](_0x2e3ef7=>{const _0xcac3d9=_0x144896;Body['setVelocity'](_0x2e3ef7['body'],{'x':(Math[_0xcac3d9(0x111)]()-0.5)*0x5,'y':-0x3});}),await new Promise(_0x2c2055=>setTimeout(_0x2c2055,0x1f4));const _0x43f99c=await dropCapsulesSequentially(_0x3471f1);setTimeout(()=>{const _0x457d36=_0x144896;_0x609631['classList']['remove'](_0x457d36(0xfb)),_0x16089d[_0x457d36(0x156)]['remove']('group-shake'),isBusy=![],processBatchDraw(_0xf40c77,_0x3471f1,_0x43f99c);const _0x4b3879=getAvailableNumbers(),_0x1d5f4f=Math[_0x457d36(0x13e)](_0x4b3879['length'],MAX_CAPACITY),_0x3b87d0=capsules[_0x457d36(0x136)];if(_0x3b87d0<_0x1d5f4f){const _0x400556=_0x1d5f4f-_0x3b87d0;_0x400556>0x0&&addCapsulesToWorld(_0x400556,_0x457d36(0xf4));}},0x320);},0xc8);}function processBatchDraw(_0x3e55e1,_0x4c33fd,_0x55d88b){const _0x5888fd=_0x1330c5,_0x3adaa4=Math[_0x5888fd(0x13e)](_0x4c33fd,_0x3e55e1[_0x5888fd(0x136)]),_0x451af2=[];let _0x276fda=[..._0x3e55e1];for(let _0x38c43e=0x0;_0x38c43e<_0x3adaa4;_0x38c43e++){const _0x3d95bc=Math[_0x5888fd(0x129)](Math['random']()*_0x276fda[_0x5888fd(0x136)]);_0x451af2[_0x5888fd(0x12d)](_0x276fda[_0x3d95bc]),_0x276fda[_0x5888fd(0x106)](_0x3d95bc,0x1);}_0x451af2[_0x5888fd(0x136)]>0x0&&(drawnHistory['push'](_0x451af2),localStorage['setItem'](_0x5888fd(0x15d),JSON[_0x5888fd(0x143)](drawnHistory)));const _0x2320fa=_0x55d88b&&_0x55d88b['length']>0x0?_0x55d88b[0x0]:_0x5888fd(0xf7);visualDropSingle(_0x451af2,_0x4c33fd,_0x2320fa,_0x55d88b);}function visualDropSingle(_0x2bcaae,_0x584930,_0x4d25fc,_0x1d4611){const _0x358f64=_0x1330c5,_0x236bf1=document[_0x358f64(0x158)]('drop-zone'),_0x577be6=document[_0x358f64(0x13f)]('div');_0x577be6[_0x358f64(0x14b)]=_0x358f64(0x128),_0x577be6['innerHTML']=_0x358f64(0xf8)+_0x4d25fc+'\x22></div><div\x20class=\x22text-white\x20font-black\x20text-2xl\x20relative\x20z-50\x20drop-shadow-md\x20font-en\x22>?</div>',_0x236bf1[_0x358f64(0x126)](_0x577be6),setTimeout(()=>{const _0x30e0ec=_0x358f64;_0x577be6[_0x30e0ec(0x140)](),showBatchResult(_0x2bcaae,_0x584930,_0x1d4611),updateRemainingDisplay();},0x320);}function showBatchResult(_0x53f1e0,_0x3b7150,_0x2729b6){const _0x180ef9=_0x1330c5,_0x480535=document[_0x180ef9(0x158)](_0x180ef9(0xfe)),_0xad68e1=document['getElementById'](_0x180ef9(0x152));_0xad68e1[_0x180ef9(0x12f)]='';const _0x209d48=[_0x180ef9(0xf7),'cap-gold',_0x180ef9(0x16a),_0x180ef9(0xf3),_0x180ef9(0x115)];for(let _0x31aa90=0x0;_0x31aa90<_0x3b7150;_0x31aa90++){const _0x170fa3=document[_0x180ef9(0x13f)]('div'),_0x29a9b2=_0x3b7150===0x1?_0x180ef9(0x13b):_0x180ef9(0x15f),_0x525e5c=_0x3b7150===0x1?_0x180ef9(0xf9):_0x180ef9(0x133);_0x170fa3[_0x180ef9(0x14b)]=_0x180ef9(0x16d)+_0x29a9b2;if(_0x31aa90<_0x53f1e0['length']){const _0x125e30=_0x53f1e0[_0x31aa90];let _0x1074c5=_0x180ef9(0xf7);_0x2729b6&&_0x2729b6[_0x31aa90]?_0x1074c5=_0x2729b6[_0x31aa90]:_0x1074c5=_0x209d48[(_0x125e30+_0x31aa90)%_0x209d48[_0x180ef9(0x136)]],_0x170fa3[_0x180ef9(0x12f)]='<span\x20class=\x22'+_0x525e5c+_0x180ef9(0x127)+_0x125e30+_0x180ef9(0x14c)+_0x1074c5+_0x180ef9(0x149);}else _0x170fa3[_0x180ef9(0x12f)]=_0x180ef9(0x159)+_0x525e5c+_0x180ef9(0x16f);_0xad68e1[_0x180ef9(0x126)](_0x170fa3);}_0x480535[_0x180ef9(0x156)][_0x180ef9(0x140)](_0x180ef9(0x124));}function closeModal(){const _0x55c641=_0x1330c5;document['getElementById'](_0x55c641(0xfe))[_0x55c641(0x156)]['add'](_0x55c641(0x124));}function toggleHistory(){const _0x4f2c8c=_0x1330c5;document['getElementById'](_0x4f2c8c(0x14a))[_0x4f2c8c(0x156)][_0x4f2c8c(0xff)](_0x4f2c8c(0x124));}function updateHistoryUI(){const _0x792071=_0x1330c5,_0x19127c=document[_0x792071(0x158)](_0x792071(0x13c));_0x19127c[_0x792071(0x12f)]='',[...drawnHistory][_0x792071(0x10f)]()[_0x792071(0x11b)]((_0x5140c8,_0x4a6d53)=>{const _0x2e1255=_0x792071,_0x5f92fa=document[_0x2e1255(0x13f)](_0x2e1255(0x162));_0x5f92fa['className']=_0x2e1255(0x11d);const _0x49da46=document['createElement']('span');_0x49da46[_0x2e1255(0x14b)]='text-[10px]\x20text-slate-500\x20w-full\x20mb-1',_0x49da46['textContent']=_0x2e1255(0x137)+(drawnHistory[_0x2e1255(0x136)]-_0x4a6d53),_0x5f92fa[_0x2e1255(0x126)](_0x49da46),_0x5140c8[_0x2e1255(0x11b)](_0x18524e=>{const _0x5ddca0=_0x2e1255,_0x4007f0=document[_0x5ddca0(0x13f)](_0x5ddca0(0x162));_0x4007f0[_0x5ddca0(0x14b)]='w-8\x20h-8\x20flex\x20items-center\x20justify-center\x20bg-gray-700\x20text-white\x20rounded-full\x20font-bold\x20border\x20border-gray-600\x20text-xs',_0x4007f0[_0x5ddca0(0x103)]=_0x18524e,_0x5f92fa[_0x5ddca0(0x126)](_0x4007f0);}),_0x19127c[_0x2e1255(0x126)](_0x5f92fa);});}function resetData(){const _0xe3c103=_0x1330c5;if(!confirm(_0xe3c103(0x16c)))return;drawnHistory=[],localStorage[_0xe3c103(0x163)](_0xe3c103(0x144)),localStorage[_0xe3c103(0x163)](_0xe3c103(0x15d)),updateRemainingDisplay();const _0x2dd45f=document[_0xe3c103(0x158)](_0xe3c103(0x116))['value'],_0x350be3=getAvailableNumbers(),_0x5173df=_0x2dd45f&&!isNaN(parseInt(_0x2dd45f))?Math['min'](_0x350be3[_0xe3c103(0x136)],MAX_CAPACITY):0x1e;addCapsulesToWorld(_0x5173df,_0xe3c103(0x15a)),alert(_0xe3c103(0xf6));}window[_0x1330c5(0x145)]('load',init);
    </script>
</body>
</html>
