<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Merry Gacha</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/matter-js/0.19.0/matter.min.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Gowun+Dodum&family=Rochester&display=swap');

        body {
            font-family: 'Gowun Dodum', sans-serif;
            background-color: #0f172a; 
            background-image: 
                radial-gradient(white, rgba(255,255,255,.2) 2px, transparent 40px),
                radial-gradient(white, rgba(255,255,255,.15) 1px, transparent 30px),
                radial-gradient(white, rgba(255,255,255,.1) 2px, transparent 40px),
                radial-gradient(rgba(255,255,255,0.4), transparent 100%);
            background-size: 550px 550px, 350px 350px, 250px 250px, 100% 100%;
            background-position: 0 0, 40px 60px, 130px 270px, 0 0;
            overflow-x: hidden;
            overflow-y: auto;
            user-select: none; 
        }

        .font-en { font-family: 'Rochester', cursive; }

        .tree-clip {
            clip-path: polygon(
                48% 0%, 52% 0%, 
                35% 25%, 42% 25%, 
                25% 50%, 32% 50%, 
                15% 75%, 22% 75%, 
                5% 95%, 15% 100%, 
                85% 100%, 95% 95%,
                78% 75%, 85% 75%, 
                68% 50%, 75% 50%, 
                58% 25%, 65% 25% 
            );
        }

        .glass-border {
            background: rgba(255, 255, 255, 0.2);
            padding: 8px; 
            filter: drop-shadow(0 0 15px rgba(255,255,255,0.2));
            transition: transform 0.1s;
        }
        .glass-border:active { transform: scale(0.98); }

        .glass-body {
            width: 100%;
            height: 100%;
            background: linear-gradient(180deg, rgba(236, 252, 203, 0.1) 0%, rgba(217, 249, 157, 0.3) 60%, rgba(190, 242, 100, 0.5) 100%);
            backdrop-filter: blur(2px);
            box-shadow: inset 0 0 20px rgba(255, 255, 255, 0.6), inset 10px 0 20px rgba(255, 255, 255, 0.3);
            position: relative;
            overflow: hidden; 
        }

        .shine-highlight {
            position: absolute;
            top: 0; left: 0; right: 0; bottom: 0;
            background: radial-gradient(circle at 35% 25%, rgba(255,255,255,0.7) 0%, transparent 15%), linear-gradient(110deg, transparent 35%, rgba(255,255,255,0.2) 40%, transparent 45%);
            pointer-events: none;
            z-index: 25; 
        }

        .snow-drifts {
            position: absolute;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 30px; 
            background: linear-gradient(to bottom, rgba(255,255,255,0.98) 0%, rgba(235,235,235,1) 100%);
            border-radius: 50% / 100% 100% 0 0;
            box-shadow: inset 0 -2px 5px rgba(0,0,0,0.05);
            z-index: 18; 
            pointer-events: none;
        }

        .snow-drifts::before {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            width: 45%;
            height: 55px;
            background: inherit;
            border-radius: 0 100% 0 0; 
            transform-origin: bottom left;
            box-shadow: inset -2px -2px 10px rgba(0,0,0,0.5);
            z-index: 19;
        }

        .snow-drifts::after {
            content: '';
            position: absolute;
            bottom: 0;
            right: 0;
            width: 45%;
            height: 55px;
            background: inherit;
            border-radius: 100% 0 0 0; 
            transform-origin: bottom right;
            box-shadow: inset 2px -2px 10px rgba(0,0,0,0.5);
            z-index: 19;
        }

        @keyframes snowfall {
            0% { transform: translateY(-10px) translateX(0); opacity: 0; }
            20% { opacity: 1; }
            100% { transform: translateY(350px) translateX(20px); opacity: 0; } 
        }
        .snowflake {
            position: absolute;
            background: white;
            border-radius: 50%;
            pointer-events: none;
            z-index: 15;
            animation: snowfall linear forwards;
            box-shadow: 0 0 5px white;
        }

        @keyframes shake { 0%, 100% { transform: rotate(0deg); } 25% { transform: rotate(-1deg); } 75% { transform: rotate(1deg); } } 
        .group-shake { animation: shake 0.2s ease-in-out infinite; } 
        
        @keyframes spinLever { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
        .lever-spin { animation: spinLever 1s ease-in-out; }
        
        @keyframes drop { 0% { top: 75%; opacity: 0; transform: scale(0.5) rotate(0deg); } 100% { top: 95%; opacity: 1; transform: scale(1) rotate(720deg); } }
        .capsule-drop { animation: drop 0.8s cubic-bezier(0.3, 1.5, 0.5, 1) forwards; }
        
        @keyframes pop { 0% { transform: scale(0); } 80% { transform: scale(1.05); } 100% { transform: scale(1); } }
        .modal-pop { animation: pop 0.4s ease-out forwards; }

        @keyframes openTop { 
            0% { transform: translateY(0) rotate(0); }
            100% { transform: translateY(-50px) rotate(-20deg); opacity: 1; }
        }
        @keyframes openBottom { 
            0% { transform: translateY(0) rotate(0); }
            100% { transform: translateY(30px) rotate(10deg); opacity: 1; }
        }
        @keyframes jumpAndReveal {
            0% { transform: translateY(30px) scale(0.3); opacity: 1; z-index: 10; }
            40% { z-index: 10; }
            50% { transform: translateY(-40px) scale(1.4); opacity: 1; z-index: 30; }
            100% { transform: translateY(-10px) scale(1.1); opacity: 1; z-index: 30; }
        }
        .animate-open-top { animation: openTop 0.8s cubic-bezier(0.34, 1.56, 0.64, 1) 0.3s forwards; }
        .animate-open-bottom { animation: openBottom 0.8s cubic-bezier(0.34, 1.56, 0.64, 1) 0.3s forwards; }
        .animate-jump-num { animation: jumpAndReveal 0.8s cubic-bezier(0.175, 0.885, 0.32, 1.275) 0.4s forwards; will-change: transform, z-index; }

        .lever-base { width: 70px; height: 70px; background: radial-gradient(#a16207, #713f12); border-radius: 50%; border: 3px solid #451a03; box-shadow: inset 0 2px 5px rgba(255,255,255,0.2), 0 5px 10px rgba(0,0,0,0.4); display: flex; align-items: center; justify-content: center; cursor: pointer; transition: transform 0.1s; }
        .lever-base:active { transform: scale(0.95); }
        .lever-handle { width: 90px; height: 14px; background: #b45309; border-radius: 8px; position: absolute; box-shadow: 0 2px 4px rgba(0,0,0,0.5); border: 1px solid #78350f; }
        .lever-center { width: 16px; height: 16px; background: #fbbf24; border-radius: 50%; z-index: 10; box-shadow: inset 1px 1px 2px rgba(255,255,255,0.8); }

        .physics-capsule {
            position: absolute;
            width: 28px; 
            height: 28px;
            border-radius: 50%;
            overflow: hidden;
            box-shadow: inset 0 0 5px rgba(255,255,255,0.5), 0 2px 4px rgba(0,0,0,0.3);
            will-change: transform, top, left; 
            top: 0;
            left: 0;
            transform-origin: center center;
            z-index: 17; 
        }

        .capsule-top { position: absolute; top: 0; left: 0; width: 100%; height: 50%; border-radius: 36px 36px 0 0; background: linear-gradient(to bottom, rgba(255,255,255,0.9), rgba(255,255,255,0.5)); border-bottom: 1px solid rgba(0,0,0,0.05); z-index: 20; }
        .capsule-bottom { position: absolute; bottom: 0; left: 0; width: 100%; height: 50%; border-radius: 0 0 36px 36px; z-index: 20; }

        .cap-red { background: rgba(252, 165, 165, 1); }
        .cap-gold { background: rgba(253, 224, 71, 1); }
        .cap-green { background: rgba(134, 239, 172, 1); }
        .cap-blue { background: rgba(147, 197, 253, 1); }
        .cap-purple { background: rgba(216, 180, 254, 1); }
        .cap-gray { background: rgba(156, 163, 175, 1); }

        .real-capsule-display { width: 36px; height: 36px; border-radius: 50%; position: relative; overflow: hidden; box-shadow: inset 0 0 5px rgba(255,255,255,0.5), 0 2px 4px rgba(0,0,0,0.3); }

        .text-outline-lg { color: black; -webkit-text-stroke: 3px white; text-shadow: 4px 4px 0px rgba(255,255,255,0.5); paint-order: stroke fill; }
        
        .btn-secondary { background-color: rgba(255, 255, 255, 0.1); color: rgba(255, 255, 255, 0.8); backdrop-filter: blur(4px); border: 1px solid rgba(255, 255, 255, 0.2); transition: all 0.2s; font-size: 0.875rem; font-weight: 500; padding: 0.5rem 1.5rem; border-radius: 9999px; }
        .btn-secondary:hover { background-color: rgba(255, 255, 255, 0.2); color: white; }

        .custom-input { background: rgba(0,0,0,0.5); border: 1px solid rgba(255,255,255,0.1); color: #aaa; text-align: center; border-radius: 8px; padding: 4px; width: 70px; outline: none; transition: 0.2s; font-weight: bold; pointer-events: none; }
        .custom-input.active { background: rgba(0,0,0,0.3); border-color: #fbbf24; color: #fff; pointer-events: auto; }
        .custom-input::placeholder { color: rgba(255,255,255,0.3); font-weight: normal; font-size: 12px;}

        .btn-settings { background-color: rgba(30, 41, 59, 0.8); border: 1px solid rgba(255,255,255,0.2); color: #94a3b8; width: 32px; height: 32px; border-radius: 8px; display: flex; align-items: center; justify-content: center; transition: all 0.2s; cursor: pointer; }
        .btn-settings:hover { background-color: rgba(255,255,255,0.1); color: white; }
        .btn-confirm { background-color: #16a34a; border: 1px solid #22c55e; color: white; font-size: 0.75rem; font-weight: bold; padding: 4px 10px; border-radius: 8px; cursor: pointer; transition: all 0.2s; box-shadow: 0 2px 5px rgba(0,0,0,0.3); }
        .btn-confirm:hover { background-color: #15803d; }
    </style>
</head>
<body class="min-h-screen flex items-center justify-center p-4">

    <svg width="0" height="0" class="absolute">
        <linearGradient id="star-gradient" x1="0%" y1="0%" x2="100%" y2="100%">
            <stop offset="0%" style="stop-color:#fef08a;stop-opacity:1" />
            <stop offset="50%" style="stop-color:#eab308;stop-opacity:1" />
            <stop offset="100%" style="stop-color:#a16207;stop-opacity:1" />
        </linearGradient>
    </svg>

    <div class="w-full max-w-lg flex flex-col items-center relative">
        <div class="mb-2 text-center z-10 w-full">
            <h1 class="text-4xl text-white font-bold drop-shadow-md tracking-wider font-en">üéÑMerry Gacha</h1>
            
            <div class="bg-slate-900/60 backdrop-blur px-3 py-3 rounded-xl mt-3 inline-flex items-center gap-3 border border-slate-700 shadow-lg justify-center flex-wrap relative">
                
                <div class="absolute -right-10 top-1/2 -translate-y-1/2">
                    <button id="btn-settings" onclick="enableEditMode()" class="btn-settings" title="ÏÑ§Ï†ï Î≥ÄÍ≤Ω">‚öôÔ∏è</button>
                    <button id="btn-confirm" onclick="confirmChanges()" class="btn-confirm hidden">ÌôïÏù∏</button>
                </div>

                <div class="flex flex-col items-center">
                    <label for="total-input" class="text-[10px] text-slate-400 font-bold uppercase mb-1">Ï†ÑÏ≤¥</label>
                    <input type="number" id="total-input" class="custom-input" placeholder="ÏûÖÎ†•" min="1" disabled>
                </div>
                <div class="h-8 w-px bg-slate-600 mx-1"></div>
                <div class="flex flex-col items-center">
                    <label for="batch-input" class="text-[10px] text-yellow-500 font-bold uppercase mb-1">ÎΩëÏùÑ Ïù∏Ïõê</label>
                    <input type="number" id="batch-input" class="custom-input border-yellow-600/30" placeholder="1" min="1" value="1" disabled>
                </div>
                <div class="h-8 w-px bg-slate-600 mx-1"></div>
                <div class="flex flex-col items-center min-w-[60px]">
                    <label class="text-[10px] text-slate-400 font-bold uppercase mb-1">ÎÇ®ÏùÄ Ïù∏Ïõê</label>
                    <span id="remaining-count" class="text-green-400 font-bold text-xl">--</span>
                </div>
            </div>
        </div>

        <div id="machine-container" class="relative flex flex-col items-center mt-8">
            <div id="shaking-group" class="relative flex flex-col items-center z-10 origin-bottom">
                <div class="z-30 absolute -top-9 flex items-center justify-center pointer-events-none">
                    <div class="absolute w-20 h-20 bg-yellow-400/40 rounded-full blur-2xl animate-pulse z-0"></div>
                    <svg width="54" height="54" viewBox="0 0 24 24" class="metal-star z-10 relative drop-shadow-[0_0_5px_rgba(234,179,8,0.9)]">
                        <path fill="url(#star-gradient)" stroke="#b45309" stroke-width="0.5" d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z" />
                    </svg>
                </div>

                <div id="bottle-area" onclick="shakeBottle()" class="w-80 h-96 glass-border tree-clip relative filter drop-shadow-xl mt-1 cursor-pointer" title="Í±¥ÎìúÎ†§ÏÑú ÌùîÎì§Í∏∞">
                    <div class="glass-body tree-clip relative">
                        <div class="shine-highlight"></div>
                        <div class="snow-drifts"></div>
                        <div id="snow-container" class="absolute inset-0 z-10 pointer-events-none overflow-hidden"></div>
                        <div class="absolute top-[45%] left-1/2 -translate-x-1/2 text-center opacity-60 z-0 pointer-events-none">
                            <div class="text-green-900 font-bold text-3xl border-y border-green-800/30 py-1 font-en">Christmas</div>
                        </div>
                        <div id="capsule-container" class="w-full h-full relative z-10 overflow-hidden"></div>
                    </div>
                </div>
            </div>

            <div class="w-56 h-28 bg-[#78350f] rounded-xl border-t-4 border-[#451a03] relative flex flex-col items-center justify-end pb-6 shadow-2xl z-20 -mt-10">
                <div class="absolute inset-0 opacity-20 bg-[url('https://www.transparenttextures.com/patterns/wood-pattern.png')] pointer-events-none rounded-xl"></div>
                <div class="absolute top-4 w-32 h-8 bg-gradient-to-r from-yellow-700 via-yellow-500 to-yellow-700 rounded flex items-center justify-center shadow-md border border-yellow-800 z-30">
                    <span class="text-[#451a03] text-lg font-kr" style="text-shadow: 0 1px 0 rgba(255,255,255,0.4);">&#8631;</span>
                </div>
                <div id="drop-zone" class="absolute inset-0 overflow-visible pointer-events-none z-50"></div>
                <div class="relative z-30 group -mb-8">
                    <div id="lever" onclick="startGacha()" class="lever-base transition-transform group-hover:scale-105 active:scale-95">
                        <div class="lever-handle"></div>
                        <div class="lever-center"></div>
                    </div>
                </div>
            </div>
            <div class="w-60 h-4 bg-black/40 rounded-full blur-md mt-6"></div>
        </div>

        <div class="mt-12 flex gap-3 z-10">
            <button onclick="resetData()" class="btn-secondary">Ï¥àÍ∏∞Ìôî</button>
            <button onclick="toggleHistory()" class="btn-secondary">Í∏∞Î°ù</button>
        </div>

        <div id="history-panel" class="hidden absolute top-20 bg-slate-800/95 backdrop-blur rounded-xl p-4 shadow-2xl border border-slate-600 z-50 w-64 max-h-96 overflow-y-auto">
            <div class="flex justify-between items-center mb-4 border-b border-slate-600 pb-2">
                <h3 class="text-xl font-bold text-green-400 font-en">Collection</h3>
                <button onclick="toggleHistory()" class="text-gray-400 hover:text-white">‚úï</button>
            </div>
            <div id="history-list" class="flex flex-col gap-2"></div>
        </div>
    </div>

    <div id="result-modal" class="fixed inset-0 bg-black/90 hidden z-[100] flex items-center justify-center p-4 backdrop-blur-md">
        <div class="bg-gradient-to-br from-red-800 to-red-900 p-2 rounded-[2rem] modal-pop w-full max-w-4xl shadow-2xl border-4 border-[#b45309]">
            <div class="relative bg-[#fffbeb] rounded-[1.8rem] p-6 text-center overflow-hidden min-h-[400px] flex flex-col justify-center">
                <div class="absolute inset-0 opacity-10 bg-[radial-gradient(#b45309_1px,transparent_1px)] bg-[length:15px_15px]"></div>
                
                <div class="relative z-10 flex flex-col h-full">
                    <h2 class="text-5xl md:text-6xl font-bold text-red-800 mb-8 drop-shadow-sm font-en">Congratulations!</h2>
                    <div id="result-capsule-area" class="flex-1 flex flex-wrap items-center justify-center gap-8 mb-8"></div>
                    <button onclick="closeModal()" class="w-auto px-10 mx-auto bg-[#84b76d] hover:brightness-110 text-white py-3 rounded-2xl font-bold text-2xl shadow-lg transition border-b-8 border-[#658c52] active:border-b-0 active:translate-y-2">
                        ÌôïÏù∏
                    </button>
                </div>
            </div>
        </div>
    </div>

    <script>
function _0x4361(){const _0x2d2170=['opacity','div','capsule-container','gacha_drawn_v7','removeItem','forEach','className','btn-settings','toggle','remaining-count','Runner','w-40\x20h-40','startsWith','animationDuration','flex\x20items-center\x20gap-2\x20flex-wrap\x20border-b\x20border-slate-700\x20pb-2\x20mb-1','px)\x20rotate(','Body','translate(','<div\x20class=\x22capsule-top\x22></div><div\x20class=\x22capsule-bottom\x20','floor','addEventListener','relative\x20flex\x20items-center\x20justify-center\x20shrink-0\x20','load','body','getElementById','314856KNQlLL','setVelocity','cap-green','center','snow-container','4366708RvoaOO','group-shake','total-input','atan2','span','30dfErDQ','w-24\x20h-24','2498XljHWT','cap-purple','classList','Composite','active','text-5xl','left','run','top','686HyPTXA','angle','clientWidth','1405HNjSxw','includes','Ï¥àÍ∏∞ÌôîÎêòÏóàÏäµÎãàÎã§.','textContent','Events','cap-gold','parse','15015843eWrMUm','random','gacha_batch_v7','collisionFilter','width','text-[6rem]','text-[10px]\x20text-slate-500\x20w-full\x20mb-1','style','innerHTML','result-modal','w-8\x20h-8\x20flex\x20items-center\x20justify-center\x20bg-gray-700\x20text-white\x20rounded-full\x20font-bold\x20border\x20border-gray-600\x20text-xs','21954MnqIjd','btn-confirm','setItem','length','drop-zone','history-panel','sqrt','8480206tlwRQv','mask','Î™®Îì†\x20Í∏∞Î°ùÏùÑ\x20Ï¥àÍ∏∞ÌôîÌïòÏãúÍ≤†ÏäµÎãàÍπå?','appendChild','height','splice','rad)','afterUpdate','gacha_history_v8','cap-red','shaking-group','absolute\x20left-1/2\x20-translate-x-1/2\x20w-14\x20h-14\x20rounded-full\x20capsule-drop\x20z-50\x20flex\x20items-center\x20justify-center\x20shadow-lg\x20overflow-hidden\x20border-none\x20real-capsule-display','gacha_total_v7','5116581qNkXKM','from','filter','clientHeight','hidden','cap-','flat','World','world','setPosition','transform','Engine','rectangle','default','remove','create','unshift','getItem','lever','disabled','createElement','abs','element','push','batch-input','\x22></div>','<span\x20class=\x22','reverse','querySelector','physics-capsule','sort','position','add','value','px,\x20','shift','</span><div\x20class=\x22absolute\x20inset-0\x20z-20\x20pointer-events-none\x22><div\x20class=\x22absolute\x20top-0\x20w-full\x20h-1/2\x20rounded-t-full\x20bg-gradient-to-b\x20from-white/90\x20to-white/50\x20border-b\x20border-black/10\x20animate-open-top\x20origin-bottom\x20shadow-xl\x22></div><div\x20class=\x22absolute\x20bottom-0\x20w-full\x20h-1/2\x20rounded-b-full\x20','üéâ\x20Î™®Îì†\x20Ïù∏ÏõêÏùÑ\x20ÎΩëÏïòÏäµÎãàÎã§','cap-blue','lever-spin','snowflake','min'];_0x4361=function(){return _0x2d2170;};return _0x4361();}const _0x153450=_0x156e;(function(_0x1028f3,_0x13fff1){const _0x8ef9a6=_0x156e,_0xe87613=_0x1028f3();while(!![]){try{const _0x53dd03=parseInt(_0x8ef9a6(0x1df))/0x1*(parseInt(_0x8ef9a6(0x1d6))/0x2)+parseInt(_0x8ef9a6(0x208))/0x3+parseInt(_0x8ef9a6(0x1cf))/0x4+parseInt(_0x8ef9a6(0x1e2))/0x5*(parseInt(_0x8ef9a6(0x1f4))/0x6)+parseInt(_0x8ef9a6(0x1fb))/0x7+parseInt(_0x8ef9a6(0x1ca))/0x8+parseInt(_0x8ef9a6(0x1e9))/0x9*(-parseInt(_0x8ef9a6(0x1d4))/0xa);if(_0x53dd03===_0x13fff1)break;else _0xe87613['push'](_0xe87613['shift']());}catch(_0x35c687){_0xe87613['push'](_0xe87613['shift']());}}}(_0x4361,0xe27f3));const Engine=Matter[_0x153450(0x213)],Render=Matter['Render'],Runner=Matter[_0x153450(0x1bb)],Bodies=Matter['Bodies'],Composite=Matter[_0x153450(0x1d9)],Events=Matter[_0x153450(0x1e6)],World=Matter[_0x153450(0x20f)],Body=Matter[_0x153450(0x1c1)];let engine,runner,capsules=[],fallingCapsules=[],drawnHistory=[],isBusy=![],syncInterval;const MAX_CAPACITY=0x1e;function init(){const _0x13cc93=_0x153450,_0x5c748d=localStorage[_0x13cc93(0x219)](_0x13cc93(0x1b4));let _0xc6d0eb=JSON[_0x13cc93(0x1e8)](localStorage['getItem'](_0x13cc93(0x203))||'[]');if(_0x5c748d){const _0x581ff4=JSON[_0x13cc93(0x1e8)](_0x5c748d);if(_0x581ff4[_0x13cc93(0x1f7)]>0x0)_0xc6d0eb[_0x13cc93(0x218)](_0x581ff4);localStorage['removeItem'](_0x13cc93(0x1b4)),localStorage[_0x13cc93(0x1f6)](_0x13cc93(0x203),JSON['stringify'](_0xc6d0eb));}drawnHistory=_0xc6d0eb;const _0x5eafc0=localStorage['getItem'](_0x13cc93(0x207)),_0x13a5f4=localStorage['getItem'](_0x13cc93(0x1eb));_0x5eafc0&&(document[_0x13cc93(0x1c9)](_0x13cc93(0x1d1))[_0x13cc93(0x229)]=_0x5eafc0);if(_0x13a5f4)document['getElementById'](_0x13cc93(0x220))[_0x13cc93(0x229)]=_0x13a5f4;updateRemainingDisplay(),initPhysics(),syncInterval=setInterval(checkAndSyncBalls,0x7d0);}function _0x156e(_0x448e4c,_0x303a83){const _0x436169=_0x4361();return _0x156e=function(_0x156e40,_0x178a77){_0x156e40=_0x156e40-0x1af;let _0x50b707=_0x436169[_0x156e40];return _0x50b707;},_0x156e(_0x448e4c,_0x303a83);}function checkAndSyncBalls(){const _0x424de5=_0x153450;if(isBusy)return;const _0x4e4035=getAvailableNumbers(),_0xb7dcd6=Math[_0x424de5(0x1b0)](_0x4e4035[_0x424de5(0x1f7)],MAX_CAPACITY),_0xd38239=capsules[_0x424de5(0x1f7)];if(_0xd38239!==_0xb7dcd6){isBusy=!![];const _0x503d9d=_0xb7dcd6-_0xd38239;_0x503d9d>0x0?addCapsulesToWorld(_0x503d9d,_0x424de5(0x1cd)):instantRemoveAndDrop(Math[_0x424de5(0x21d)](_0x503d9d));}}function enableEditMode(){const _0x18c342=_0x153450;isBusy=!![],document[_0x18c342(0x1c9)](_0x18c342(0x1d1))[_0x18c342(0x21b)]=![],document['getElementById'](_0x18c342(0x220))['disabled']=![],document[_0x18c342(0x1c9)](_0x18c342(0x1d1))[_0x18c342(0x1d8)][_0x18c342(0x228)](_0x18c342(0x1da)),document[_0x18c342(0x1c9)]('batch-input')[_0x18c342(0x1d8)][_0x18c342(0x228)](_0x18c342(0x1da)),document[_0x18c342(0x1c9)]('btn-settings')[_0x18c342(0x1d8)]['add'](_0x18c342(0x20c)),document[_0x18c342(0x1c9)]('btn-confirm')[_0x18c342(0x1d8)][_0x18c342(0x216)](_0x18c342(0x20c));}function confirmChanges(){const _0x593908=_0x153450;document[_0x593908(0x1c9)](_0x593908(0x1d1))['disabled']=!![],document[_0x593908(0x1c9)]('batch-input')['disabled']=!![],document[_0x593908(0x1c9)](_0x593908(0x1d1))[_0x593908(0x1d8)][_0x593908(0x216)](_0x593908(0x1da)),document[_0x593908(0x1c9)]('batch-input')[_0x593908(0x1d8)][_0x593908(0x216)]('active'),document[_0x593908(0x1c9)](_0x593908(0x1f5))[_0x593908(0x1d8)]['add'](_0x593908(0x20c)),document[_0x593908(0x1c9)](_0x593908(0x1b8))[_0x593908(0x1d8)][_0x593908(0x216)](_0x593908(0x20c)),updateTotalAndAdjustCapsules();}function createWallBetween(_0x3f912f,_0x4856f0,_0x2f138a,_0xbc0e39,_0x20901a,_0x20a9bf){const _0x533c09=_0x153450,_0x4dfa83=Math[_0x533c09(0x1fa)]((_0x2f138a-_0x3f912f)**0x2+(_0xbc0e39-_0x4856f0)**0x2),_0x3870ef=Math[_0x533c09(0x1d2)](_0xbc0e39-_0x4856f0,_0x2f138a-_0x3f912f),_0x591aed=(_0x3f912f+_0x2f138a)/0x2,_0x3f148a=(_0x4856f0+_0xbc0e39)/0x2,_0x546e1b=Bodies[_0x533c09(0x214)](_0x591aed,_0x3f148a,_0x4dfa83,_0x20901a,{..._0x20a9bf,'angle':_0x3870ef});return _0x546e1b;}function initPhysics(){const _0x59b785=_0x153450,_0x15140c=document[_0x59b785(0x1c9)](_0x59b785(0x1b3)),_0xfd733=_0x15140c[_0x59b785(0x1e1)],_0x3cdf52=_0x15140c[_0x59b785(0x20b)];engine=Engine[_0x59b785(0x217)]({'positionIterations':0x14,'velocityIterations':0x14}),engine['world']['gravity']['y']=0x1;const _0x1738db=0x32,_0x238d9a={'isStatic':!![],'render':{'visible':![]},'friction':0x0,'frictionStatic':0x0,'restitution':0.1},_0x47eb7f=_0xfd733,_0x323956=_0x3cdf52,_0x568d8d=0x3,_0x26513b={'x':_0x47eb7f*0.25+_0x568d8d,'y':_0x323956*0.5},_0x55a1ab={'x':_0x47eb7f*0.32-_0x568d8d,'y':_0x323956*0.5+_0x568d8d*0x2},_0x11ea59={'x':_0x47eb7f*0.15+_0x568d8d,'y':_0x323956*0.75},_0x262de5={'x':_0x47eb7f*0.22-_0x568d8d,'y':_0x323956*0.75+_0x568d8d*0x2},_0x18927a={'x':_0x47eb7f*0.05+_0x568d8d,'y':_0x323956*0.8},_0x1d0d5a={'x':_0x47eb7f*(0x1-0.25)-_0x568d8d,'y':_0x323956*0.5},_0x47bfc5={'x':_0x47eb7f*(0x1-0.32)+_0x568d8d,'y':_0x323956*0.5+_0x568d8d*0x2},_0x540651={'x':_0x47eb7f*(0x1-0.15)-_0x568d8d,'y':_0x323956*0.75},_0xe15aea={'x':_0x47eb7f*(0x1-0.22)+_0x568d8d,'y':_0x323956*0.75+_0x568d8d*0x2},_0x3e38c1={'x':_0x47eb7f*(0x1-0.05)-_0x568d8d,'y':_0x323956*0.8},_0x12ac39=0x17,_0x10887f={'x':_0x47eb7f*0.5-_0x12ac39,'y':_0x323956+0x1e},_0x28a22c={'x':_0x47eb7f*0.5+_0x12ac39,'y':_0x323956+0x1e},_0x353a40=[createWallBetween(-0x14,-0x32,_0x26513b['x'],_0x26513b['y'],_0x1738db,_0x238d9a),createWallBetween(_0x26513b['x'],_0x26513b['y'],_0x55a1ab['x'],_0x55a1ab['y'],_0x1738db,_0x238d9a),createWallBetween(_0x55a1ab['x'],_0x55a1ab['y'],_0x11ea59['x'],_0x11ea59['y'],_0x1738db,_0x238d9a),createWallBetween(_0x11ea59['x'],_0x11ea59['y'],_0x262de5['x'],_0x262de5['y'],_0x1738db,_0x238d9a),createWallBetween(_0x262de5['x'],_0x262de5['y'],_0x18927a['x'],_0x18927a['y'],_0x1738db,_0x238d9a),createWallBetween(_0x47eb7f+0x14,-0x32,_0x1d0d5a['x'],_0x1d0d5a['y'],_0x1738db,_0x238d9a),createWallBetween(_0x1d0d5a['x'],_0x1d0d5a['y'],_0x47bfc5['x'],_0x47bfc5['y'],_0x1738db,_0x238d9a),createWallBetween(_0x47bfc5['x'],_0x47bfc5['y'],_0x540651['x'],_0x540651['y'],_0x1738db,_0x238d9a),createWallBetween(_0x540651['x'],_0x540651['y'],_0xe15aea['x'],_0xe15aea['y'],_0x1738db,_0x238d9a),createWallBetween(_0xe15aea['x'],_0xe15aea['y'],_0x3e38c1['x'],_0x3e38c1['y'],_0x1738db,_0x238d9a),createWallBetween(_0x18927a['x'],_0x18927a['y'],_0x10887f['x'],_0x10887f['y'],_0x1738db,{..._0x238d9a,'friction':0.001}),createWallBetween(_0x3e38c1['x'],_0x3e38c1['y'],_0x28a22c['x'],_0x28a22c['y'],_0x1738db,{..._0x238d9a,'friction':0.001}),Bodies[_0x59b785(0x214)](_0x47eb7f*0.5,_0x323956+0xa,0x64,0x28,{'isStatic':!![],'render':{'visible':![]}})];Composite[_0x59b785(0x228)](engine[_0x59b785(0x210)],_0x353a40);const _0x51999f=getAvailableNumbers();let _0x5857d7=MAX_CAPACITY;document['getElementById'](_0x59b785(0x1d1))[_0x59b785(0x229)]&&(_0x5857d7=Math[_0x59b785(0x1b0)](_0x51999f['length'],MAX_CAPACITY)),addCapsulesToWorld(_0x5857d7,_0x59b785(0x1cd)),runner=Runner['create'](),Runner[_0x59b785(0x1dd)](runner,engine),Events['on'](engine,_0x59b785(0x202),()=>{const _0x4dda45=_0x59b785;capsules[_0x4dda45(0x1b6)](_0x81f659=>{const _0xef247=_0x4dda45,_0x1a5f4d=_0x81f659['body'],{x:_0x2a15ea,y:_0x467f2b}=_0x1a5f4d[_0xef247(0x227)];(_0x467f2b>_0x3cdf52+0xc8||_0x2a15ea<-0xc8||_0x2a15ea>_0xfd733+0xc8)&&(Body[_0xef247(0x211)](_0x1a5f4d,{'x':_0xfd733/0x2,'y':0x0}),Body[_0xef247(0x1cb)](_0x1a5f4d,{'x':0x0,'y':0x0}));const _0x140d89=_0x1a5f4d['angle'];_0x81f659[_0xef247(0x21e)][_0xef247(0x1f0)][_0xef247(0x212)]=_0xef247(0x1c2)+(_0x2a15ea-0xe)+_0xef247(0x22a)+(_0x467f2b-0xe)+'px)\x20rotate('+_0x140d89+'rad)';});for(let _0x2b7370=fallingCapsules[_0x4dda45(0x1f7)]-0x1;_0x2b7370>=0x0;_0x2b7370--){const _0x41f53a=fallingCapsules[_0x2b7370],_0x3368a6=_0x41f53a[_0x4dda45(0x1c8)],{x:_0x5ebb95,y:_0x3b6b0f}=_0x3368a6['position'];if(_0x3b6b0f>_0x3cdf52+0x64)World['remove'](engine[_0x4dda45(0x210)],_0x3368a6),_0x41f53a[_0x4dda45(0x21e)][_0x4dda45(0x216)](),fallingCapsules[_0x4dda45(0x200)](_0x2b7370,0x1);else{const _0x38b86f=_0x3368a6[_0x4dda45(0x1e0)];_0x41f53a[_0x4dda45(0x21e)][_0x4dda45(0x1f0)][_0x4dda45(0x212)]=_0x4dda45(0x1c2)+(_0x5ebb95-0xe)+_0x4dda45(0x22a)+(_0x3b6b0f-0xe)+_0x4dda45(0x1c0)+_0x38b86f+_0x4dda45(0x201);}}});}function updateTotalAndAdjustCapsules(){updateRemainingDisplay(),adjustCapsuleCount();}function adjustCapsuleCount(){const _0x46b241=_0x153450;isBusy=!![];const _0x86ad4b=document[_0x46b241(0x1c9)](_0x46b241(0x1d1))[_0x46b241(0x229)],_0x49d212=getAvailableNumbers(),_0xa08386=Math[_0x46b241(0x1b0)](_0x49d212[_0x46b241(0x1f7)],MAX_CAPACITY);if(!_0x86ad4b){isBusy=![];return;}const _0x50bd5e=capsules[_0x46b241(0x1f7)],_0x21c8e3=_0xa08386-_0x50bd5e;if(_0x21c8e3>0x0)addCapsulesToWorld(_0x21c8e3,'top');else{if(_0x21c8e3<0x0){const _0x357b85=Math[_0x46b241(0x21d)](_0x21c8e3);instantRemoveAndDrop(_0x357b85);}else isBusy=![];}}function instantRemoveAndDrop(_0x43e12d){const _0xfe3cb7=_0x153450;isBusy=!![];const _0x599c58=Math[_0xfe3cb7(0x1b0)](_0x43e12d,capsules[_0xfe3cb7(0x1f7)]),_0x16dc49=document[_0xfe3cb7(0x1c9)](_0xfe3cb7(0x1b3))[_0xfe3cb7(0x1e1)],_0x34a133=document[_0xfe3cb7(0x1c9)](_0xfe3cb7(0x1b3))[_0xfe3cb7(0x20b)];capsules[_0xfe3cb7(0x226)]((_0x1dec05,_0x2f3593)=>{const _0x360b7e=_0xfe3cb7,_0x5f4375=Math[_0x360b7e(0x21d)](_0x1dec05[_0x360b7e(0x1c8)][_0x360b7e(0x227)]['x']-_0x16dc49/0x2)+(_0x34a133-_0x1dec05[_0x360b7e(0x1c8)][_0x360b7e(0x227)]['y']),_0x4a3b2c=Math[_0x360b7e(0x21d)](_0x2f3593[_0x360b7e(0x1c8)][_0x360b7e(0x227)]['x']-_0x16dc49/0x2)+(_0x34a133-_0x2f3593[_0x360b7e(0x1c8)][_0x360b7e(0x227)]['y']);return _0x5f4375-_0x4a3b2c;});const _0x41b6cf=capsules[_0xfe3cb7(0x200)](0x0,_0x599c58);if(_0x41b6cf[_0xfe3cb7(0x1f7)]===0x0){isBusy=![];return;}_0x41b6cf['forEach']((_0x412b48,_0x2f41be)=>{const _0x319000=_0xfe3cb7;fallingCapsules[_0x319000(0x21f)](_0x412b48),setTimeout(()=>{const _0x4da1f8=_0x319000;_0x412b48[_0x4da1f8(0x1c8)][_0x4da1f8(0x1ec)][_0x4da1f8(0x1fc)]=0x0,Body['setVelocity'](_0x412b48[_0x4da1f8(0x1c8)],{'x':0x0,'y':0xf}),_0x2f41be===_0x41b6cf['length']-0x1&&setTimeout(()=>{isBusy=![];},0x1f4);},_0x2f41be*0x32);});}function addCapsulesToWorld(_0x1e6f8a,_0x5d53af=_0x153450(0x215)){const _0x42305b=_0x153450;isBusy=!![];const _0x53fbd4=document[_0x42305b(0x1c9)](_0x42305b(0x1b3)),_0x4d16ad=_0x53fbd4['clientWidth'],_0x5dc2e8=_0x53fbd4['clientHeight'];if(_0x5d53af!==_0x42305b(0x1de)&&capsules[_0x42305b(0x1f7)]>0x0){if(_0x5d53af===_0x42305b(0x1cd)||_0x5d53af===_0x42305b(0x215)){}}_0x5d53af!=='top'&&(capsules[_0x42305b(0x1b6)](_0x3954a6=>{const _0x3069a0=_0x42305b;_0x3954a6['element']['remove'](),World[_0x3069a0(0x216)](engine[_0x3069a0(0x210)],_0x3954a6[_0x3069a0(0x1c8)]);}),fallingCapsules[_0x42305b(0x1b6)](_0x18428e=>{const _0x4387bb=_0x42305b;_0x18428e[_0x4387bb(0x21e)][_0x4387bb(0x216)](),World['remove'](engine[_0x4387bb(0x210)],_0x18428e['body']);}),capsules=[],fallingCapsules=[]);const _0x880b5e=[_0x42305b(0x204),_0x42305b(0x1e7),_0x42305b(0x1cc),_0x42305b(0x22e),_0x42305b(0x1d7)];let _0x1a9da2=0x0;const _0x509e23=setInterval(()=>{const _0x3e216d=_0x42305b;if(_0x1a9da2>=_0x1e6f8a){clearInterval(_0x509e23),setTimeout(()=>{isBusy=![];},0x1f4);return;}const _0x1bd3e6=document[_0x3e216d(0x21c)](_0x3e216d(0x1b2));_0x1bd3e6['className']=_0x3e216d(0x225);const _0x3830bf=_0x880b5e[_0x1a9da2%_0x880b5e[_0x3e216d(0x1f7)]];_0x1bd3e6[_0x3e216d(0x1f1)]=_0x3e216d(0x1c3)+_0x3830bf+_0x3e216d(0x221),_0x53fbd4[_0x3e216d(0x1fe)](_0x1bd3e6);const _0x9c8ea1=0xe;let _0x2e2c55,_0x108f22;const _0x279e2e=_0x5dc2e8*0.45;if(_0x5d53af==='top')_0x2e2c55=_0x4d16ad/0x2+(Math[_0x3e216d(0x1ea)]()*0x3c-0x1e),_0x108f22=-0x32;else _0x5d53af===_0x3e216d(0x1cd)?(_0x2e2c55=_0x4d16ad/0x2+(Math[_0x3e216d(0x1ea)]()*0x50-0x28),_0x108f22=_0x279e2e+(Math[_0x3e216d(0x1ea)]()*0x28-0x14)):(_0x2e2c55=_0x4d16ad/0x2+(Math['random']()*0x50-0x28),_0x108f22=_0x5dc2e8-0x64-Math[_0x3e216d(0x1ea)]()*0xc8);const _0x214024=Bodies['circle'](_0x2e2c55,_0x108f22,_0x9c8ea1,{'restitution':0.5,'friction':0.01,'frictionAir':0.01,'density':0.04,'collisionFilter':{'mask':0x1}});World[_0x3e216d(0x228)](engine['world'],_0x214024),capsules['push']({'body':_0x214024,'element':_0x1bd3e6}),_0x1a9da2++;},0x32);}function createSnow(){const _0x572d7b=_0x153450,_0x2a9dad=document[_0x572d7b(0x1c9)](_0x572d7b(0x1ce));_0x2a9dad[_0x572d7b(0x1f1)]='';const _0x405141=0x32;for(let _0x860821=0x0;_0x860821<_0x405141;_0x860821++){const _0xf6322d=document[_0x572d7b(0x21c)](_0x572d7b(0x1b2));_0xf6322d['className']=_0x572d7b(0x1af);const _0x1d5209=Math[_0x572d7b(0x1ea)]()*0x5+0x2+'px';_0xf6322d['style'][_0x572d7b(0x1ed)]=_0x1d5209,_0xf6322d['style'][_0x572d7b(0x1ff)]=_0x1d5209,_0xf6322d[_0x572d7b(0x1f0)][_0x572d7b(0x1dc)]=Math[_0x572d7b(0x1ea)]()*0x64+'%',_0xf6322d[_0x572d7b(0x1f0)][_0x572d7b(0x1de)]=Math['random']()*0x14+'%',_0xf6322d[_0x572d7b(0x1f0)][_0x572d7b(0x1be)]=Math[_0x572d7b(0x1ea)]()*1.5+0x1+'s',_0xf6322d[_0x572d7b(0x1f0)][_0x572d7b(0x1b1)]=Math[_0x572d7b(0x1ea)]()*0.7+0.3,_0x2a9dad['appendChild'](_0xf6322d);}setTimeout(()=>{_0x2a9dad['innerHTML']='';},0xbb8);}function dropCapsulesSequentially(_0xded1cc){return new Promise(async _0x4bc14c=>{const _0x4e8bba=_0x156e,_0x53506e=document['getElementById'](_0x4e8bba(0x1b3)),_0x2bd5ba=_0x53506e['clientWidth'],_0x307f64=_0x53506e[_0x4e8bba(0x20b)],_0x57dd29=Math[_0x4e8bba(0x1b0)](_0xded1cc,capsules[_0x4e8bba(0x1f7)]),_0x7a739f=[];for(let _0x47d709=0x0;_0x47d709<_0x57dd29;_0x47d709++){capsules[_0x4e8bba(0x226)]((_0x10db96,_0x440507)=>{const _0x19aed5=_0x4e8bba,_0x51559a=Math[_0x19aed5(0x21d)](_0x10db96[_0x19aed5(0x1c8)][_0x19aed5(0x227)]['x']-_0x2bd5ba/0x2)+(_0x307f64-_0x10db96['body'][_0x19aed5(0x227)]['y']),_0x1f84e5=Math[_0x19aed5(0x21d)](_0x440507[_0x19aed5(0x1c8)][_0x19aed5(0x227)]['x']-_0x2bd5ba/0x2)+(_0x307f64-_0x440507[_0x19aed5(0x1c8)]['position']['y']);return _0x51559a-_0x1f84e5;});const _0x18a580=capsules[0x0];if(!_0x18a580)break;const _0x135b76=_0x18a580[_0x4e8bba(0x21e)][_0x4e8bba(0x224)]('.capsule-bottom');let _0x4f659c=_0x4e8bba(0x204);_0x135b76[_0x4e8bba(0x1d8)]['forEach'](_0x57da17=>{const _0x19dff4=_0x4e8bba;if(_0x57da17[_0x19dff4(0x1bd)](_0x19dff4(0x20d)))_0x4f659c=_0x57da17;}),_0x7a739f['push'](_0x4f659c),capsules[_0x4e8bba(0x22b)](),fallingCapsules[_0x4e8bba(0x21f)](_0x18a580),_0x18a580[_0x4e8bba(0x1c8)][_0x4e8bba(0x1ec)][_0x4e8bba(0x1fc)]=0x0,Body[_0x4e8bba(0x1cb)](_0x18a580[_0x4e8bba(0x1c8)],{'x':0x0,'y':0x8}),await new Promise(_0x2e8680=>setTimeout(_0x2e8680,0xc8));}_0x4bc14c(_0x7a739f);});}function getDrawnNumbersFlat(){const _0x4bdf55=_0x153450;return drawnHistory[_0x4bdf55(0x20e)]();}function getAvailableNumbers(){const _0x2008ca=_0x153450,_0x256967=document[_0x2008ca(0x1c9)](_0x2008ca(0x1d1))[_0x2008ca(0x229)];if(_0x256967===''||parseInt(_0x256967)<0x1)return[];const _0x27bafd=parseInt(_0x256967),_0x499819=Array[_0x2008ca(0x209)]({'length':_0x27bafd},(_0x2c51cb,_0x34dea2)=>_0x34dea2+0x1),_0x1e5de2=getDrawnNumbersFlat();return _0x499819[_0x2008ca(0x20a)](_0x11aacd=>!_0x1e5de2[_0x2008ca(0x1e3)](_0x11aacd));}function updateRemainingDisplay(){const _0x584990=_0x153450,_0x474e77=document['getElementById'](_0x584990(0x1d1))[_0x584990(0x229)],_0x230611=document[_0x584990(0x1c9)](_0x584990(0x1ba));if(!_0x474e77)_0x230611[_0x584990(0x1e5)]='--';else{const _0x30ba56=getAvailableNumbers();_0x230611['textContent']=_0x30ba56[_0x584990(0x1f7)],localStorage['setItem']('gacha_total_v7',_0x474e77);}updateHistoryUI();}function shakeBottle(){const _0x5b706f=_0x153450;if(isBusy)return;const _0x1e214b=document['getElementById'](_0x5b706f(0x205));createSnow(),_0x1e214b['classList'][_0x5b706f(0x228)](_0x5b706f(0x1d0)),capsules['forEach'](_0xc4b9c9=>{const _0x4e18b8=_0x5b706f;Body[_0x4e18b8(0x1cb)](_0xc4b9c9['body'],{'x':(Math[_0x4e18b8(0x1ea)]()-0.5)*0x8,'y':(Math[_0x4e18b8(0x1ea)]()-0.5)*0x8});}),setTimeout(()=>{const _0x561e90=_0x5b706f;_0x1e214b[_0x561e90(0x1d8)]['remove'](_0x561e90(0x1d0));},0x1f4);}async function startGacha(){const _0x57bd87=_0x153450;let _0x4e7b46=document['getElementById'](_0x57bd87(0x21a))['classList']['contains'](_0x57bd87(0x22f));if(_0x4e7b46||isBusy)return;const _0x3cba65=document[_0x57bd87(0x1c9)]('total-input');if(!_0x3cba65[_0x57bd87(0x229)]){alert('‚ùó\x20Ï†ÑÏ≤¥\x20Ïù∏Ïõê\x20ÏàòÎ•º\x20Î®ºÏ†Ä\x20ÏûÖÎ†•Ìï¥Ï£ºÏÑ∏Ïöî');return;}const _0xa829ed=getAvailableNumbers();if(_0xa829ed[_0x57bd87(0x1f7)]===0x0){alert(_0x57bd87(0x22d));return;}isBusy=!![];const _0x5055a5=capsules['length'],_0x1bbbbc=_0xa829ed[_0x57bd87(0x1f7)];if(_0x5055a5<Math['min'](_0x1bbbbc,MAX_CAPACITY)){const _0x1ce7a4=Math[_0x57bd87(0x1b0)](_0x1bbbbc,MAX_CAPACITY)-_0x5055a5;addCapsulesToWorld(_0x1ce7a4,_0x57bd87(0x1de));}let _0xf19cba=parseInt(document[_0x57bd87(0x1c9)](_0x57bd87(0x220))['value'])||0x1;if(_0xf19cba<0x1)_0xf19cba=0x1;localStorage[_0x57bd87(0x1f6)](_0x57bd87(0x1eb),_0xf19cba);const _0x44aefd=document[_0x57bd87(0x1c9)](_0x57bd87(0x21a)),_0x2463e3=document[_0x57bd87(0x1c9)](_0x57bd87(0x205));_0x44aefd['classList']['add'](_0x57bd87(0x22f)),setTimeout(async()=>{const _0x46a838=_0x57bd87;_0x2463e3[_0x46a838(0x1d8)][_0x46a838(0x228)](_0x46a838(0x1d0)),createSnow(),capsules[_0x46a838(0x1b6)](_0x460c24=>{const _0x1a0c18=_0x46a838;Body[_0x1a0c18(0x1cb)](_0x460c24[_0x1a0c18(0x1c8)],{'x':(Math[_0x1a0c18(0x1ea)]()-0.5)*0x5,'y':-0x3});}),await new Promise(_0xfd7cfc=>setTimeout(_0xfd7cfc,0x1f4));const _0x4a262d=await dropCapsulesSequentially(_0xf19cba);setTimeout(()=>{const _0x14db3e=_0x46a838;_0x44aefd[_0x14db3e(0x1d8)][_0x14db3e(0x216)](_0x14db3e(0x22f)),_0x2463e3[_0x14db3e(0x1d8)][_0x14db3e(0x216)]('group-shake'),isBusy=![],processBatchDraw(_0xa829ed,_0xf19cba,_0x4a262d);const _0xe9925=getAvailableNumbers(),_0x331140=Math[_0x14db3e(0x1b0)](_0xe9925[_0x14db3e(0x1f7)],MAX_CAPACITY),_0x34f5a1=capsules[_0x14db3e(0x1f7)];if(_0x34f5a1<_0x331140){const _0x365af1=_0x331140-_0x34f5a1;_0x365af1>0x0&&addCapsulesToWorld(_0x365af1,'top');}},0x320);},0xc8);}function processBatchDraw(_0x541fe5,_0x233d8a,_0x3a0881){const _0x1b3797=_0x153450,_0xb9d60a=Math[_0x1b3797(0x1b0)](_0x233d8a,_0x541fe5[_0x1b3797(0x1f7)]),_0x3bbee4=[];let _0x1e53c8=[..._0x541fe5];for(let _0x49382f=0x0;_0x49382f<_0xb9d60a;_0x49382f++){const _0x1ec29e=Math[_0x1b3797(0x1c4)](Math['random']()*_0x1e53c8['length']);_0x3bbee4[_0x1b3797(0x21f)](_0x1e53c8[_0x1ec29e]),_0x1e53c8[_0x1b3797(0x200)](_0x1ec29e,0x1);}_0x3bbee4[_0x1b3797(0x1f7)]>0x0&&(drawnHistory['push'](_0x3bbee4),localStorage[_0x1b3797(0x1f6)](_0x1b3797(0x203),JSON['stringify'](drawnHistory)));const _0x31d768=_0x3a0881&&_0x3a0881[_0x1b3797(0x1f7)]>0x0?_0x3a0881[0x0]:_0x1b3797(0x204);visualDropSingle(_0x3bbee4,_0x233d8a,_0x31d768,_0x3a0881);}function visualDropSingle(_0x2311fb,_0xe29196,_0x3c1971,_0x4acd04){const _0x50cfc1=_0x153450,_0x6625e5=document[_0x50cfc1(0x1c9)](_0x50cfc1(0x1f8)),_0x39948b=document[_0x50cfc1(0x21c)](_0x50cfc1(0x1b2));_0x39948b[_0x50cfc1(0x1b7)]=_0x50cfc1(0x206),_0x39948b[_0x50cfc1(0x1f1)]=_0x50cfc1(0x1c3)+_0x3c1971+'\x22></div><div\x20class=\x22text-white\x20font-black\x20text-2xl\x20relative\x20z-50\x20drop-shadow-md\x20font-en\x22>?</div>',_0x6625e5[_0x50cfc1(0x1fe)](_0x39948b),setTimeout(()=>{_0x39948b['remove'](),showBatchResult(_0x2311fb,_0xe29196,_0x4acd04),updateRemainingDisplay();},0x320);}function showBatchResult(_0x153a22,_0x1ed670,_0x406533){const _0x117d1f=_0x153450,_0x2f3c79=document[_0x117d1f(0x1c9)](_0x117d1f(0x1f2)),_0x2e48ed=document[_0x117d1f(0x1c9)]('result-capsule-area');_0x2e48ed[_0x117d1f(0x1f1)]='';const _0x3d8b2d=[_0x117d1f(0x204),_0x117d1f(0x1e7),'cap-green','cap-blue',_0x117d1f(0x1d7)];for(let _0x8405b4=0x0;_0x8405b4<_0x1ed670;_0x8405b4++){const _0xee9192=document['createElement'](_0x117d1f(0x1b2)),_0x4f831e=_0x1ed670===0x1?_0x117d1f(0x1bc):_0x117d1f(0x1d5),_0x4e60f4=_0x1ed670===0x1?_0x117d1f(0x1ee):_0x117d1f(0x1db);_0xee9192[_0x117d1f(0x1b7)]=_0x117d1f(0x1c6)+_0x4f831e;if(_0x8405b4<_0x153a22[_0x117d1f(0x1f7)]){const _0x1b6d52=_0x153a22[_0x8405b4];let _0x695788=_0x117d1f(0x204);_0x406533&&_0x406533[_0x8405b4]?_0x695788=_0x406533[_0x8405b4]:_0x695788=_0x3d8b2d[(_0x1b6d52+_0x8405b4)%_0x3d8b2d[_0x117d1f(0x1f7)]],_0xee9192[_0x117d1f(0x1f1)]=_0x117d1f(0x222)+_0x4e60f4+'\x20font-black\x20text-outline-lg\x20absolute\x20animate-jump-num\x20origin-bottom\x22\x20style=\x22font-family:\x20\x27Gowun\x20Dodum\x27,\x20sans-serif;\x20will-change:\x20transform,\x20z-index;\x22>'+_0x1b6d52+_0x117d1f(0x22c)+_0x695788+'\x20animate-open-bottom\x20origin-top\x20shadow-xl\x22></div></div>';}else _0xee9192[_0x117d1f(0x1f1)]='<span\x20class=\x22'+_0x4e60f4+'\x20font-black\x20text-gray-400\x20absolute\x20animate-jump-num\x20origin-bottom\x22\x20style=\x22will-change:\x20transform,\x20z-index;\x22>‚ùÑÔ∏è</span><div\x20class=\x22absolute\x20inset-0\x20z-20\x20pointer-events-none\x20opacity-50\x20grayscale\x22><div\x20class=\x22absolute\x20top-0\x20w-full\x20h-1/2\x20rounded-t-full\x20bg-gradient-to-b\x20from-white/90\x20to-white/50\x20border-b\x20border-black/10\x20animate-open-top\x20origin-bottom\x20shadow-xl\x22></div><div\x20class=\x22absolute\x20bottom-0\x20w-full\x20h-1/2\x20rounded-b-full\x20cap-gray\x20animate-open-bottom\x20origin-top\x20shadow-xl\x22></div></div>';_0x2e48ed[_0x117d1f(0x1fe)](_0xee9192);}_0x2f3c79[_0x117d1f(0x1d8)][_0x117d1f(0x216)](_0x117d1f(0x20c));}function closeModal(){const _0x3e475f=_0x153450;document[_0x3e475f(0x1c9)](_0x3e475f(0x1f2))[_0x3e475f(0x1d8)]['add'](_0x3e475f(0x20c));}function toggleHistory(){const _0x4baff4=_0x153450;document['getElementById'](_0x4baff4(0x1f9))[_0x4baff4(0x1d8)][_0x4baff4(0x1b9)]('hidden');}function updateHistoryUI(){const _0x405266=_0x153450,_0x509d56=document['getElementById']('history-list');_0x509d56['innerHTML']='',[...drawnHistory][_0x405266(0x223)]()[_0x405266(0x1b6)]((_0x2f4820,_0x540c97)=>{const _0x1568ae=_0x405266,_0x2bd245=document[_0x1568ae(0x21c)]('div');_0x2bd245[_0x1568ae(0x1b7)]=_0x1568ae(0x1bf);const _0x25bd81=document['createElement'](_0x1568ae(0x1d3));_0x25bd81[_0x1568ae(0x1b7)]=_0x1568ae(0x1ef),_0x25bd81[_0x1568ae(0x1e5)]='Group\x20'+(drawnHistory['length']-_0x540c97),_0x2bd245[_0x1568ae(0x1fe)](_0x25bd81),_0x2f4820[_0x1568ae(0x1b6)](_0x28b029=>{const _0x27dd1c=_0x1568ae,_0x53179d=document['createElement'](_0x27dd1c(0x1b2));_0x53179d['className']=_0x27dd1c(0x1f3),_0x53179d[_0x27dd1c(0x1e5)]=_0x28b029,_0x2bd245[_0x27dd1c(0x1fe)](_0x53179d);}),_0x509d56['appendChild'](_0x2bd245);});}function resetData(){const _0x1261bf=_0x153450;if(!confirm(_0x1261bf(0x1fd)))return;drawnHistory=[],localStorage[_0x1261bf(0x1b5)](_0x1261bf(0x1b4)),localStorage[_0x1261bf(0x1b5)](_0x1261bf(0x203)),updateRemainingDisplay();const _0x13dab1=document[_0x1261bf(0x1c9)](_0x1261bf(0x1d1))[_0x1261bf(0x229)],_0xc12634=getAvailableNumbers(),_0x2144df=_0x13dab1&&!isNaN(parseInt(_0x13dab1))?Math[_0x1261bf(0x1b0)](_0xc12634[_0x1261bf(0x1f7)],MAX_CAPACITY):0x1e;addCapsulesToWorld(_0x2144df,_0x1261bf(0x1cd)),alert(_0x1261bf(0x1e4));}window[_0x153450(0x1c5)](_0x153450(0x1c7),init);
    </script>
</body>
</html>
