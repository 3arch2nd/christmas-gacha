<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Merry Gacha</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/matter-js/0.19.0/matter.min.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Gowun+Dodum&family=Rochester&display=swap');

        body {
            font-family: 'Gowun Dodum', sans-serif;
            background-color: #1e293b; 
            background-image: 
                radial-gradient(white, rgba(255,255,255,.2) 2px, transparent 40px),
                radial-gradient(white, rgba(255,255,255,.15) 1px, transparent 30px),
                radial-gradient(white, rgba(255,255,255,.1) 2px, transparent 40px),
                radial-gradient(rgba(255,255,255,0.4), transparent 100%);
            background-size: 550px 550px, 350px 350px, 250px 250px, 100% 100%;
            background-position: 0 0, 40px 60px, 130px 270px, 0 0;
            overflow-x: hidden;
            overflow-y: auto;
        }

        .font-en { font-family: 'Rochester', cursive; }

        .bottle-clip {
             clip-path: polygon(
                45% 0%, 55% 0%, 
                55% 10%, 70% 25%, 60% 25%, 85% 55%, 75% 55%, 95% 90%, 85% 100%, 15% 100%, 5% 90%, 25% 55%, 15% 55%, 40% 25%, 30% 25%, 45% 10%
            );
        }
        .glass-border {
            background: rgba(255, 255, 255, 0.2);
            padding: 8px;
            filter: drop-shadow(0 0 10px rgba(255,255,255,0.1));
        }
        .glass-body {
            width: 100%;
            height: 100%;
            background: linear-gradient(180deg, rgba(236, 252, 203, 0.1) 0%, rgba(217, 249, 157, 0.3) 60%, rgba(190, 242, 100, 0.5) 100%);
            backdrop-filter: blur(2px);
            box-shadow: inset 0 0 20px rgba(255, 255, 255, 0.6), inset 10px 0 20px rgba(255, 255, 255, 0.3);
            position: relative;
            overflow: hidden;
        }
        .shine-highlight {
            position: absolute;
            top: 0; left: 0; right: 0; bottom: 0;
            background: radial-gradient(circle at 35% 25%, rgba(255,255,255,0.7) 0%, transparent 15%), linear-gradient(110deg, transparent 35%, rgba(255,255,255,0.2) 40%, transparent 45%);
            pointer-events: none;
            z-index: 20;
        }

        .bottle-lid {
            position: absolute;
            top: 0px;
            left: 50%;
            transform: translateX(-50%);
            width: 36px; 
            height: 25px;
            background: linear-gradient(90deg, #b45309, #facc15, #fef08a, #facc15, #b45309);
            border-radius: 4px 4px 0 0;
            z-index: 25;
            box-shadow: 0 2px 4px rgba(0,0,0,0.3);
            border: 1px solid #78350f;
        }
        
        .gold-foil-neck {
            position: absolute;
            top: 25px; 
            left: 50%;
            transform: translateX(-50%);
            width: 34px;  
            height: 30px; 
            background: repeating-linear-gradient(
                90deg,
                #d97706,
                #d97706 2px,
                #f59e0b 2px,
                #f59e0b 4px
            );
            border-radius: 0 0 2px 2px;
            z-index: 24;
            opacity: 0.95;
            box-shadow: inset 0 2px 3px rgba(0,0,0,0.2);
        }

        @keyframes shake { 0%, 100% { transform: rotate(0deg); } 25% { transform: rotate(-2deg); } 75% { transform: rotate(2deg); } }
        .group-shake { animation: shake 0.2s ease-in-out infinite; } 
        
        @keyframes spinLever { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
        .lever-spin { animation: spinLever 1s ease-in-out; }
        
        @keyframes drop { 0% { top: 75%; opacity: 0; transform: scale(0.5) rotate(0deg); } 100% { top: 95%; opacity: 1; transform: scale(1) rotate(720deg); } }
        .capsule-drop { animation: drop 0.8s cubic-bezier(0.3, 1.5, 0.5, 1) forwards; }
        
        @keyframes pop { 0% { transform: scale(0); } 80% { transform: scale(1.05); } 100% { transform: scale(1); } }
        .modal-pop { animation: pop 0.4s ease-out forwards; }

        @keyframes openTop { 
            0% { transform: translateY(0) rotate(0); }
            100% { transform: translateY(-50px) rotate(-20deg); opacity: 1; }
        }
        @keyframes openBottom { 
            0% { transform: translateY(0) rotate(0); }
            100% { transform: translateY(30px) rotate(10deg); opacity: 1; }
        }
        @keyframes jumpAndReveal {
            0% { transform: translateY(30px) scale(0.3); opacity: 1; z-index: 10; }
            40% { z-index: 10; }
            50% { transform: translateY(-40px) scale(1.4); opacity: 1; z-index: 30; }
            100% { transform: translateY(-10px) scale(1.1); opacity: 1; z-index: 30; }
        }
        .animate-open-top { animation: openTop 0.8s cubic-bezier(0.34, 1.56, 0.64, 1) 0.3s forwards; }
        .animate-open-bottom { animation: openBottom 0.8s cubic-bezier(0.34, 1.56, 0.64, 1) 0.3s forwards; }
        .animate-jump-num { animation: jumpAndReveal 0.8s cubic-bezier(0.175, 0.885, 0.32, 1.275) 0.4s forwards; will-change: transform, z-index; }

        .lever-base { width: 70px; height: 70px; background: radial-gradient(#a16207, #713f12); border-radius: 50%; border: 3px solid #451a03; box-shadow: inset 0 2px 5px rgba(255,255,255,0.2), 0 5px 10px rgba(0,0,0,0.4); display: flex; align-items: center; justify-content: center; cursor: pointer; transition: transform 0.1s; }
        .lever-base:active { transform: scale(0.95); }
        .lever-handle { width: 90px; height: 14px; background: #b45309; border-radius: 8px; position: absolute; box-shadow: 0 2px 4px rgba(0,0,0,0.5); border: 1px solid #78350f; }
        .lever-center { width: 16px; height: 16px; background: #fbbf24; border-radius: 50%; z-index: 10; box-shadow: inset 1px 1px 2px rgba(255,255,255,0.8); }

        .physics-capsule {
            position: absolute;
            width: 36px;
            height: 36px;
            border-radius: 50%;
            overflow: hidden;
            box-shadow: inset 0 0 5px rgba(255,255,255,0.5), 0 2px 4px rgba(0,0,0,0.3);
            will-change: transform, top, left; 
            top: 0;
            left: 0;
            transform-origin: center center;
        }

        .capsule-top { position: absolute; top: 0; left: 0; width: 100%; height: 50%; border-radius: 36px 36px 0 0; background: linear-gradient(to bottom, rgba(255,255,255,0.9), rgba(255,255,255,0.5)); border-bottom: 1px solid rgba(0,0,0,0.05); z-index: 20; }
        .capsule-bottom { position: absolute; bottom: 0; left: 0; width: 100%; height: 50%; border-radius: 0 0 36px 36px; z-index: 20; }

        .cap-red { background: rgba(252, 165, 165, 1); }
        .cap-gold { background: rgba(253, 224, 71, 1); }
        .cap-green { background: rgba(134, 239, 172, 1); }
        .cap-blue { background: rgba(147, 197, 253, 1); }
        .cap-purple { background: rgba(216, 180, 254, 1); }
        .cap-gray { background: rgba(156, 163, 175, 1); } /* Îπà Ï∫°ÏäêÏö© */

        .real-capsule-display { width: 36px; height: 36px; border-radius: 50%; position: relative; overflow: hidden; box-shadow: inset 0 0 5px rgba(255,255,255,0.5), 0 2px 4px rgba(0,0,0,0.3); }

        .text-outline-lg { color: black; -webkit-text-stroke: 3px white; text-shadow: 4px 4px 0px rgba(255,255,255,0.5); paint-order: stroke fill; }
        
        .btn-secondary { background-color: rgba(255, 255, 255, 0.1); color: rgba(255, 255, 255, 0.8); backdrop-filter: blur(4px); border: 1px solid rgba(255, 255, 255, 0.2); transition: all 0.2s; font-size: 0.875rem; font-weight: 500; padding: 0.5rem 1.5rem; border-radius: 9999px; }
        .btn-secondary:hover { background-color: rgba(255, 255, 255, 0.2); color: white; }

        .custom-input { background: rgba(0,0,0,0.3); border: 1px solid rgba(255,255,255,0.3); color: #fff; text-align: center; border-radius: 8px; padding: 4px; width: 70px; outline: none; transition: 0.2s; font-weight: bold; }
        .custom-input:focus { background: rgba(0,0,0,0.5); border-color: #fbbf24; }
        .custom-input::placeholder { color: rgba(255,255,255,0.5); font-weight: normal; font-size: 12px;}
    </style>
</head>
<body class="min-h-screen flex items-center justify-center p-4">

    <svg width="0" height="0" class="absolute">
        <linearGradient id="star-gradient" x1="0%" y1="0%" x2="100%" y2="100%">
            <stop offset="0%" style="stop-color:#fef08a;stop-opacity:1" />
            <stop offset="50%" style="stop-color:#eab308;stop-opacity:1" />
            <stop offset="100%" style="stop-color:#a16207;stop-opacity:1" />
        </linearGradient>
    </svg>

    <div class="w-full max-w-lg flex flex-col items-center relative">
        <div class="mb-2 text-center z-10 w-full">
            <h1 class="text-4xl text-white font-bold drop-shadow-md tracking-wider font-en">üéÑMerry Gacha</h1>
            
            <div class="bg-slate-900/60 backdrop-blur px-4 py-3 rounded-xl mt-3 inline-flex items-center gap-4 border border-slate-700 shadow-lg justify-center flex-wrap">
                <div class="flex flex-col items-center">
                    <label for="total-input" class="text-[10px] text-slate-400 font-bold uppercase mb-1">Ï†ÑÏ≤¥</label>
                    <input type="number" id="total-input" class="custom-input text-lg" placeholder="ÏûÖÎ†•" min="1" onchange="updateRemainingDisplay()">
                </div>
                <div class="h-8 w-px bg-slate-600 mx-1"></div>
                <div class="flex flex-col items-center">
                    <label for="batch-input" class="text-[10px] text-yellow-500 font-bold uppercase mb-1">ÎΩëÏùÑ Ïù∏Ïõê</label>
                    <input type="number" id="batch-input" class="custom-input text-lg border-yellow-600/50" placeholder="1" min="1" value="1">
                </div>
                <div class="h-8 w-px bg-slate-600 mx-1"></div>
                <div class="flex flex-col items-center min-w-[60px]">
                    <label class="text-[10px] text-slate-400 font-bold uppercase mb-1">ÎÇ®ÏùÄ Ïù∏Ïõê</label>
                    <span id="remaining-count" class="text-green-400 font-bold text-xl">--</span>
                </div>
            </div>
        </div>

        <div id="machine-container" class="relative flex flex-col items-center mt-12">
            
            <div id="shaking-group" class="relative flex flex-col items-center z-10 origin-bottom">
                
                <div class="z-30 absolute -top-5 drop-shadow-lg">
                    <svg width="40" height="40" viewBox="0 0 24 24" class="metal-star">
                        <path fill="url(#star-gradient)" stroke="#b45309" stroke-width="0.5" d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z" />
                    </svg>
                </div>

                <div class="bottle-lid"></div>
                <div class="gold-foil-neck"></div>

                <div id="bottle-area" class="w-72 h-96 glass-border bottle-clip relative filter drop-shadow-xl mt-1">
                    <div class="glass-body bottle-clip relative">
                        <div class="shine-highlight"></div>
                        <div class="absolute top-[35%] left-1/2 -translate-x-1/2 text-center opacity-60 z-0 pointer-events-none">
                            <div class="text-green-900 font-bold text-2xl border-y border-green-800/30 py-1 font-en">Holiday</div>
                        </div>
                        <div id="capsule-container" class="w-full h-full relative z-10 overflow-hidden"></div>
                    </div>
                </div>
            </div>

            <div class="w-48 h-32 bg-[#78350f] rounded-xl border-t-4 border-[#451a03] relative flex flex-col items-center justify-end pb-6 shadow-2xl z-20 -mt-10">
                <div class="absolute inset-0 opacity-20 bg-[url('https://www.transparenttextures.com/patterns/wood-pattern.png')] pointer-events-none rounded-xl"></div>
                <div class="absolute top-4 w-32 h-8 bg-gradient-to-r from-yellow-700 via-yellow-500 to-yellow-700 rounded flex items-center justify-center shadow-md border border-yellow-800 z-30">
                    <span class="text-[#451a03] text-lg font-kr" style="text-shadow: 0 1px 0 rgba(255,255,255,0.4);">&#8631;</span>
                </div>
                <div id="drop-zone" class="absolute inset-0 overflow-visible pointer-events-none z-50"></div>
                <div class="relative z-30 group -mb-8">
                    <div id="lever" onclick="startGacha()" class="lever-base transition-transform group-hover:scale-105 active:scale-95">
                        <div class="lever-handle"></div>
                        <div class="lever-center"></div>
                    </div>
                </div>
            </div>
            <div class="w-60 h-4 bg-black/40 rounded-full blur-md mt-6"></div>
        </div>

        <div class="mt-12 flex gap-3 z-10">
            <button onclick="resetData()" class="btn-secondary">Ï¥àÍ∏∞Ìôî</button>
            <button onclick="toggleHistory()" class="btn-secondary">Í∏∞Î°ù</button>
        </div>

        <div id="history-panel" class="hidden absolute top-20 bg-slate-800/95 backdrop-blur rounded-xl p-4 shadow-2xl border border-slate-600 z-50 w-64 max-h-96 overflow-y-auto">
            <div class="flex justify-between items-center mb-4 border-b border-slate-600 pb-2">
                <h3 class="text-xl font-bold text-green-400 font-en">Collection</h3>
                <button onclick="toggleHistory()" class="text-gray-400 hover:text-white">‚úï</button>
            </div>
            <div id="history-list" class="flex flex-col gap-2"></div>
        </div>
    </div>

    <div id="result-modal" class="fixed inset-0 bg-black/90 hidden z-[100] flex items-center justify-center p-4 backdrop-blur-md">
        <div class="bg-gradient-to-br from-red-800 to-red-900 p-2 rounded-[2rem] modal-pop w-full max-w-4xl shadow-2xl border-4 border-[#b45309]">
            <div class="relative bg-[#fffbeb] rounded-[1.8rem] p-6 text-center overflow-hidden min-h-[400px] flex flex-col justify-center">
                <div class="absolute inset-0 opacity-10 bg-[radial-gradient(#b45309_1px,transparent_1px)] bg-[length:15px_15px]"></div>
                
                <div class="relative z-10 flex flex-col h-full">
                    <h2 class="text-5xl md:text-6xl font-bold text-red-800 mb-8 drop-shadow-sm font-en">Congratulations!</h2>
                    <div id="result-capsule-area" class="flex-1 flex flex-wrap items-center justify-center gap-8 mb-8"></div>
                    <button onclick="closeModal()" class="w-auto px-10 mx-auto bg-[#84b76d] hover:brightness-110 text-white py-3 rounded-2xl font-bold text-2xl shadow-lg transition border-b-8 border-[#658c52] active:border-b-0 active:translate-y-2">
                        ÌôïÏù∏
                    </button>
                </div>
            </div>
        </div>
    </div>

    <script>
const _0x2e66ee=_0x2c11;(function(_0x1fbca2,_0x6f2374){const _0x1bdea6=_0x2c11,_0x3a1f6d=_0x1fbca2();while(!![]){try{const _0x2eba03=-parseInt(_0x1bdea6(0x207))/0x1*(-parseInt(_0x1bdea6(0x1b9))/0x2)+-parseInt(_0x1bdea6(0x1bc))/0x3*(-parseInt(_0x1bdea6(0x1ee))/0x4)+parseInt(_0x1bdea6(0x1b0))/0x5+-parseInt(_0x1bdea6(0x1f3))/0x6+-parseInt(_0x1bdea6(0x211))/0x7+parseInt(_0x1bdea6(0x1eb))/0x8*(parseInt(_0x1bdea6(0x1fe))/0x9)+parseInt(_0x1bdea6(0x20b))/0xa*(-parseInt(_0x1bdea6(0x1b2))/0xb);if(_0x2eba03===_0x6f2374)break;else _0x3a1f6d['push'](_0x3a1f6d['shift']());}catch(_0x47182a){_0x3a1f6d['push'](_0x3a1f6d['shift']());}}}(_0xfb41,0x975a6));const Engine=Matter[_0x2e66ee(0x1d6)],Render=Matter[_0x2e66ee(0x1fc)],Runner=Matter[_0x2e66ee(0x1f0)],Bodies=Matter[_0x2e66ee(0x1ba)],Composite=Matter[_0x2e66ee(0x1c5)],Events=Matter[_0x2e66ee(0x1e3)],World=Matter[_0x2e66ee(0x1ec)],Body=Matter[_0x2e66ee(0x1ca)];let engine,runner,capsules=[],drawnHistory=[],isSpinning=![];function init(){const _0x47ae41=_0x2e66ee,_0x3c421a=localStorage['getItem'](_0x47ae41(0x205));let _0x10b532=JSON[_0x47ae41(0x214)](localStorage['getItem'](_0x47ae41(0x1f2))||'[]');if(_0x3c421a){const _0x23458d=JSON[_0x47ae41(0x214)](_0x3c421a);if(_0x23458d[_0x47ae41(0x1f7)]>0x0)_0x10b532['unshift'](_0x23458d);localStorage[_0x47ae41(0x1e9)](_0x47ae41(0x205)),localStorage[_0x47ae41(0x1c1)](_0x47ae41(0x1f2),JSON['stringify'](_0x10b532));}drawnHistory=_0x10b532;const _0x48966b=localStorage['getItem']('gacha_total_v7'),_0x459dd6=localStorage[_0x47ae41(0x1d2)](_0x47ae41(0x209));_0x48966b&&(document[_0x47ae41(0x1c3)](_0x47ae41(0x1ef))[_0x47ae41(0x1f5)]=_0x48966b);if(_0x459dd6)document[_0x47ae41(0x1c3)]('batch-input')[_0x47ae41(0x1f5)]=_0x459dd6;updateRemainingDisplay(),initPhysics();}function initPhysics(){const _0x594913=_0x2e66ee,_0x3c157e=document[_0x594913(0x1c3)](_0x594913(0x1aa)),_0x6f72ef=_0x3c157e[_0x594913(0x1b6)],_0x3aa2cf=_0x3c157e[_0x594913(0x212)];engine=Engine[_0x594913(0x1d8)]({'positionIterations':0xa,'velocityIterations':0xa}),engine[_0x594913(0x1d0)]['gravity']['y']=1.5;const _0x14913b=0xc8,_0x33ca5c={'isStatic':!![],'render':{'visible':![]},'friction':0.1},_0x31be27=Bodies[_0x594913(0x1b5)](_0x6f72ef/0x2,_0x3aa2cf+_0x14913b/0x2,_0x6f72ef+0xc8,_0x14913b,_0x33ca5c),_0x1c4c91=Bodies[_0x594913(0x1b5)](0x0-_0x14913b/0x2,_0x3aa2cf/0x2,_0x14913b,_0x3aa2cf*0x3,_0x33ca5c),_0x54cd05=Bodies[_0x594913(0x1b5)](_0x6f72ef+_0x14913b/0x2,_0x3aa2cf/0x2,_0x14913b,_0x3aa2cf*0x3,_0x33ca5c),_0x4ee184=Bodies[_0x594913(0x1b5)](_0x6f72ef/0x2,-0x64,_0x6f72ef*0x2,_0x14913b,_0x33ca5c),_0x31260c=Bodies[_0x594913(0x1b5)](_0x6f72ef*0.2-0x14,_0x3aa2cf-0x28,0x96,0x28,{..._0x33ca5c,'angle':Math['PI']/0x4}),_0x4812de=Bodies[_0x594913(0x1b5)](_0x6f72ef*0.8+0x14,_0x3aa2cf-0x28,0x96,0x28,{..._0x33ca5c,'angle':-Math['PI']/0x4});Composite['add'](engine[_0x594913(0x1d0)],[_0x31be27,_0x1c4c91,_0x54cd05,_0x4ee184,_0x31260c,_0x4812de]),addCapsulesToWorld(0xe),runner=Runner[_0x594913(0x1d8)](),Runner[_0x594913(0x1ea)](runner,engine),Events['on'](engine,_0x594913(0x1e2),()=>{capsules['forEach'](_0x34c637=>{const _0x2cf1cb=_0x2c11,_0x56ad84=_0x34c637['body'],{x:_0x1aca0b,y:_0x2590e6}=_0x56ad84['position'];(_0x2590e6>_0x3aa2cf+0x64||_0x1aca0b<-0x32||_0x1aca0b>_0x6f72ef+0x32||_0x2590e6<-0xc8)&&(Body[_0x2cf1cb(0x1d1)](_0x56ad84,{'x':_0x6f72ef/0x2,'y':_0x3aa2cf/0x2}),Body[_0x2cf1cb(0x1b3)](_0x56ad84,{'x':0x0,'y':0x0}));_0x56ad84[_0x2cf1cb(0x1bd)]>0xf&&Body[_0x2cf1cb(0x1c4)](_0x56ad84,0xf);const _0x32d64a=_0x56ad84['angle'];_0x34c637['element'][_0x2cf1cb(0x1d7)][_0x2cf1cb(0x20c)]=_0x2cf1cb(0x1b8)+(_0x1aca0b-0x12)+_0x2cf1cb(0x1e4)+(_0x2590e6-0x12)+_0x2cf1cb(0x1dd)+_0x32d64a+'rad)';});});}function addCapsulesToWorld(_0x1ccf5d){const _0x5d0a62=_0x2e66ee,_0x3a7d1c=document[_0x5d0a62(0x1c3)]('capsule-container'),_0x59619f=_0x3a7d1c[_0x5d0a62(0x1b6)];capsules[_0x5d0a62(0x1c0)](_0x4ed0ff=>{const _0x25b870=_0x5d0a62;_0x4ed0ff[_0x25b870(0x1c7)]['remove'](),World['remove'](engine['world'],_0x4ed0ff[_0x25b870(0x1df)]);}),capsules=[];const _0x3f8aef=[_0x5d0a62(0x1bf),_0x5d0a62(0x206),'cap-green',_0x5d0a62(0x1e5),_0x5d0a62(0x1e7)];for(let _0xc05298=0x0;_0xc05298<_0x1ccf5d;_0xc05298++){const _0x4e5795=document[_0x5d0a62(0x1af)](_0x5d0a62(0x1f4));_0x4e5795[_0x5d0a62(0x1a9)]=_0x5d0a62(0x1c9);const _0x5f0497=_0x3f8aef[_0xc05298%_0x3f8aef[_0x5d0a62(0x1f7)]];_0x4e5795[_0x5d0a62(0x1ab)]=_0x5d0a62(0x1e1)+_0x5f0497+_0x5d0a62(0x1d4),_0x3a7d1c[_0x5d0a62(0x204)](_0x4e5795);const _0x104b99=0x12,_0xe11cdf=Math[_0x5d0a62(0x210)]()*(_0x59619f-0x3c)+0x1e,_0x4011fe=Math[_0x5d0a62(0x210)]()*-0xc8-0x32,_0x5d3d63=Bodies[_0x5d0a62(0x20e)](_0xe11cdf,_0x4011fe,_0x104b99,{'restitution':0.5,'friction':0.005,'frictionAir':0.01,'density':0.04});World[_0x5d0a62(0x1ff)](engine[_0x5d0a62(0x1d0)],_0x5d3d63),capsules['push']({'body':_0x5d3d63,'element':_0x4e5795});}}function setCapsuleMode(_0x51cc2f){const _0x4594bc=_0x2e66ee;capsules[_0x4594bc(0x1c0)](_0x46f395=>{const _0x3fc501=_0x4594bc;_0x51cc2f===_0x3fc501(0x1ac)?Body[_0x3fc501(0x1b1)](_0x46f395['body'],{'restitution':0.9,'frictionAir':0.02,'density':0.001}):Body[_0x3fc501(0x1b1)](_0x46f395[_0x3fc501(0x1df)],{'restitution':0.5,'frictionAir':0.01,'density':0.04});});}function getDrawnNumbersFlat(){const _0x45602c=_0x2e66ee;return drawnHistory[_0x45602c(0x1c6)]();}function getAvailableNumbers(){const _0x52b5c3=_0x2e66ee,_0x49381c=document[_0x52b5c3(0x1c3)](_0x52b5c3(0x1ef))[_0x52b5c3(0x1f5)];if(_0x49381c===''||parseInt(_0x49381c)<0x1)return null;const _0x13d8ed=parseInt(_0x49381c),_0x1ddb9d=Array[_0x52b5c3(0x1be)]({'length':_0x13d8ed},(_0x5f3c16,_0x3b4c54)=>_0x3b4c54+0x1),_0x1e2cf5=getDrawnNumbersFlat();return _0x1ddb9d['filter'](_0x5ca550=>!_0x1e2cf5['includes'](_0x5ca550));}function _0xfb41(){const _0x2dfef5=['6146220lPQmAq','set','7119541Avmigs','setVelocity','hidden','rectangle','clientWidth','Group\x20','translate(','12290LYFnNx','Bodies','w-24\x20h-24','33cWAOhR','speed','from','cap-red','forEach','setItem','remaining-count','getElementById','setSpeed','Composite','flat','element','w-8\x20h-8\x20flex\x20items-center\x20justify-center\x20bg-gray-700\x20text-white\x20rounded-full\x20font-bold\x20border\x20border-gray-600\x20text-xs','physics-capsule','Body','\x20font-black\x20text-outline-lg\x20absolute\x20animate-jump-num\x20origin-bottom\x22\x20style=\x22font-family:\x20\x27Gowun\x20Dodum\x27,\x20sans-serif;\x20will-change:\x20transform,\x20z-index;\x22>','remove','drop-zone','focus','result-modal','world','setPosition','getItem','push','\x22></div>','history-list','Engine','style','create','‚ùó\x20Ï†ÑÏ≤¥\x20Ïù∏Ïõê\x20ÏàòÎ•º\x20Î®ºÏ†Ä\x20ÏûÖÎ†•Ìï¥Ï£ºÏÑ∏Ïöî','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22','text-[6rem]','group-shake','px)\x20rotate(','shaking-group','body','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22capsule-top\x22></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22capsule-bottom\x20','<div\x20class=\x22capsule-top\x22></div><div\x20class=\x22capsule-bottom\x20','afterUpdate','Events','px,\x20','cap-blue','classList','cap-purple','absolute\x20left-1/2\x20-translate-x-1/2\x20w-14\x20h-14\x20rounded-full\x20capsule-drop\x20z-50\x20flex\x20items-center\x20justify-center\x20shadow-lg\x20overflow-hidden\x20border-none\x20real-capsule-display','removeItem','run','16vlZomo','World','\x20font-black\x20text-gray-400\x20absolute\x20animate-jump-num\x20origin-bottom\x22\x20style=\x22will-change:\x20transform,\x20z-index;\x22>‚ùÑÔ∏è</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22absolute\x20inset-0\x20z-20\x20pointer-events-none\x20opacity-50\x20grayscale\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22absolute\x20top-0\x20w-full\x20h-1/2\x20rounded-t-full\x20bg-gradient-to-b\x20from-white/90\x20to-white/50\x20border-b\x20border-black/10\x20animate-open-top\x20origin-bottom\x20shadow-xl\x22></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22absolute\x20bottom-0\x20w-full\x20h-1/2\x20rounded-b-full\x20cap-gray\x20animate-open-bottom\x20origin-top\x20shadow-xl\x22></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','112108EJntyJ','total-input','Runner','applyForce','gacha_history_v8','5624430ZVyAMH','div','value','\x22></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22text-white\x20font-black\x20text-2xl\x20relative\x20z-50\x20drop-shadow-md\x20font-en\x22>?</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','length','floor','textContent','text-[10px]\x20text-slate-500\x20w-full\x20mb-1','span','Render','text-5xl','2035332EyAkUn','add','cap-green','history-panel','stringify','position','appendChild','gacha_drawn_v7','cap-gold','91yKihOs','</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22absolute\x20inset-0\x20z-20\x20pointer-events-none\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22absolute\x20top-0\x20w-full\x20h-1/2\x20rounded-t-full\x20bg-gradient-to-b\x20from-white/90\x20to-white/50\x20border-b\x20border-black/10\x20animate-open-top\x20origin-bottom\x20shadow-xl\x22></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22absolute\x20bottom-0\x20w-full\x20h-1/2\x20rounded-b-full\x20','gacha_batch_v7','addEventListener','10jyhDCq','transform','result-capsule-area','circle','flex\x20items-center\x20gap-2\x20flex-wrap\x20border-b\x20border-slate-700\x20pb-2\x20mb-1','random','2411178gPhzff','clientHeight','lever','parse','className','capsule-container','innerHTML','active','Î™®Îì†\x20Í∏∞Î°ùÏùÑ\x20Ï¥àÍ∏∞ÌôîÌïòÏãúÍ≤†ÏäµÎãàÍπå?','toggle','createElement'];_0xfb41=function(){return _0x2dfef5;};return _0xfb41();}function updateRemainingDisplay(){const _0x1ad3ff=_0x2e66ee,_0x4131ba=getAvailableNumbers(),_0x3944d7=document['getElementById'](_0x1ad3ff(0x1c2));_0x4131ba===null?_0x3944d7[_0x1ad3ff(0x1f9)]='--':(_0x3944d7[_0x1ad3ff(0x1f9)]=_0x4131ba[_0x1ad3ff(0x1f7)],localStorage[_0x1ad3ff(0x1c1)]('gacha_total_v7',document['getElementById']('total-input')[_0x1ad3ff(0x1f5)])),updateHistoryUI();}function startGacha(){const _0x241f89=_0x2e66ee;if(isSpinning)return;const _0x348998=document['getElementById'](_0x241f89(0x1ef)),_0x2cd60a=getAvailableNumbers();if(_0x2cd60a===null){alert(_0x241f89(0x1d9)),_0x348998[_0x241f89(0x1ce)]();return;}if(_0x2cd60a[_0x241f89(0x1f7)]===0x0){alert('üéâ\x20Î™®Îì†\x20Ïù∏ÏõêÏùÑ\x20ÎΩëÏïòÏäµÎãàÎã§');return;}let _0x393107=parseInt(document[_0x241f89(0x1c3)]('batch-input')[_0x241f89(0x1f5)])||0x1;if(_0x393107<0x1)_0x393107=0x1;localStorage[_0x241f89(0x1c1)](_0x241f89(0x209),_0x393107),isSpinning=!![];const _0x84d297=document['getElementById'](_0x241f89(0x213)),_0x54c1d4=document['getElementById'](_0x241f89(0x1de));_0x84d297['classList'][_0x241f89(0x1ff)]('lever-spin'),setTimeout(()=>{const _0x9b5ca4=_0x241f89;_0x54c1d4[_0x9b5ca4(0x1e6)][_0x9b5ca4(0x1ff)](_0x9b5ca4(0x1dc)),setCapsuleMode(_0x9b5ca4(0x1ac));const _0x3cd278=setInterval(()=>{capsules['forEach'](_0x410d4a=>{const _0x488d6c=_0x2c11;Body[_0x488d6c(0x1f1)](_0x410d4a[_0x488d6c(0x1df)],_0x410d4a[_0x488d6c(0x1df)][_0x488d6c(0x203)],{'x':(Math[_0x488d6c(0x210)]()-0.5)*0.002,'y':-0.01});});},0x78);setTimeout(()=>{const _0x5c6c43=_0x9b5ca4;clearInterval(_0x3cd278),_0x84d297[_0x5c6c43(0x1e6)][_0x5c6c43(0x1cc)]('lever-spin'),_0x54c1d4['classList']['remove'](_0x5c6c43(0x1dc)),isSpinning=![],setCapsuleMode('normal'),processBatchDraw(_0x2cd60a,_0x393107);},0x708);},0xc8);}function processBatchDraw(_0x3517cd,_0x5c0e93){const _0x27e2da=_0x2e66ee,_0x210126=Math['min'](_0x5c0e93,_0x3517cd[_0x27e2da(0x1f7)]),_0x3c3f10=[];let _0x47fe55=[..._0x3517cd];for(let _0x1245d1=0x0;_0x1245d1<_0x210126;_0x1245d1++){const _0xfbc0b8=Math[_0x27e2da(0x1f8)](Math[_0x27e2da(0x210)]()*_0x47fe55[_0x27e2da(0x1f7)]),_0x2912ab=_0x47fe55[_0xfbc0b8];_0x3c3f10[_0x27e2da(0x1d3)](_0x2912ab),_0x47fe55['splice'](_0xfbc0b8,0x1);}_0x3c3f10[_0x27e2da(0x1f7)]>0x0&&(drawnHistory[_0x27e2da(0x1d3)](_0x3c3f10),localStorage[_0x27e2da(0x1c1)](_0x27e2da(0x1f2),JSON[_0x27e2da(0x202)](drawnHistory))),visualDrop(_0x3c3f10,_0x5c0e93);}function _0x2c11(_0x16d057,_0x69e5e5){const _0xfb41a2=_0xfb41();return _0x2c11=function(_0x2c1124,_0xa202a){_0x2c1124=_0x2c1124-0x1a9;let _0x3d58d2=_0xfb41a2[_0x2c1124];return _0x3d58d2;},_0x2c11(_0x16d057,_0x69e5e5);}function visualDrop(_0x1ecc9c,_0x31220e){const _0x36aa94=_0x2e66ee,_0x4894b7=document['getElementById'](_0x36aa94(0x1cd)),_0x5a8bdc=document[_0x36aa94(0x1af)](_0x36aa94(0x1f4)),_0xfeeb78=[_0x36aa94(0x1bf),_0x36aa94(0x206),_0x36aa94(0x200),_0x36aa94(0x1e5),_0x36aa94(0x1e7)],_0x3e5847=_0xfeeb78[Math['floor'](Math['random']()*_0xfeeb78[_0x36aa94(0x1f7)])];_0x5a8bdc[_0x36aa94(0x1a9)]=_0x36aa94(0x1e8),_0x5a8bdc[_0x36aa94(0x1ab)]=_0x36aa94(0x1e0)+_0x3e5847+_0x36aa94(0x1f6),_0x4894b7[_0x36aa94(0x204)](_0x5a8bdc),setTimeout(()=>{const _0x3d53a5=_0x36aa94;_0x5a8bdc[_0x3d53a5(0x1cc)](),showBatchResult(_0x1ecc9c,_0x31220e),updateRemainingDisplay(),addCapsulesToWorld(0xe);},0x320);}function showBatchResult(_0x4f7e1d,_0x3925e1){const _0x1ecd88=_0x2e66ee,_0x4340f3=document[_0x1ecd88(0x1c3)]('result-modal'),_0x4594ec=document[_0x1ecd88(0x1c3)](_0x1ecd88(0x20d));_0x4594ec[_0x1ecd88(0x1ab)]='';const _0x132b27=[_0x1ecd88(0x1bf),_0x1ecd88(0x206),'cap-green',_0x1ecd88(0x1e5),'cap-purple'];for(let _0x37cb5a=0x0;_0x37cb5a<_0x3925e1;_0x37cb5a++){const _0x707a93=document[_0x1ecd88(0x1af)](_0x1ecd88(0x1f4)),_0x548d4d=_0x3925e1===0x1?'w-40\x20h-40':_0x1ecd88(0x1bb),_0x4073f6=_0x3925e1===0x1?_0x1ecd88(0x1db):_0x1ecd88(0x1fd);_0x707a93[_0x1ecd88(0x1a9)]='relative\x20flex\x20items-center\x20justify-center\x20shrink-0\x20'+_0x548d4d;if(_0x37cb5a<_0x4f7e1d['length']){const _0x24e25e=_0x4f7e1d[_0x37cb5a],_0x4b5645=_0x132b27[(_0x24e25e+_0x37cb5a)%_0x132b27[_0x1ecd88(0x1f7)]];_0x707a93[_0x1ecd88(0x1ab)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22'+_0x4073f6+_0x1ecd88(0x1cb)+_0x24e25e+_0x1ecd88(0x208)+_0x4b5645+'\x20animate-open-bottom\x20origin-top\x20shadow-xl\x22></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20';}else _0x707a93['innerHTML']=_0x1ecd88(0x1da)+_0x4073f6+_0x1ecd88(0x1ed);_0x4594ec[_0x1ecd88(0x204)](_0x707a93);}_0x4340f3[_0x1ecd88(0x1e6)][_0x1ecd88(0x1cc)]('hidden');}function closeModal(){const _0x44e3be=_0x2e66ee;document[_0x44e3be(0x1c3)](_0x44e3be(0x1cf))[_0x44e3be(0x1e6)]['add'](_0x44e3be(0x1b4));}function toggleHistory(){const _0x1fa71e=_0x2e66ee;document[_0x1fa71e(0x1c3)](_0x1fa71e(0x201))[_0x1fa71e(0x1e6)][_0x1fa71e(0x1ae)](_0x1fa71e(0x1b4));}function updateHistoryUI(){const _0x6a27f8=_0x2e66ee,_0x3b3119=document['getElementById'](_0x6a27f8(0x1d5));_0x3b3119[_0x6a27f8(0x1ab)]='',[...drawnHistory]['reverse']()['forEach']((_0x23bafa,_0x462aec)=>{const _0x410a70=_0x6a27f8,_0x314e2d=document[_0x410a70(0x1af)]('div');_0x314e2d['className']=_0x410a70(0x20f);const _0x42ba20=document[_0x410a70(0x1af)](_0x410a70(0x1fb));_0x42ba20[_0x410a70(0x1a9)]=_0x410a70(0x1fa),_0x42ba20[_0x410a70(0x1f9)]=_0x410a70(0x1b7)+(drawnHistory[_0x410a70(0x1f7)]-_0x462aec),_0x314e2d[_0x410a70(0x204)](_0x42ba20),_0x23bafa[_0x410a70(0x1c0)](_0x399bdd=>{const _0x50f827=_0x410a70,_0x22b2ee=document[_0x50f827(0x1af)](_0x50f827(0x1f4));_0x22b2ee[_0x50f827(0x1a9)]=_0x50f827(0x1c8),_0x22b2ee[_0x50f827(0x1f9)]=_0x399bdd,_0x314e2d[_0x50f827(0x204)](_0x22b2ee);}),_0x3b3119[_0x410a70(0x204)](_0x314e2d);});}function resetData(){const _0x2ce286=_0x2e66ee;if(!confirm(_0x2ce286(0x1ad)))return;drawnHistory=[],localStorage[_0x2ce286(0x1e9)](_0x2ce286(0x205)),localStorage[_0x2ce286(0x1e9)]('gacha_history_v8'),updateRemainingDisplay(),addCapsulesToWorld(0xe),alert('Ï¥àÍ∏∞ÌôîÎêòÏóàÏäµÎãàÎã§.');}window[_0x2e66ee(0x20a)]('load',init);
    </script>
</body>
</html>
